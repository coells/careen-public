import"../chunks/DsnmJJEf.js";import{p as M,f as k,d as S,s as z,r as g,t as F,e as R,b as h,c as N,T as X,F as e,U as ee,a as te,V as s}from"../chunks/DYM3if8Z.js";import{i as U,s as D,a as C}from"../chunks/C7t0kvEG.js";import{g as q}from"../chunks/Dj72RIEW.js";import{r as w}from"../chunks/DRm2eNDt.js";import{p as re}from"../chunks/Bru5XCZD.js";import{t as H,a as se,s as O,b as ae}from"../chunks/CwuGiosH.js";import{e as ne,i as oe,g as ie}from"../chunks/C7JOgiKc.js";import{N as ce,B as ue,O as le}from"../chunks/k5OSOW-I.js";import{h as me}from"../chunks/C2rEQ277.js";var de=k('<span class="rounded-full bg-amber-50 px-3 py-1 text-xs font-semibold tracking-wide text-amber-600 uppercase ring-1 ring-amber-100"> </span>'),pe=k('<div class="mb-6 flex flex-wrap items-center gap-2"></div>'),ge=k('<div class="rounded-3xl bg-white p-6 shadow-sm ring-1 ring-amber-100 sm:p-8"><!> <h1 class="mb-3 text-3xl font-semibold text-gray-900 sm:text-4xl"> </h1> <p class="text-base text-gray-600 sm:text-lg"><!></p></div>');function fe(L,l){M(l,!0);const p=()=>C(H,"$t",P),[P,i]=D(),f=(u,m=X)=>{var a=de(),d=S(a,!0);g(a),F($=>R(d,$),[()=>p()(m())]),h(u,a)};var v=ge(),t=S(v);{var c=u=>{var m=pe();ne(m,21,()=>l.categories,oe,(a,d)=>{f(a,()=>e(d))}),g(m),h(u,m)};U(t,u=>{l.categories.length>0&&u(c)})}var o=z(t,2),b=S(o,!0);g(o);var x=z(o,2),y=S(x);me(y,()=>l.description),g(x),g(v),F(()=>R(b,l.title)),h(L,v),N(),i()}var ve=k('<div class="mx-auto max-w-4xl space-y-8"><!> <!> <!></div>');function ke(L,l){M(l,!0);const p=()=>C(se,"$activeLocale",f),P=()=>C(ae,"$sessionStore",f),i=()=>C(H,"$t",f),[f,v]=D(),t=s(()=>re.params.id??""),c=s(()=>ie(e(t))),o=s(()=>{const r=p(),n=e(c);if(n)return V(n,r)}),b=s(()=>e(o)?.questions.length??0),x=s(()=>e(c)?Math.ceil(e(b)*.8):0),y=s(()=>e(c)?e(c).passingScore*100:0);let u=s(P);const m={bestScore:null,lastScore:null,attemptsCount:0,passedCount:0},a=s(()=>e(t)?e(u).inProgress[e(t)]??null:null),d=s(()=>e(t)?O.getRecentAttemptsSummary(e(u),e(t)):m),$=s(()=>({bestScore:e(d).bestScore,lastScore:e(d).lastScore,attemptsCount:e(d).attemptsCount})),Q=s(()=>(p(),[i()("Read each question carefully before selecting your answer."),i()("You can navigate between questions at any time—your answers will stay saved."),i()("Submit your quiz once every question feels complete."),i()("You need at least {percent}% to pass—aim high and have fun!",{percent:String(Math.round(e(y)))})])),Y=s(()=>{const r=p();if(!e(a))return null;const n=e(a).responses.filter(I=>I.isConfirmed).length,_=new Intl.DateTimeFormat(r==="cs"?"cs-CZ":"en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(e(a).updatedAt));return{confirmedAnswers:n,lastUpdatedLabel:_}}),j=s(()=>(p(),e(a)?i()("Start fresh"):i()("Start quiz")));function V(r,n){if(r)return r.templates[n]??r.templates.en??Object.values(r.templates)[0]??void 0}function Z(){e(t)&&(e(a)&&O.clearInProgress(e(t)),q(w("/quiz/[id]/take",{id:e(t)})))}function E(){e(t)&&q(w("/quiz/[id]/take",{id:e(t)}))}function G(){e(t)&&(O.clearInProgress(e(t)),q(w("/quiz/[id]/take",{id:e(t)})))}function A(){q(w("/"))}var T=ee(),J=te(T);{var K=r=>{ce(r,{onBack:A})},W=r=>{var n=ve(),B=S(n);ue(B,{get title(){return e(o).title},onBack:A});var _=z(B,2);fe(_,{get title(){return e(o).title},get description(){return e(o).description},get categories(){return e(c).categories}});var I=z(_,2);le(I,{get questionCount(){return e(b)},get estimatedTimeMinutes(){return e(x)},get passingScorePercent(){return e(y)},get instructions(){return e(Q)},get resume(){return e(Y)},get summary(){return e($)},get primaryActionLabel(){return e(j)},onStart:Z,onResume:E,onStartOver:G,onCancel:A}),g(n),h(r,n)};U(J,r=>{!e(c)||!e(o)?r(K):r(W,!1)})}h(L,T),N(),v()}export{ke as component};
