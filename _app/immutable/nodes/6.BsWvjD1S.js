import"../chunks/DsnmJJEf.js";import{k as Ue,ay as He,az as Ne,Z as We,av as Xe,ad as W,ap as ze,p as ue,f as P,d as n,r,b as y,c as ve,s as C,t as N,g as e,u as m,e as Q,af as ie,a as te,ax as Ge,ar as we,a5 as je,D as Be,a6 as Z,aA as Re}from"../chunks/D5Ph76YU.js";import{s as fe,i as M,a as oe}from"../chunks/s9uzDRlK.js";import{g as he}from"../chunks/CQYRoC2L.js";import{b as K,s as Ye,c as Ze,t as xe,d as de,f as Je,a as Ke,r as ye}from"../chunks/wQ1L4kqm.js";import{p as Ve}from"../chunks/CVHfwAKS.js";import{e as Oe,i as Me,a as $e}from"../chunks/CJlZNY_a.js";import"../chunks/DZtWJ51l.js";import{C as ce,X as Pe}from"../chunks/uiY3r55W.js";import{A as et}from"../chunks/_pWrI6gi.js";import{E as tt}from"../chunks/CrHbk-jR.js";const rt=()=>performance.now(),ee={tick:d=>requestAnimationFrame(d),now:()=>rt(),tasks:new Set};function De(){const d=ee.now();ee.tasks.forEach(t=>{t.c(d)||(ee.tasks.delete(t),t.f())}),ee.tasks.size!==0&&ee.tick(De)}function st(d){let t;return ee.tasks.size===0&&ee.tick(De),{promise:new Promise(v=>{ee.tasks.add(t={c:d,f:v})}),abort(){ee.tasks.delete(t)}}}function Fe(d,t){Ne(()=>{d.dispatchEvent(new CustomEvent(t))})}function nt(d){if(d==="float")return"cssFloat";if(d==="offset")return"cssOffset";if(d.startsWith("--"))return d;const t=d.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(v=>v[0].toUpperCase()+v.slice(1)).join("")}function at(d){const t={},v=d.split(";");for(const w of v){const[g,p]=w.split(":");if(!g||p===void 0)break;const q=nt(g.trim());t[q]=p.trim()}return t}const ot=d=>d;function it(d,t,v,w){var g=(d&He)!==0,p="out",q,a=t.inert;t.style.overflow;var c,f;function _(){return Ne(()=>q??=v()(t,w?.()??{},{direction:p}))}var l={is_global:g,in(){t.inert=a;{f?.abort(),f?.reset?.();return}},out(o){t.inert=!0,Fe(t,"outrostart"),f=Te(t,_(),c,0,()=>{Fe(t,"outroend"),o?.()})},stop:()=>{f?.abort()}},h=Ue;(h.transitions??=[]).push(l)}function Te(d,t,v,w,g){if(We(t)){var p,q=!1;return Xe(()=>{if(!q){var i=t({direction:"out"});p=Te(d,i,v,w,g)}}),{abort:()=>{q=!0,p?.abort()},deactivate:()=>p.deactivate(),reset:()=>p.reset(),t:()=>p.t()}}if(!t?.duration)return g(),{abort:W,deactivate:W,reset:W,t:()=>w};const{delay:a=0,css:c,tick:f,easing:_=ot}=t;var l=[],h=()=>1-w,o=d.animate(l,{duration:a,fill:"forwards"});return o.onfinish=()=>{o.cancel();var i=1-w,z=w-i,j=t.duration*Math.abs(z),b=[];if(j>0){var S=!1;if(c)for(var u=Math.ceil(j/16.666666666666668),B=0;B<=u;B+=1){var L=i+z*_(B/u),R=at(c(L,1-L));b.push(R),S||=R.overflow==="hidden"}S&&(d.style.overflow="hidden"),h=()=>{var A=o.currentTime;return i+z*_(A/j)},f&&st(()=>{if(o.playState!=="running")return!1;var A=h();return f(A,1-A),!0})}o=d.animate(b,{duration:j,fill:"forwards"}),o.onfinish=()=>{h=()=>w,f?.(w,1-w),g()}},{abort:()=>{o&&(o.cancel(),o.effect=null,o.onfinish=W)},deactivate:()=>{g=W},reset:()=>{f?.(1,0)},t:()=>h()}}var lt=P("<div> </div>"),dt=P('<button type="button"><div><!></div> <div class="text-sm"><div class="font-medium text-gray-900"> </div> <!></div></button>'),ct=P('<aside class="lg:w-54"><div class="space-y-6 rounded-3xl bg-white p-5 shadow-sm ring-1 ring-amber-100 sm:p-6 lg:sticky lg:top-28"><div class="space-y-2"></div></div></aside>');function ut(d,t){ue(t,!0);const v=()=>oe(xe,"$t",w),[w,g]=fe(),p=(_,l=W)=>{const h=m(()=>l().isAnswered?l().isCorrect?"border-emerald-400 bg-emerald-400 text-white":"border-rose-400 bg-rose-400 text-white":l().isCurrent?"border-sky-400 bg-sky-400 text-white":"border-gray-200 bg-white text-gray-700");var o=dt();o.__click=()=>q(l().index);var i=n(o),z=n(i);{var j=A=>{var k=ie(),D=te(k);{var U=T=>{ce(T,{class:"h-5 w-5"})},G=T=>{Pe(T,{class:"h-5 w-5"})};M(D,T=>{l().isCorrect?T(U):T(G,!1)})}y(A,k)},b=A=>{var k=Ge();N(()=>Q(k,l().index+1)),y(A,k)};M(z,A=>{l().isAnswered?A(j):A(b,!1)})}r(i);var S=C(i,2),u=n(S),B=n(u,!0);r(u);var L=C(u,2);{var R=A=>{var k=lt(),D=n(k,!0);r(k),N(U=>{K(k,1,Ze(l().isCorrect?"text-xs text-emerald-600":"text-xs text-rose-600")),Q(D,U)},[()=>l().isCorrect?v()("Correct"):v()("Incorrect")]),y(A,k)};M(L,A=>{l().isAnswered&&A(R)})}r(S),r(o),N((A,k)=>{K(o,1,`flex w-full items-center gap-3 rounded-2xl px-3 py-2 text-left transition ${l().isCurrent?"bg-amber-50 ring-1 ring-amber-200":"hover:bg-gray-50"}`),Ye(o,"aria-label",A),K(i,1,`flex h-10 w-10 shrink-0 items-center justify-center rounded-full border-2 font-semibold transition ${e(h)}`),Q(B,k)},[()=>`${v()("Question {index}",{index:String(l().index+1)})}: ${l().text}`,()=>v()("Question {index}",{index:String(l().index+1)})]),y(_,o)};function q(_){t.onSelect?.(_)}var a=ct(),c=n(a),f=n(c);Oe(f,21,()=>t.items,_=>_.index,(_,l)=>{p(_,()=>e(l))}),r(f),r(c),r(a),y(d,a),ve(),g()}ze(["click"]);function vt(d){const t=d-1;return t*t*t+1}function ft(d,{delay:t=0,duration:v=400,easing:w=vt,axis:g="y"}={}){const p=getComputedStyle(d),q=+p.opacity,a=g==="y"?"height":"width",c=parseFloat(p[a]),f=g==="y"?["top","bottom"]:["left","right"],_=f.map(b=>`${b[0].toUpperCase()}${b.slice(1)}`),l=parseFloat(p[`padding${_[0]}`]),h=parseFloat(p[`padding${_[1]}`]),o=parseFloat(p[`margin${_[0]}`]),i=parseFloat(p[`margin${_[1]}`]),z=parseFloat(p[`border${_[0]}Width`]),j=parseFloat(p[`border${_[1]}Width`]);return{delay:t,duration:v,easing:w,css:b=>`overflow: hidden;opacity: ${Math.min(b*20,1)*q};${a}: ${b*c}px;padding-${f[0]}: ${b*l}px;padding-${f[1]}: ${b*h}px;margin-${f[0]}: ${b*o}px;margin-${f[1]}: ${b*i}px;border-${f[0]}-width: ${b*z}px;border-${f[1]}-width: ${b*j}px;min-${a}: 0`}}const xt=(d,t=W)=>{const v=m(()=>t().showResult?t().isCorrectAnswer?"border-emerald-400 bg-emerald-400 text-white":t().isUserAnswer?"border-rose-400 bg-rose-400 text-white":"border-gray-300 bg-gray-100 text-gray-500":t().isSelected?"border-amber-300 bg-amber-500 text-white":"border-gray-300 bg-white text-gray-500");var w=pt(),g=n(w);{var p=a=>{var c=ie(),f=te(c);{var _=h=>{ce(h,{class:"h-4 w-4"})},l=h=>{Pe(h,{class:"h-4 w-4"})};M(f,h=>{t().isCorrectAnswer?h(_):h(l,!1)})}y(a,c)},q=a=>{var c=ie(),f=te(c);{var _=l=>{var h=gt();y(l,h)};M(f,l=>{t().isSelected&&l(_)},!0)}y(a,c)};M(g,a=>{t().showResult&&(t().isCorrectAnswer||t().isUserAnswer)?a(p):a(q,!1)})}r(w),N(()=>K(w,1,`mt-1 inline-flex h-6 w-6 shrink-0 items-center justify-center rounded-full border font-semibold ${e(v)}`)),y(d,w)};var mt=P('<div><div class="flex items-start gap-4"><span><!></span> <div class="flex-1"><div class="mb-1 text-xs font-semibold tracking-wide text-gray-600 uppercase"> </div> <span class="text-sm text-gray-900 sm:text-base"> </span></div></div></div>'),bt=P('<button type="button"><div class="flex items-start gap-4"><!> <span class="text-sm text-gray-900 sm:text-base"> </span></div></button>'),gt=P('<span class="h-2 w-2 rounded-full bg-white"></span>'),pt=P("<span><!></span>"),_t=P('<div class="mb-8 rounded-2xl border border-sky-200 bg-sky-50 px-4 py-3 sm:px-5 sm:py-4"><div class="flex items-start gap-4"><svg class="mt-1 h-6 w-6 shrink-0 text-sky-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div class="flex-1"><div class="mb-1 text-xs font-semibold tracking-wide text-gray-600 uppercase"> </div> <p class="text-sm text-gray-900 sm:text-base"> </p></div></div></div>'),wt=P('<h2 class="mb-2 text-lg font-semibold text-gray-900 sm:text-xl"> </h2>'),ht=P('<div class="mb-8 space-y-3"></div>'),yt=P('<div><div class="mb-6"><!></div> <!></div>'),kt=P('<button type="button" class="inline-flex items-center gap-2 rounded-full bg-amber-500 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-amber-600 disabled:cursor-not-allowed disabled:opacity-50 sm:px-6"> <!></button>'),At=P('<button type="button" class="inline-flex items-center gap-2 rounded-full bg-sky-500 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-sky-600 sm:px-6"> <!></button>'),Ct=P('<button type="button" class="inline-flex items-center gap-2 rounded-full bg-emerald-500 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-emerald-600 sm:px-6"> <!></button>'),St=P('<!> <div class="mb-6 flex flex-wrap items-center justify-between gap-3 text-sm text-gray-500"><div class="flex items-center gap-2"><span class="inline-flex h-8 w-8 items-center justify-center rounded-full bg-amber-50 font-semibold text-amber-600"> </span> <span> </span></div> <div class="rounded-full bg-gray-100 px-3 py-1"><span class="font-medium text-gray-700"> </span></div></div> <p class="mb-6 text-base text-gray-900 sm:mb-8 sm:text-lg"> </p> <div class="relative"><!></div> <div class="flex flex-wrap items-center justify-between gap-3"><button type="button" class="inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white px-5 py-2.5 text-sm font-medium text-gray-700 transition hover:border-amber-200 hover:text-amber-600 disabled:cursor-not-allowed disabled:opacity-40"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg> </button> <div class="flex flex-wrap items-center gap-3"><!></div></div>',1),qt=P('<section class="flex-1 rounded-3xl bg-white p-5 shadow-sm ring-1 ring-gray-100 sm:p-6 lg:p-8"><!></section>');function It(d,t){ue(t,!0);const v=()=>oe(xe,"$t",w),[w,g]=fe(),p=(b,S=W,u=W)=>{const B=m(()=>u()?"border-emerald-400 bg-emerald-50":"border-rose-300 bg-rose-50"),L=m(()=>u()?"border-emerald-400 bg-emerald-400 text-white":"border-rose-400 bg-rose-400 text-white");var R=mt(),A=n(R),k=n(A),D=n(k);{var U=X=>{ce(X,{class:"h-4 w-4"})},G=X=>{Pe(X,{class:"h-4 w-4"})};M(D,X=>{u()?X(U):X(G,!1)})}r(k);var T=C(k,2),Y=n(T),re=n(Y,!0);r(Y);var le=C(Y,2),ne=n(le,!0);r(le),r(T),r(A),r(R),N(X=>{K(R,1,`w-full rounded-2xl border-[1.5px] px-4 py-3 sm:px-5 sm:py-4 ${e(B)}`),K(k,1,`mt-1 inline-flex h-6 w-6 shrink-0 items-center justify-center rounded-full border font-semibold ${e(L)}`),Q(re,X),Q(ne,S())},[()=>v()("Correct answer")]),y(b,R)},q=(b,S=W,u=W)=>{const B=m(()=>t.selectedAnswer===u()),L=m(()=>t.question?.correctAnswer===u()),R=m(()=>t.confirmedAnswer?.selectedOption===u()),A=m(()=>e(c)?e(L)?"border-emerald-400 bg-emerald-50":e(R)?"border-rose-300 bg-rose-50":"border-gray-200 bg-gray-50":e(B)?"border-amber-300 bg-amber-50 ring-1 ring-amber-200":"border-gray-200 bg-white hover:border-amber-200 hover:bg-amber-50/50");var k=bt();k.__click=()=>f(u());var D=n(k),U=n(D);xt(U,()=>({showResult:e(c),isCorrectAnswer:e(L),isUserAnswer:e(R),isSelected:e(B)}));var G=C(U,2),T=n(G,!0);r(G),r(D),r(k),N(()=>{k.disabled=e(c),K(k,1,`w-full rounded-2xl border-[1.5px] px-4 py-3 text-left transition focus-visible:outline focus-visible:outline-offset-2 focus-visible:outline-amber-400 disabled:cursor-not-allowed sm:px-5 sm:py-4 ${e(A)}`),Q(T,S())}),y(b,k)},a=(b,S=W)=>{var u=_t(),B=n(u),L=C(n(B),2),R=n(L),A=n(R,!0);r(R);var k=C(R,2),D=n(k,!0);r(k),r(L),r(B),r(u),N(U=>{Q(A,U),Q(D,S())},[()=>v()("Learn together")]),y(b,u)},c=m(()=>!!t.confirmedAnswer);function f(b){e(c)||t.onSelectAnswer?.(b)}function _(){e(c)||t.onConfirmAnswer?.()}function l(){e(c)&&t.onNextQuestion?.()}function h(){e(c)&&t.onSubmit?.()}function o(){t.onPreviousQuestion?.()}var i=qt(),z=n(i);{var j=b=>{var S=St(),u=te(S);{var B=F=>{var I=wt(),E=n(I,!0);r(I),N(()=>Q(E,t.question.title)),y(F,I)};M(u,F=>{t.question.title&&F(B)})}var L=C(u,2),R=n(L),A=n(R),k=n(A,!0);r(A);var D=C(A,2),U=n(D,!0);r(D),r(R);var G=C(R,2),T=n(G),Y=n(T,!0);r(T),r(G),r(L);var re=C(L,2),le=n(re,!0);r(re);var ne=C(re,2),X=n(ne);{var ke=F=>{var I=ht();Oe(I,21,()=>t.question.options,Me,(E,V,$)=>{q(E,()=>e(V),()=>$)}),r(I),it(2,I,()=>ft,()=>({duration:500})),y(F,I)},Ae=F=>{var I=yt(),E=n(I),V=n(E);p(V,()=>t.question.options[t.question.correctAnswer],()=>t.confirmedAnswer?.isCorrect??!1),r(E);var $=C(E,2);{var s=x=>{a(x,()=>t.question.explanation)};M($,x=>{t.question.explanation&&x(s)})}r(I),y(F,I)};M(X,F=>{e(c)?F(Ae,!1):F(ke)})}r(ne);var me=C(ne,2),ae=n(me);ae.__click=o;var Ce=C(n(ae));r(ae);var be=C(ae,2),Se=n(be);{var ge=F=>{var I=kt();I.__click=_;var E=n(I),V=C(E);ce(V,{class:"h-4 w-4"}),r(I),N($=>{I.disabled=t.selectedAnswer===null,Q(E,`${$??""} `)},[()=>v()("Confirm answer")]),y(F,I)},qe=F=>{var I=ie(),E=te(I);{var V=s=>{var x=At();x.__click=l;var O=n(x),H=C(O);et(H,{class:"h-4 w-4"}),r(x),N(J=>Q(O,`${J??""} `),[()=>v()("Next question")]),y(s,x)},$=s=>{var x=ie(),O=te(x);{var H=J=>{var se=Ct();se.__click=h;var pe=n(se),_e=C(pe);ce(_e,{class:"h-4 w-4"}),r(se),N(Ie=>Q(pe,`${Ie??""} `),[()=>v()("Submit quiz")]),y(J,se)};M(O,J=>{t.allQuestionsAnswered&&J(H)},!0)}y(s,x)};M(E,s=>{t.isLastQuestion?s($,!1):s(V)},!0)}y(F,I)};M(Se,F=>{e(c)?F(qe,!1):F(ge)})}r(be),r(me),N((F,I,E)=>{Q(k,t.questionIndex+1),Q(U,F),Q(Y,I),Q(le,t.question.text),ae.disabled=t.questionIndex===0,Q(Ce,` ${E??""}`)},[()=>v()("Question {index} of {total}",{index:String(t.questionIndex+1),total:String(t.totalQuestions)}),()=>v()("Select the best answer"),()=>v()("Previous")]),y(b,S)};M(z,b=>{t.question&&b(j)})}r(i),y(d,i),ve(),g()}ze(["click"]);const Le=(d,t=W)=>{const v=m(()=>t().tone==="amber"?{background:"bg-amber-50",ring:"ring-amber-100",label:"text-amber-600"}:{background:"bg-sky-50",ring:"ring-sky-100",label:"text-sky-600"});var w=Qt(),g=n(w),p=n(g,!0);r(g);var q=C(g,2),a=n(q,!0);r(q);var c=C(q,2),f=n(c,!0);r(c),r(w),N(()=>{K(w,1,`rounded-2xl px-5 py-4 text-center shadow-sm ring-1 ${e(v).background} ${e(v).ring}`),K(g,1,`text-xs font-medium tracking-wide uppercase ${e(v).label}`),Q(p,t().label),Q(a,t().primary),Q(f,t().helper)}),y(d,w)};var Qt=P('<div><div> </div> <div class="text-2xl font-semibold text-gray-900 sm:text-3xl"> </div> <div class="text-sm text-gray-500"> </div></div>'),zt=P('<div class="rounded-3xl bg-white p-6 shadow-sm ring-1 ring-amber-100 sm:p-8"><div class="flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between"><div class="max-w-2xl space-y-3"><h1 class="text-2xl font-semibold text-gray-900 sm:text-3xl lg:text-4xl"> </h1> <p class="text-base text-gray-600"> </p></div> <div class="flex flex-wrap items-center gap-4"><!> <!></div></div></div>');function Ot(d,t){ue(t,!0);const v=()=>oe(xe,"$t",w),[w,g]=fe(),p=m(()=>Math.round(t.scorePercentage));var q=zt(),a=n(q),c=n(a),f=n(c),_=n(f,!0);r(f);var l=C(f,2),h=n(l,!0);r(l),r(c);var o=C(c,2),i=n(o);{let j=m(()=>({label:v()("Question"),primary:`${t.currentQuestion}`,helper:v()("of {total}",{total:String(t.totalQuestions)}),tone:"amber"}));Le(i,()=>e(j))}var z=C(i,2);{let j=m(()=>({label:v()("Current score"),primary:`${t.score}`,helper:v()("{percent}%",{percent:String(e(p))}),tone:"sky"}));Le(z,()=>e(j))}r(o),r(a),r(q),N(()=>{Q(_,t.title),Q(h,t.message)}),y(d,q),ve(),g()}var Pt=P("<span> </span>"),jt=P('<button type="button" class="transition hover:text-amber-600"> </button>'),Bt=P("<span>/</span>"),Rt=P("<!> <!>",1),Ft=P('<div class="flex flex-wrap items-center justify-between gap-4"><div class="flex flex-wrap items-center gap-2 text-sm text-gray-500"></div> <button type="button" class="inline-flex items-center gap-2 rounded-full border border-amber-200 bg-white px-4 py-2 text-sm font-semibold text-amber-700 shadow-sm transition hover:border-amber-300 hover:text-amber-800"><svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9l-2 3m0 0l2 3m-2-3h8m4 0a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> </button></div>');function Lt(d,t){ue(t,!0);const v=()=>oe(xe,"$t",w),[w,g]=fe(),p=(h,o=W)=>{var i=ie(),z=te(i);{var j=S=>{var u=Pt(),B=n(u,!0);r(u),N(()=>{K(u,1,`font-medium ${o().isActive?"text-gray-900":"hover:text-amber-600"}`),Q(B,o().label)}),y(S,u)},b=S=>{var u=jt();u.__click=()=>a(o());var B=n(u,!0);r(u),N(()=>Q(B,o().label)),y(S,u)};M(z,S=>{o().isActive||!o().onSelect?S(j):S(b,!1)})}y(h,i)};function q(){t.onQuit?.()}function a(h){h.isActive||h.onSelect?.()}var c=Ft(),f=n(c);Oe(f,21,()=>t.crumbs,Me,(h,o,i)=>{var z=Rt(),j=te(z);p(j,()=>e(o));var b=C(j,2);{var S=u=>{var B=Bt();y(u,B)};M(b,u=>{i<t.crumbs.length-1&&u(S)})}y(h,z)}),r(f);var _=C(f,2);_.__click=q;var l=C(n(_));r(_),r(c),N(h=>Q(l,` ${h??""}`),[()=>v()("Quit Quiz")]),y(d,c),ve(),g()}ze(["click"]);var Nt=P('<div class="mx-auto max-w-7xl space-y-6"><!> <!> <div class="flex flex-col gap-6 lg:flex-row"><div class="hidden shrink-0 lg:block"><!></div> <div class="min-w-0 flex-1"><!></div></div></div>');function Jt(d,t){ue(t,!0);const v=()=>oe(Ke,"$activeLocale",p),w=()=>oe(Je,"$sessionStore",p),g=()=>oe(xe,"$t",p),[p,q]=fe(),a=m(()=>Ve.params.quizId??""),c=m(()=>$e(e(a))),f=m(()=>F(e(c),v())),_=m(()=>e(f)?.questions??[]),l=m(()=>e(_).length);let h=m(w),o=we(je([])),i=we(0),z=we(null),j=we(je(new Date().toISOString())),b=!1;const S=m(()=>e(_)[e(i)]),u=m(()=>e(o).filter(s=>s.isConfirmed&&typeof s.isCorrect=="boolean").map(s=>({questionIndex:s.questionIndex,selectedOption:s.selectedOption,isCorrect:!!s.isCorrect}))),B=m(()=>e(o).find(s=>s.questionIndex===e(i))??null),L=m(()=>e(u).find(s=>s.questionIndex===e(i))??null),R=m(()=>!!e(B)?.isConfirmed),A=m(()=>e(i)===e(l)-1),k=m(()=>e(u).length),D=m(()=>e(k)===e(l)),U=m(()=>e(u).filter(s=>s.isCorrect).length),G=m(()=>e(l)>0?e(U)/e(l)*100:0),T=m(()=>e(_).map((s,x)=>{const O=e(u).find(H=>H.questionIndex===x)??null;return{index:x,text:s.text,isCurrent:x===e(i),isAnswered:!!O,isCorrect:O?.isCorrect??null}}));Be(()=>{const s=e(o).find(x=>x.questionIndex===e(i));Z(z,s?.selectedOption??e(L)?.selectedOption??null,!0)}),Be(()=>{if(!e(a)||!e(c)||b)return;const s=e(h).inProgress[e(a)];if(s){Z(i,s.currentQuestionIndex,!0);const O=s.responses??[];Z(o,O.map(H=>({...H})),!0),Z(j,s.startedAt??new Date().toISOString(),!0),Z(z,O.find(H=>H.questionIndex===e(i))?.selectedOption??null,!0),b=!0;return}const x=new Date().toISOString();Z(j,x,!0),Z(i,0),Z(o,[],!0),de.setInProgress(e(a),{quizId:e(a),currentQuestionIndex:0,responses:[],startedAt:x,updatedAt:x}),b=!0});function Y(s){if(!e(a))return;const x=new Date().toISOString();de.updateInProgress(e(a),{currentQuestionIndex:e(i),responses:e(o).map(O=>({...O})),updatedAt:x,...s})}function re(s){const x=e(o).slice(),O=x.findIndex(J=>J.questionIndex===s.questionIndex),H={questionIndex:s.questionIndex,selectedOption:s.selectedOption??-1,isConfirmed:s.isConfirmed??!1,isCorrect:s.isCorrect??null};x[O>=0?O:x.length]={...O>=0?x[O]:H,...s},Z(o,x,!0)}function le(s){e(R)||(Z(z,s,!0),re({questionIndex:e(i),selectedOption:s,isConfirmed:!1,isCorrect:null}),Y())}function ne(){if(e(z)===null||!e(S)||!e(a))return;const s=e(z)===e(S).correctAnswer;re({questionIndex:e(i),selectedOption:e(z),isConfirmed:!0,isCorrect:s}),Y()}function X(){e(a)&&e(i)<e(l)-1&&(Re(i),Y())}function ke(){e(a)&&e(i)>0&&(Re(i,-1),Y())}function Ae(s){e(a)&&(Z(i,s,!0),Y())}function me(){if(!e(c)||!e(a))return;const s=new Date().toISOString(),x=de.appendAttempt(e(c),e(u).map(O=>({...O})),e(j),s);de.clearInProgress(e(a)),he(ye("/quiz/[quizId]/result/[attemptId]",{quizId:e(a),attemptId:x.attemptId}))}function ae(){e(D)&&me()}function Ce(){e(a)&&confirm(g()("Are you sure you want to quit? Your progress will be lost."))&&(de.clearInProgress(e(a)),he(ye("/quiz/[quizId]",{quizId:e(a)})))}function be(){he(ye("/"))}function Se(){e(a)&&he(ye("/quiz/[quizId]",{quizId:e(a)}))}const ge=m(()=>e(f)?.title??g()("Unknown Quiz")),qe=m(()=>[{label:g()("Dashboard"),onSelect:be},{label:e(ge),onSelect:Se},{label:g()("Take Quiz"),isActive:!0}]);function F(s,x){if(s)return s.templates[x]??s.templates.en??Object.values(s.templates)[0]}var I=ie(),E=te(I);{var V=s=>{{let x=m(()=>g()("Quiz Not Found")),O=m(()=>g()("The quiz you're looking for doesn't exist or has been removed."));tt(s,{get title(){return e(x)},get description(){return e(O)}})}},$=s=>{var x=Nt(),O=n(x);Lt(O,{get crumbs(){return e(qe)},onQuit:Ce});var H=C(O,2);{let Qe=m(()=>g()("Stay focused, trust your instincts, and remember every question is a chance to learn.")),Ee=m(()=>e(i)+1);Ot(H,{get title(){return e(ge)},get message(){return e(Qe)},get currentQuestion(){return e(Ee)},get totalQuestions(){return e(l)},get score(){return e(U)},get scorePercentage(){return e(G)}})}var J=C(H,2),se=n(J),pe=n(se);ut(pe,{get items(){return e(T)},onSelect:Ae}),r(se);var _e=C(se,2),Ie=n(_e);{let Qe=m(()=>e(S)??null);It(Ie,{get question(){return e(Qe)},get questionIndex(){return e(i)},get totalQuestions(){return e(l)},get selectedAnswer(){return e(z)},get confirmedAnswer(){return e(L)},get isLastQuestion(){return e(A)},get allQuestionsAnswered(){return e(D)},onSelectAnswer:le,onConfirmAnswer:ne,onNextQuestion:X,onPreviousQuestion:ke,onSubmit:ae})}r(_e),r(J),r(x),y(s,x)};M(E,s=>{!e(c)||!e(f)?s(V):s($,!1)})}y(d,I),ve(),q()}export{Jt as component};
