import"../chunks/DsnmJJEf.js";import{i as oe,ap as me,p as J,f as B,d as r,s as o,r as t,t as L,e as d,b as z,c as X,g as e,u as n,y as pe,ad as ie,af as de,a as ce}from"../chunks/D5Ph76YU.js";import{a as O,s as Z,i as ae}from"../chunks/s9uzDRlK.js";import{g as le}from"../chunks/CQYRoC2L.js";import{h as xe,t as ee,b as Y,a as be,d as he,f as fe,r as ve}from"../chunks/wQ1L4kqm.js";import{p as ue}from"../chunks/CVHfwAKS.js";import{e as _e,i as ye,a as we}from"../chunks/CJlZNY_a.js";import{h as ke}from"../chunks/XnOvXG1Q.js";import{E as ze}from"../chunks/CrHbk-jR.js";function qe(b,a,s,Q){var w=b.__style;if(oe||w!==a){var g=xe(a);(!oe||g!==b.getAttribute("style"))&&(g==null?b.removeAttribute("style"):b.style.cssText=g),b.__style=a}return Q}var Se=B('<h2 class="mb-2 text-2xl font-semibold text-amber-800"> </h2>'),Ce=B('<div class="flex flex-col gap-3 sm:flex-row sm:justify-center"><button type="button" class="rounded-full bg-amber-500 px-6 py-3 text-sm font-semibold text-white transition hover:bg-amber-600"> </button> <button type="button" class="rounded-full border border-gray-200 bg-white px-6 py-3 text-sm font-semibold text-gray-700 transition hover:border-amber-200 hover:text-amber-600"> </button></div>'),Qe=B('<div class="mx-auto max-w-4xl"><div class="rounded-xl border border-amber-200 bg-amber-50 p-8 text-center"><!> <p class="mb-6 text-amber-700"> </p> <!></div></div>');function Te(b,a){J(a,!0);const s=()=>O(ee,"$t",Q),[Q,w]=Z(),g=v=>{var p=Se(),x=r(p,!0);t(p),L(h=>d(x,h),[()=>s()("Attempt Not Found")]),z(v,p)},T=v=>{var p=Ce(),x=r(p);x.__click=f;var h=r(x,!0);t(x);var A=o(x,2);A.__click=u;var $=r(A,!0);t(A),t(p),L((R,M)=>{d(h,R),d($,M)},[()=>s()("View quiz details"),()=>s()("Back to Dashboard")]),z(v,p)};function u(){a.onNavigateHome?.()}function f(){a.onViewQuiz?.()}var _=Qe(),i=r(_),c=r(i);g(c);var l=o(c,2),q=r(l,!0);t(l);var k=o(l,2);T(k),t(i),t(_),L(v=>d(q,v),[()=>s()("We couldn't find that quiz attempt. It may have been removed after clearing your progress.")]),z(b,_),X(),w()}me(["click"]);var $e=B('<div class="flex items-center gap-2 text-sm text-gray-500"><button type="button" class="transition hover:text-amber-600"> </button> <span>/</span> <button type="button" class="transition hover:text-amber-600"> </button> <span>/</span> <span class="font-medium text-gray-900"> </span></div>');function Ie(b,a){J(a,!0);const s=()=>O(ee,"$t",Q),[Q,w]=Z();function g(){a.onNavigateHome?.()}function T(){a.onViewQuiz?.()}var u=$e(),f=r(u);f.__click=g;var _=r(f,!0);t(f);var i=o(f,4);i.__click=T;var c=r(i,!0);t(i);var l=o(i,4),q=r(l,!0);t(l),t(u),L((k,v)=>{d(_,k),d(c,a.quizTitle),d(q,v)},[()=>s()("Dashboard"),()=>s()("Results")]),z(b,u),X(),w()}me(["click"]);var Ae=pe('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>'),Me=pe('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>'),Ne=B('<div class="mb-3 flex justify-center"><div><svg class="h-10 w-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><!></svg></div></div>'),Pe=B("<div><!> <h2> </h2> <p> </p></div>");function Be(b,a){J(a,!0);const s=()=>O(ee,"$t",Q),[Q,w]=Z(),g=p=>{var x=Ne(),h=r(x),A=r(h),$=r(A);{var R=S=>{var C=Ae();z(S,C)},M=S=>{var C=Me();z(S,C)};ae($,S=>{a.passed?S(R):S(M,!1)})}t(A),t(h),t(x),L(()=>Y(h,1,`rounded-full p-3 shadow-sm ${e(u)}`)),z(p,x)},T=n(()=>a.passed?"bg-emerald-50 ring-emerald-100":"bg-amber-50 ring-amber-100"),u=n(()=>a.passed?"bg-emerald-400 text-white":"bg-amber-400 text-white"),f=n(()=>a.passed?s()("Nice work!"):s()("Keep going!")),_=n(()=>a.passed?s()("You passed the quiz. Celebrate the progress you made today."):s()("This attempt didn't pass, but every try sharpens your understanding."));var i=Pe(),c=r(i);g(c);var l=o(c,2),q=r(l,!0);t(l);var k=o(l,2),v=r(k,!0);t(k),t(i),L(()=>{Y(i,1,`rounded-3xl p-7 text-center shadow-sm ring-1 ${e(T)}`),Y(l,1,`mb-2 text-3xl font-semibold ${a.passed?"text-emerald-700":"text-amber-700"}`),d(q,e(f)),Y(k,1,`text-sm ${a.passed?"text-emerald-700/80":"text-amber-700/80"}`),d(v,e(_))}),z(b,i),X(),w()}var Ve=B('<div class="rounded-3xl border border-amber-100/40 bg-white/90 p-6 shadow-sm sm:p-8"><div class="space-y-6"><div><h2 class="text-xs font-semibold tracking-[0.25em] text-amber-600 uppercase"> </h2> <h3 class="mt-2 text-xl font-semibold text-gray-900 sm:text-2xl"> </h3> <p class="mt-2 text-sm text-gray-600"><!></p></div> <div><p class="text-sm text-gray-700"> <span class="font-semibold text-gray-900"> </span> </p> <div class="mt-3 h-3 overflow-hidden rounded-full bg-gray-200"><div></div></div> <div class="mt-2 flex flex-wrap items-center justify-between gap-2 text-xs font-medium text-gray-500"><span> </span> <span class="text-right"> </span></div></div> <div><h4 class="mb-2 text-base font-semibold"> </h4> <p> </p></div></div></div>');function je(b,a){J(a,!0);const s=()=>O(ee,"$t",Q),[Q,w]=Z(),g=n(()=>Math.min(100,Math.max(0,a.scorePercentage))),T=n(()=>Math.min(100,Math.max(0,a.passingScorePercentage))),u=n(()=>Math.round(e(g))),f=n(()=>Math.round(e(T))),_=n(()=>a.passed?"bg-emerald-400":"bg-amber-400"),i=n(()=>{if(a.passed)return s()("Goal reached");const re=Math.max(0,e(f)-e(u));return re>0?s()("{gap}% more to reach goal",{gap:String(re)}):s()("Right on the edge—almost there")}),c=[{min:100,title:"Flawless finish",body:"Every answer landed. Take a bow and share the win while it's fresh."},{min:90,title:"Mastery unlocked",body:"You're cruising at the top tier. A quick recap keeps that mastery sharp."},{min:80,title:"Strong command",body:"Most questions clicked. Sweep through the tricky notes and you'll be unstoppable."},{min:70,title:"Solid progress",body:"You're above the pass lane. Tighten a few edges and aim even higher next round."},{min:60,title:"On the rise",body:"Momentum is building. Revisit explanations, then swing back for the breakthrough."},{min:50,title:"Halfway there",body:"You've built a solid base. Reinforce the weak spots and you'll level up fast."},{min:0,title:"Warm-up phase",body:"Use the review to map the gaps, then retake while the material is fresh in mind."}],l=n(()=>c.find(ne=>e(u)>=ne.min)??c.at(-1)),q=n(()=>s()(e(l).title)),k=n(()=>s()(e(l).body));var v=Ve(),p=r(v),x=r(p),h=r(x),A=r(h,!0);t(h);var $=o(h,2),R=r($,!0);t($);var M=o($,2),S=r(M);ke(S,()=>a.quizDescription),t(M),t(x);var C=o(x,2),D=r(C),G=r(D),V=o(G),E=r(V);t(V);var te=o(V);t(D);var U=o(D,2),m=r(U);t(U);var I=o(U,2),y=r(I),j=r(y,!0);t(y);var N=o(y,2),P=r(N,!0);t(N),t(I),t(C);var H=o(C,2),F=r(H),K=r(F,!0);t(F);var W=o(F,2),se=r(W,!0);t(W),t(H),t(p),t(v),L((re,ne,ge)=>{d(A,re),d(R,a.quizTitle),d(G,`${ne??""} `),d(E,`${a.correctAnswers??""}/${a.totalQuestions??""}`),d(te,` (${e(u)??""}%).`),Y(m,1,`h-full rounded-full transition-all ${e(_)}`),qe(m,`width: ${e(g)}%`),d(j,ge),d(P,e(i)),Y(H,1,`rounded-2xl p-5 text-sm ${a.passed?"bg-emerald-50/80 text-emerald-700":"bg-amber-50/80 text-amber-700"}`),d(K,e(q)),d(se,e(k))},[()=>s()("Performance summary"),()=>s()("Your score is"),()=>s()("Passing score · {percent}%",{percent:String(e(f))})]),z(b,v),X(),w()}var He=B('<p class="rounded-xl bg-white/70 p-3 text-sm text-gray-600"> </p>'),Le=B('<div><div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"><div><p class="text-sm font-semibold text-gray-900"> </p> <p class="text-base text-gray-700"> </p></div> <div> </div></div> <div class="mt-3 space-y-2 text-sm text-gray-700"><p><span class="font-semibold"> </span> </p> <p><span class="font-semibold"> </span> </p> <!></div></div>'),Re=B('<div class="rounded-3xl bg-white p-8 shadow-sm ring-1 ring-gray-100"><h2 class="mb-4 text-2xl font-semibold text-gray-900"> </h2> <div class="space-y-4"></div></div>');function De(b,a){J(a,!0);const s=()=>O(ee,"$t",Q),[Q,w]=Z(),g=(i,c=ie,l=ie)=>{var q=Le(),k=r(q),v=r(k),p=r(v),x=r(p,!0);t(p);var h=o(p,2),A=r(h,!0);t(h),t(v);var $=o(v,2),R=r($,!0);t($),t(k);var M=o(k,2),S=r(M),C=r(S),D=r(C,!0);t(C);var G=o(C);t(S);var V=o(S,2),E=r(V),te=r(E,!0);t(E);var U=o(E);t(V);var m=o(V,2);{var I=y=>{var j=He(),N=r(j,!0);t(j),L(()=>d(N,c().question.explanation)),z(y,j)};ae(m,y=>{c().question.explanation&&y(I)})}t(M),t(q),L((y,j,N,P)=>{Y(q,1,`rounded-2xl border px-5 py-4 transition ${c().isCorrect?"border-emerald-200 bg-emerald-50":"border-rose-200 bg-rose-50"}`),d(x,y),d(A,c().question.text),Y($,1,`text-sm font-semibold ${c().isCorrect?"text-emerald-600":"text-rose-600"}`),d(R,j),d(D,N),d(G,` ${(c().userAnswerIndex===null?"—":c().question.options[c().userAnswerIndex]??"—")??""}`),d(te,P),d(U,` ${c().question.options[c().question.correctAnswer]??""}`)},[()=>s()("Question {index}",{index:String(l()+1)}),()=>c().isCorrect?s()("Correct"):s()("Incorrect"),()=>s()("Your answer:"),()=>s()("Correct answer:")]),z(i,q)};var T=Re(),u=r(T),f=r(u,!0);t(u);var _=o(u,2);_e(_,21,()=>a.items,ye,(i,c,l)=>{g(i,()=>e(c),()=>l)}),t(_),t(T),L(i=>d(f,i),[()=>s()("Question review")]),z(b,T),X(),w()}var Fe=B('<div class="mx-auto max-w-4xl space-y-8"><!> <!> <!> <!></div>');function Ze(b,a){J(a,!0);const s=()=>O(be,"$activeLocale",g),Q=()=>O(fe,"$sessionStore",g),w=()=>O(ee,"$t",g),[g,T]=Z(),u=n(()=>ue.params.quizId??""),f=n(()=>ue.params.attemptId??""),_=n(()=>we(e(u))),i=n(()=>G(e(_),s()));let c=n(Q);const l=n(()=>e(u)&&e(f)?he.getAttemptById(e(c),e(u),e(f)):null),q=n(()=>e(_)?.passingScore??.8),k=n(()=>e(q)*100),v=n(()=>e(i)?.questions.length??e(l)?.responses.length??0),p=n(()=>e(l)?e(l).responses.filter(m=>m.isCorrect).length:0),x=n(()=>e(v)>0?e(p)/e(v)*100:0),h=n(()=>!!e(l)?.passed);function A(m,I){const y=m.map((N,P)=>{const H=I.find(W=>W.questionIndex===P),F=H?.selectedOption??null,K=H?.isCorrect??!1;return{question:N,userAnswerIndex:F,isCorrect:K}});return{correctCount:y.filter(N=>N.isCorrect).length,items:y}}const $=n(()=>!e(i)||!e(l)?null:A(e(i).questions,e(l).responses)),R=n(()=>e($)?.items??[]),M=n(()=>e(i)?.title??w()("Unknown Quiz")),S=n(()=>e(i)?.description??"");function C(){le(ve("/"))}function D(){le(ve("/quiz/[quizId]",{quizId:e(u)}))}function G(m,I){if(m)return m.templates[I]??m.templates.en??Object.values(m.templates)[0]}var V=de(),E=ce(V);{var te=m=>{{let I=n(()=>w()("Quiz Not Found")),y=n(()=>w()("The quiz you're looking for doesn't exist or has been removed."));ze(m,{get title(){return e(I)},get description(){return e(y)}})}},U=m=>{var I=de(),y=ce(I);{var j=P=>{Te(P,{onNavigateHome:C,onViewQuiz:D})},N=P=>{var H=Fe(),F=r(H);Ie(F,{get quizTitle(){return e(M)},onNavigateHome:C,onViewQuiz:D});var K=o(F,2);Be(K,{get passed(){return e(h)}});var W=o(K,2);je(W,{get quizTitle(){return e(M)},get quizDescription(){return e(S)},get scorePercentage(){return e(x)},get correctAnswers(){return e(p)},get totalQuestions(){return e(v)},get passingScorePercentage(){return e(k)},get passed(){return e(h)}});var se=o(W,2);De(se,{get items(){return e(R)}}),t(H),z(P,H)};ae(y,P=>{e(l)?P(N,!1):P(j)},!0)}z(m,I)};ae(E,m=>{!e(_)||!e(i)?m(te):m(U,!1)})}z(b,V),X(),T()}export{Ze as component};
