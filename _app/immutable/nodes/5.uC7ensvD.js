import"../chunks/DsnmJJEf.js";import{i as Ee,am as He,an as Ne,y as We,ac as Xe,T as W,a5 as Oe,p as ve,f as z,d as n,r,b as y,c as fe,s as C,t as N,F as e,V as p,e as I,U as ie,a as te,ak as Ge,a7 as we,J as Be,ai as je,K,ao as Re}from"../chunks/DYM3if8Z.js";import{s as xe,i as M,a as oe}from"../chunks/C7t0kvEG.js";import{g as he}from"../chunks/Dj72RIEW.js";import{r as ye}from"../chunks/DRm2eNDt.js";import{p as Je}from"../chunks/Bru5XCZD.js";import{d as Y,c as Ke,i as Ve,t as me,s as ce,b as Ye,a as Ze}from"../chunks/CwuGiosH.js";import{e as ze,i as Me,g as $e}from"../chunks/C7JOgiKc.js";import{N as et}from"../chunks/k5OSOW-I.js";import{C as ue,X as Pe}from"../chunks/DIAhi9H0.js";import{A as tt}from"../chunks/DohTnvr1.js";const rt=()=>performance.now(),ee={tick:d=>requestAnimationFrame(d),now:()=>rt(),tasks:new Set};function Te(){const d=ee.now();ee.tasks.forEach(t=>{t.c(d)||(ee.tasks.delete(t),t.f())}),ee.tasks.size!==0&&ee.tick(Te)}function st(d){let t;return ee.tasks.size===0&&ee.tick(Te),{promise:new Promise(v=>{ee.tasks.add(t={c:d,f:v})}),abort(){ee.tasks.delete(t)}}}function Fe(d,t){Ne(()=>{d.dispatchEvent(new CustomEvent(t))})}function nt(d){if(d==="float")return"cssFloat";if(d==="offset")return"cssOffset";if(d.startsWith("--"))return d;const t=d.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(v=>v[0].toUpperCase()+v.slice(1)).join("")}function at(d){const t={},v=d.split(";");for(const _ of v){const[h,b]=_.split(":");if(!h||b===void 0)break;const q=nt(h.trim());t[q]=b.trim()}return t}const ot=d=>d;function it(d,t,v,_){var h=(d&He)!==0,b="out",q,a=t.inert;t.style.overflow;var c,f;function g(){return Ne(()=>q??=v()(t,_?.()??{},{direction:b}))}var l={is_global:h,in(){t.inert=a;{f?.abort(),f?.reset?.();return}},out(o){t.inert=!0,Fe(t,"outrostart"),f=De(t,g(),c,0,()=>{Fe(t,"outroend"),o?.()})},stop:()=>{f?.abort()}},w=Ee;(w.transitions??=[]).push(l)}function De(d,t,v,_,h){if(We(t)){var b,q=!1;return Xe(()=>{if(!q){var i=t({direction:"out"});b=De(d,i,v,_,h)}}),{abort:()=>{q=!0,b?.abort()},deactivate:()=>b.deactivate(),reset:()=>b.reset(),t:()=>b.t()}}if(!t?.duration)return h(),{abort:W,deactivate:W,reset:W,t:()=>_};const{delay:a=0,css:c,tick:f,easing:g=ot}=t;var l=[],w=()=>1-_,o=d.animate(l,{duration:a,fill:"forwards"});return o.onfinish=()=>{o.cancel();var i=1-_,O=_-i,P=t.duration*Math.abs(O),m=[];if(P>0){var S=!1;if(c)for(var u=Math.ceil(P/16.666666666666668),B=0;B<=u;B+=1){var L=i+O*g(B/u),j=at(c(L,1-L));m.push(j),S||=j.overflow==="hidden"}S&&(d.style.overflow="hidden"),w=()=>{var A=o.currentTime;return i+O*g(A/P)},f&&st(()=>{if(o.playState!=="running")return!1;var A=w();return f(A,1-A),!0})}o=d.animate(m,{duration:P,fill:"forwards"}),o.onfinish=()=>{w=()=>_,f?.(_,1-_),h()}},{abort:()=>{o&&(o.cancel(),o.effect=null,o.onfinish=W)},deactivate:()=>{h=W},reset:()=>{f?.(1,0)},t:()=>w()}}var lt=z("<div> </div>"),dt=z('<button type="button"><div><!></div> <div class="text-sm"><div class="font-medium text-gray-900"> </div> <!></div></button>'),ct=z('<aside class="lg:w-54"><div class="space-y-6 rounded-3xl bg-white p-5 shadow-sm ring-1 ring-amber-100 sm:p-6 lg:sticky lg:top-28"><div class="space-y-2"></div></div></aside>');function ut(d,t){ve(t,!0);const v=()=>oe(me,"$t",_),[_,h]=xe(),b=(g,l=W)=>{const w=p(()=>l().isAnswered?l().isCorrect?"border-emerald-400 bg-emerald-400 text-white":"border-rose-400 bg-rose-400 text-white":l().isCurrent?"border-sky-400 bg-sky-400 text-white":"border-gray-200 bg-white text-gray-700");var o=dt();o.__click=()=>q(l().index);var i=n(o),O=n(i);{var P=A=>{var k=ie(),T=te(k);{var E=D=>{ue(D,{class:"h-5 w-5"})},G=D=>{Pe(D,{class:"h-5 w-5"})};M(T,D=>{l().isCorrect?D(E):D(G,!1)})}y(A,k)},m=A=>{var k=Ge();N(()=>I(k,l().index+1)),y(A,k)};M(O,A=>{l().isAnswered?A(P):A(m,!1)})}r(i);var S=C(i,2),u=n(S),B=n(u,!0);r(u);var L=C(u,2);{var j=A=>{var k=lt(),T=n(k,!0);r(k),N(E=>{Y(k,1,Ve(l().isCorrect?"text-xs text-emerald-600":"text-xs text-rose-600")),I(T,E)},[()=>l().isCorrect?v()("Correct"):v()("Incorrect")]),y(A,k)};M(L,A=>{l().isAnswered&&A(j)})}r(S),r(o),N((A,k)=>{Y(o,1,`flex w-full items-center gap-3 rounded-2xl px-3 py-2 text-left transition ${l().isCurrent?"bg-amber-50 ring-1 ring-amber-200":"hover:bg-gray-50"}`),Ke(o,"aria-label",A),Y(i,1,`flex h-10 w-10 shrink-0 items-center justify-center rounded-full border-2 font-semibold transition ${e(w)}`),I(B,k)},[()=>`${v()("Question {index}",{index:String(l().index+1)})}: ${l().text}`,()=>v()("Question {index}",{index:String(l().index+1)})]),y(g,o)};function q(g){t.onSelect?.(g)}var a=ct(),c=n(a),f=n(c);ze(f,21,()=>t.items,g=>g.index,(g,l)=>{b(g,()=>e(l))}),r(f),r(c),r(a),y(d,a),fe(),h()}Oe(["click"]);function vt(d){const t=d-1;return t*t*t+1}function ft(d,{delay:t=0,duration:v=400,easing:_=vt,axis:h="y"}={}){const b=getComputedStyle(d),q=+b.opacity,a=h==="y"?"height":"width",c=parseFloat(b[a]),f=h==="y"?["top","bottom"]:["left","right"],g=f.map(m=>`${m[0].toUpperCase()}${m.slice(1)}`),l=parseFloat(b[`padding${g[0]}`]),w=parseFloat(b[`padding${g[1]}`]),o=parseFloat(b[`margin${g[0]}`]),i=parseFloat(b[`margin${g[1]}`]),O=parseFloat(b[`border${g[0]}Width`]),P=parseFloat(b[`border${g[1]}Width`]);return{delay:t,duration:v,easing:_,css:m=>`overflow: hidden;opacity: ${Math.min(m*20,1)*q};${a}: ${m*c}px;padding-${f[0]}: ${m*l}px;padding-${f[1]}: ${m*w}px;margin-${f[0]}: ${m*o}px;margin-${f[1]}: ${m*i}px;border-${f[0]}-width: ${m*O}px;border-${f[1]}-width: ${m*P}px;min-${a}: 0`}}const xt=(d,t=W)=>{const v=p(()=>t().showResult?t().isCorrectAnswer?"border-emerald-400 bg-emerald-400 text-white":t().isUserAnswer?"border-rose-400 bg-rose-400 text-white":"border-gray-300 bg-gray-100 text-gray-500":t().isSelected?"border-amber-300 bg-amber-500 text-white":"border-gray-300 bg-white text-gray-500");var _=pt(),h=n(_);{var b=a=>{var c=ie(),f=te(c);{var g=w=>{ue(w,{class:"h-4 w-4"})},l=w=>{Pe(w,{class:"h-4 w-4"})};M(f,w=>{t().isCorrectAnswer?w(g):w(l,!1)})}y(a,c)},q=a=>{var c=ie(),f=te(c);{var g=l=>{var w=gt();y(l,w)};M(f,l=>{t().isSelected&&l(g)},!0)}y(a,c)};M(h,a=>{t().showResult&&(t().isCorrectAnswer||t().isUserAnswer)?a(b):a(q,!1)})}r(_),N(()=>Y(_,1,`mt-1 inline-flex h-6 w-6 shrink-0 items-center justify-center rounded-full border font-semibold ${e(v)}`)),y(d,_)};var mt=z('<div><div class="flex items-start gap-4"><span><!></span> <div class="flex-1"><div class="mb-1 text-xs font-semibold tracking-wide text-gray-600 uppercase"> </div> <span class="text-sm text-gray-900 sm:text-base"> </span></div></div></div>'),bt=z('<button type="button"><div class="flex items-start gap-4"><!> <span class="text-sm text-gray-900 sm:text-base"> </span></div></button>'),gt=z('<span class="h-2 w-2 rounded-full bg-white"></span>'),pt=z("<span><!></span>"),_t=z('<div class="mb-8 rounded-2xl border border-sky-200 bg-sky-50 px-4 py-3 sm:px-5 sm:py-4"><div class="flex items-start gap-4"><svg class="mt-1 h-6 w-6 shrink-0 text-sky-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div class="flex-1"><div class="mb-1 text-xs font-semibold tracking-wide text-gray-600 uppercase"> </div> <p class="text-sm text-gray-900 sm:text-base"> </p></div></div></div>'),wt=z('<h2 class="mb-2 text-lg font-semibold text-gray-900 sm:text-xl"> </h2>'),ht=z('<div class="mb-8 space-y-3"></div>'),yt=z('<div><div class="mb-6"><!></div> <!></div>'),kt=z('<button type="button" class="inline-flex items-center gap-2 rounded-full bg-amber-500 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-amber-600 disabled:cursor-not-allowed disabled:opacity-50 sm:px-6"> <!></button>'),At=z('<button type="button" class="inline-flex items-center gap-2 rounded-full bg-sky-500 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-sky-600 sm:px-6"> <!></button>'),Ct=z('<button type="button" class="inline-flex items-center gap-2 rounded-full bg-emerald-500 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-emerald-600 sm:px-6"> <!></button>'),St=z('<!> <div class="mb-6 flex flex-wrap items-center justify-between gap-3 text-sm text-gray-500"><div class="flex items-center gap-2"><span class="inline-flex h-8 w-8 items-center justify-center rounded-full bg-amber-50 font-semibold text-amber-600"> </span> <span> </span></div> <div class="rounded-full bg-gray-100 px-3 py-1"><span class="font-medium text-gray-700"> </span></div></div> <p class="mb-6 text-base text-gray-900 sm:mb-8 sm:text-lg"> </p> <div class="relative"><!></div> <div class="flex flex-wrap items-center justify-between gap-3"><button type="button" class="inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white px-5 py-2.5 text-sm font-medium text-gray-700 transition hover:border-amber-200 hover:text-amber-600 disabled:cursor-not-allowed disabled:opacity-40"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg> </button> <div class="flex flex-wrap items-center gap-3"><!></div></div>',1),qt=z('<section class="flex-1 rounded-3xl bg-white p-5 shadow-sm ring-1 ring-gray-100 sm:p-6 lg:p-8"><!></section>');function Qt(d,t){ve(t,!0);const v=()=>oe(me,"$t",_),[_,h]=xe(),b=(m,S=W,u=W)=>{const B=p(()=>u()?"border-emerald-400 bg-emerald-50":"border-rose-300 bg-rose-50"),L=p(()=>u()?"border-emerald-400 bg-emerald-400 text-white":"border-rose-400 bg-rose-400 text-white");var j=mt(),A=n(j),k=n(A),T=n(k);{var E=X=>{ue(X,{class:"h-4 w-4"})},G=X=>{Pe(X,{class:"h-4 w-4"})};M(T,X=>{u()?X(E):X(G,!1)})}r(k);var D=C(k,2),J=n(D),re=n(J,!0);r(J);var le=C(J,2),ne=n(le,!0);r(le),r(D),r(A),r(j),N(X=>{Y(j,1,`w-full rounded-2xl border-[1.5px] px-4 py-3 sm:px-5 sm:py-4 ${e(B)}`),Y(k,1,`mt-1 inline-flex h-6 w-6 shrink-0 items-center justify-center rounded-full border font-semibold ${e(L)}`),I(re,X),I(ne,S())},[()=>v()("Correct answer")]),y(m,j)},q=(m,S=W,u=W)=>{const B=p(()=>t.selectedAnswer===u()),L=p(()=>t.question?.correctAnswer===u()),j=p(()=>t.confirmedAnswer?.selectedOption===u()),A=p(()=>e(c)?e(L)?"border-emerald-400 bg-emerald-50":e(j)?"border-rose-300 bg-rose-50":"border-gray-200 bg-gray-50":e(B)?"border-amber-300 bg-amber-50 ring-1 ring-amber-200":"border-gray-200 bg-white hover:border-amber-200 hover:bg-amber-50/50");var k=bt();k.__click=()=>f(u());var T=n(k),E=n(T);xt(E,()=>({showResult:e(c),isCorrectAnswer:e(L),isUserAnswer:e(j),isSelected:e(B)}));var G=C(E,2),D=n(G,!0);r(G),r(T),r(k),N(()=>{k.disabled=e(c),Y(k,1,`w-full rounded-2xl border-[1.5px] px-4 py-3 text-left transition focus-visible:outline focus-visible:outline-offset-2 focus-visible:outline-amber-400 disabled:cursor-not-allowed sm:px-5 sm:py-4 ${e(A)}`),I(D,S())}),y(m,k)},a=(m,S=W)=>{var u=_t(),B=n(u),L=C(n(B),2),j=n(L),A=n(j,!0);r(j);var k=C(j,2),T=n(k,!0);r(k),r(L),r(B),r(u),N(E=>{I(A,E),I(T,S())},[()=>v()("Learn together")]),y(m,u)},c=p(()=>!!t.confirmedAnswer);function f(m){e(c)||t.onSelectAnswer?.(m)}function g(){e(c)||t.onConfirmAnswer?.()}function l(){e(c)&&t.onNextQuestion?.()}function w(){e(c)&&t.onSubmit?.()}function o(){t.onPreviousQuestion?.()}var i=qt(),O=n(i);{var P=m=>{var S=St(),u=te(S);{var B=F=>{var Q=wt(),U=n(Q,!0);r(Q),N(()=>I(U,t.question.title)),y(F,Q)};M(u,F=>{t.question.title&&F(B)})}var L=C(u,2),j=n(L),A=n(j),k=n(A,!0);r(A);var T=C(A,2),E=n(T,!0);r(T),r(j);var G=C(j,2),D=n(G),J=n(D,!0);r(D),r(G),r(L);var re=C(L,2),le=n(re,!0);r(re);var ne=C(re,2),X=n(ne);{var ke=F=>{var Q=ht();ze(Q,21,()=>t.question.options,Me,(U,Z,$)=>{q(U,()=>e(Z),()=>$)}),r(Q),it(2,Q,()=>ft,()=>({duration:500})),y(F,Q)},Ae=F=>{var Q=yt(),U=n(Q),Z=n(U);b(Z,()=>t.question.options[t.question.correctAnswer],()=>t.confirmedAnswer?.isCorrect??!1),r(U);var $=C(U,2);{var s=x=>{a(x,()=>t.question.explanation)};M($,x=>{t.question.explanation&&x(s)})}r(Q),y(F,Q)};M(X,F=>{e(c)?F(Ae,!1):F(ke)})}r(ne);var be=C(ne,2),ae=n(be);ae.__click=o;var Ce=C(n(ae));r(ae);var de=C(ae,2),Se=n(de);{var ge=F=>{var Q=kt();Q.__click=g;var U=n(Q),Z=C(U);ue(Z,{class:"h-4 w-4"}),r(Q),N($=>{Q.disabled=t.selectedAnswer===null,I(U,`${$??""} `)},[()=>v()("Confirm answer")]),y(F,Q)},qe=F=>{var Q=ie(),U=te(Q);{var Z=s=>{var x=At();x.__click=l;var R=n(x),H=C(R);tt(H,{class:"h-4 w-4"}),r(x),N(V=>I(R,`${V??""} `),[()=>v()("Next question")]),y(s,x)},$=s=>{var x=ie(),R=te(x);{var H=V=>{var se=Ct();se.__click=w;var pe=n(se),_e=C(pe);ue(_e,{class:"h-4 w-4"}),r(se),N(Qe=>I(pe,`${Qe??""} `),[()=>v()("Submit quiz")]),y(V,se)};M(R,V=>{t.allQuestionsAnswered&&V(H)},!0)}y(s,x)};M(U,s=>{t.isLastQuestion?s($,!1):s(Z)},!0)}y(F,Q)};M(Se,F=>{e(c)?F(qe,!1):F(ge)})}r(de),r(be),N((F,Q,U)=>{I(k,t.questionIndex+1),I(E,F),I(J,Q),I(le,t.question.text),ae.disabled=t.questionIndex===0,I(Ce,` ${U??""}`)},[()=>v()("Question {index} of {total}",{index:String(t.questionIndex+1),total:String(t.totalQuestions)}),()=>v()("Select the best answer"),()=>v()("Previous")]),y(m,S)};M(O,m=>{t.question&&m(P)})}r(i),y(d,i),fe(),h()}Oe(["click"]);const Le=(d,t=W)=>{const v=p(()=>t().tone==="amber"?{background:"bg-amber-50",ring:"ring-amber-100",label:"text-amber-600"}:{background:"bg-sky-50",ring:"ring-sky-100",label:"text-sky-600"});var _=It(),h=n(_),b=n(h,!0);r(h);var q=C(h,2),a=n(q,!0);r(q);var c=C(q,2),f=n(c,!0);r(c),r(_),N(()=>{Y(_,1,`rounded-2xl px-5 py-4 text-center shadow-sm ring-1 ${e(v).background} ${e(v).ring}`),Y(h,1,`text-xs font-medium tracking-wide uppercase ${e(v).label}`),I(b,t().label),I(a,t().primary),I(f,t().helper)}),y(d,_)};var It=z('<div><div> </div> <div class="text-2xl font-semibold text-gray-900 sm:text-3xl"> </div> <div class="text-sm text-gray-500"> </div></div>'),Ot=z('<div class="rounded-3xl bg-white p-6 shadow-sm ring-1 ring-amber-100 sm:p-8"><div class="flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between"><div class="max-w-2xl space-y-3"><h1 class="text-2xl font-semibold text-gray-900 sm:text-3xl lg:text-4xl"> </h1> <p class="text-base text-gray-600"> </p></div> <div class="flex flex-wrap items-center gap-4"><!> <!></div></div></div>');function zt(d,t){ve(t,!0);const v=()=>oe(me,"$t",_),[_,h]=xe(),b=p(()=>Math.round(t.scorePercentage));var q=Ot(),a=n(q),c=n(a),f=n(c),g=n(f,!0);r(f);var l=C(f,2),w=n(l,!0);r(l),r(c);var o=C(c,2),i=n(o);{let P=p(()=>({label:v()("Question"),primary:`${t.currentQuestion}`,helper:v()("of {total}",{total:String(t.totalQuestions)}),tone:"amber"}));Le(i,()=>e(P))}var O=C(i,2);{let P=p(()=>({label:v()("Current score"),primary:`${t.score}`,helper:v()("{percent}%",{percent:String(e(b))}),tone:"sky"}));Le(O,()=>e(P))}r(o),r(a),r(q),N(()=>{I(g,t.title),I(w,t.message)}),y(d,q),fe(),h()}var Pt=z("<span> </span>"),Bt=z('<button type="button" class="transition hover:text-amber-600"> </button>'),jt=z("<span>/</span>"),Rt=z("<!> <!>",1),Ft=z('<div class="flex flex-wrap items-center justify-between gap-4"><div class="flex flex-wrap items-center gap-2 text-sm text-gray-500"></div> <button type="button" class="inline-flex items-center gap-2 rounded-full border border-amber-200 bg-white px-4 py-2 text-sm font-semibold text-amber-700 shadow-sm transition hover:border-amber-300 hover:text-amber-800"><svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9l-2 3m0 0l2 3m-2-3h8m4 0a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> </button></div>');function Lt(d,t){ve(t,!0);const v=()=>oe(me,"$t",_),[_,h]=xe(),b=(w,o=W)=>{var i=ie(),O=te(i);{var P=S=>{var u=Pt(),B=n(u,!0);r(u),N(()=>{Y(u,1,`font-medium ${o().isActive?"text-gray-900":"hover:text-amber-600"}`),I(B,o().label)}),y(S,u)},m=S=>{var u=Bt();u.__click=()=>a(o());var B=n(u,!0);r(u),N(()=>I(B,o().label)),y(S,u)};M(O,S=>{o().isActive||!o().onSelect?S(P):S(m,!1)})}y(w,i)};function q(){t.onQuit?.()}function a(w){w.isActive||w.onSelect?.()}var c=Ft(),f=n(c);ze(f,21,()=>t.crumbs,Me,(w,o,i)=>{var O=Rt(),P=te(O);b(P,()=>e(o));var m=C(P,2);{var S=u=>{var B=jt();y(u,B)};M(m,u=>{i<t.crumbs.length-1&&u(S)})}y(w,O)}),r(f);var g=C(f,2);g.__click=q;var l=C(n(g));r(g),r(c),N(w=>I(l,` ${w??""}`),[()=>v()("Quit Quiz")]),y(d,c),fe(),h()}Oe(["click"]);var Nt=z('<div class="mx-auto max-w-7xl space-y-6"><!> <!> <div class="flex flex-col gap-6 lg:flex-row"><div class="hidden shrink-0 lg:block"><!></div> <div class="min-w-0 flex-1"><!></div></div></div>');function Vt(d,t){ve(t,!0);const v=()=>oe(Ze,"$activeLocale",b),_=()=>oe(Ye,"$sessionStore",b),h=()=>oe(me,"$t",b),[b,q]=xe(),a=p(()=>Je.params.id??""),c=p(()=>$e(e(a))),f=p(()=>F(e(c),v())),g=p(()=>e(f)?.questions??[]),l=p(()=>e(g).length);let w=p(_),o=we(Be([])),i=we(0),O=we(null),P=we(Be(new Date().toISOString())),m=!1;const S=p(()=>e(g)[e(i)]),u=p(()=>e(o).filter(s=>s.isConfirmed&&typeof s.isCorrect=="boolean").map(s=>({questionIndex:s.questionIndex,selectedOption:s.selectedOption,isCorrect:!!s.isCorrect}))),B=p(()=>e(o).find(s=>s.questionIndex===e(i))??null),L=p(()=>e(u).find(s=>s.questionIndex===e(i))??null),j=p(()=>!!e(B)?.isConfirmed),A=p(()=>e(i)===e(l)-1),k=p(()=>e(u).length),T=p(()=>e(k)===e(l)),E=p(()=>e(u).filter(s=>s.isCorrect).length),G=p(()=>e(l)>0?e(E)/e(l)*100:0),D=p(()=>e(g).map((s,x)=>{const R=e(u).find(H=>H.questionIndex===x)??null;return{index:x,text:s.text,isCurrent:x===e(i),isAnswered:!!R,isCorrect:R?.isCorrect??null}}));je(()=>{const s=e(o).find(x=>x.questionIndex===e(i));K(O,s?.selectedOption??e(L)?.selectedOption??null,!0)}),je(()=>{if(!e(a)||!e(c)||m)return;const s=e(w).inProgress[e(a)];if(s){K(i,s.currentQuestionIndex,!0);const R=s.responses??[];K(o,R.map(H=>({...H})),!0),K(P,s.startedAt??new Date().toISOString(),!0),K(O,R.find(H=>H.questionIndex===e(i))?.selectedOption??null,!0),m=!0;return}const x=new Date().toISOString();K(P,x,!0),K(i,0),K(o,[],!0),ce.setInProgress(e(a),{quizId:e(a),currentQuestionIndex:0,responses:[],startedAt:x,updatedAt:x}),m=!0});function J(s){if(!e(a))return;const x=new Date().toISOString();ce.updateInProgress(e(a),{currentQuestionIndex:e(i),responses:e(o).map(R=>({...R})),updatedAt:x,...s})}function re(s){const x=e(o).slice(),R=x.findIndex(V=>V.questionIndex===s.questionIndex),H={questionIndex:s.questionIndex,selectedOption:s.selectedOption??-1,isConfirmed:s.isConfirmed??!1,isCorrect:s.isCorrect??null};x[R>=0?R:x.length]={...R>=0?x[R]:H,...s},K(o,x,!0)}function le(s){e(j)||(K(O,s,!0),re({questionIndex:e(i),selectedOption:s,isConfirmed:!1,isCorrect:null}),J())}function ne(){if(e(O)===null||!e(S)||!e(a))return;const s=e(O)===e(S).correctAnswer;re({questionIndex:e(i),selectedOption:e(O),isConfirmed:!0,isCorrect:s}),J()}function X(){e(a)&&e(i)<e(l)-1&&(Re(i),J())}function ke(){e(a)&&e(i)>0&&(Re(i,-1),J())}function Ae(s){e(a)&&(K(i,s,!0),J())}function be(){if(!e(c)||!e(a))return;const s=new Date().toISOString(),x=ce.appendAttempt(e(c),e(u).map(R=>({...R})),e(P),s);ce.clearInProgress(e(a)),he(ye("/quiz/[id]/result/[attemptId]",{id:e(a),attemptId:x.attemptId}))}function ae(){e(T)&&be()}function Ce(){e(a)&&confirm(h()("Are you sure you want to quit? Your progress will be lost."))&&(ce.clearInProgress(e(a)),he(ye("/quiz/[id]",{id:e(a)})))}function de(){he(ye("/"))}function Se(){e(a)&&he(ye("/quiz/[id]",{id:e(a)}))}const ge=p(()=>e(f)?.title??h()("Unknown Quiz")),qe=p(()=>[{label:h()("Dashboard"),onSelect:de},{label:e(ge),onSelect:Se},{label:h()("Take Quiz"),isActive:!0}]);function F(s,x){if(s)return s.templates[x]??s.templates.en??Object.values(s.templates)[0]}var Q=ie(),U=te(Q);{var Z=s=>{et(s,{onBack:de})},$=s=>{var x=Nt(),R=n(x);Lt(R,{get crumbs(){return e(qe)},onQuit:Ce});var H=C(R,2);{let Ie=p(()=>h()("Stay focused, trust your instincts, and remember every question is a chance to learn.")),Ue=p(()=>e(i)+1);zt(H,{get title(){return e(ge)},get message(){return e(Ie)},get currentQuestion(){return e(Ue)},get totalQuestions(){return e(l)},get score(){return e(E)},get scorePercentage(){return e(G)}})}var V=C(H,2),se=n(V),pe=n(se);ut(pe,{get items(){return e(D)},onSelect:Ae}),r(se);var _e=C(se,2),Qe=n(_e);{let Ie=p(()=>e(S)??null);Qt(Qe,{get question(){return e(Ie)},get questionIndex(){return e(i)},get totalQuestions(){return e(l)},get selectedAnswer(){return e(O)},get confirmedAnswer(){return e(L)},get isLastQuestion(){return e(A)},get allQuestionsAnswered(){return e(T)},onSelectAnswer:le,onConfirmAnswer:ne,onNextQuestion:X,onPreviousQuestion:ke,onSubmit:ae})}r(_e),r(V),r(x),y(s,x)};M(U,s=>{!e(c)||!e(f)?s(Z):s($,!1)})}y(d,Q),fe(),q()}export{Vt as component};
