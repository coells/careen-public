import"../chunks/DsnmJJEf.js";import{p as R,h as T,i as F,j as I,k as U,f as w,d as b,s as C,r as g,t as N,e as B,b as S,c as j,n as te,m as e,C as re,D as ae,a as se,u as n}from"../chunks/D3P1Fts5.js";import{i as E}from"../chunks/hyaw4NeY.js";import{g as _}from"../chunks/Br-8wFLS.js";import{r as q}from"../chunks/F-qQvoaB.js";import{p as ne}from"../chunks/D1Dg9SEx.js";import{e as oe,i as ie,g as ue}from"../chunks/DuTmBecZ.js";import{D as H,l as Y,t as Z,c as ce,d as le,p as me,a as Q,g as de}from"../chunks/CUr7oSGh.js";import{N as fe,B as ge,O as pe}from"../chunks/QjeduJ8O.js";var ve=w('<span class="rounded-full bg-amber-50 px-3 py-1 text-xs font-semibold tracking-wide text-amber-600 uppercase ring-1 ring-amber-100"> </span>'),be=w('<div class="mb-6 flex flex-wrap items-center gap-2"></div>'),Se=w('<div class="rounded-3xl bg-white p-6 shadow-sm ring-1 ring-amber-100 sm:p-8"><!> <h1 class="mb-3 text-3xl font-semibold text-gray-900 sm:text-4xl"> </h1> <p class="text-base text-gray-600 sm:text-lg"> </p></div>');function he(z,m){R(m,!0);const r=(a,o=te)=>{var d=ve(),v=b(d,!0);g(d),N(A=>B(v,A),[()=>c(o())]),S(a,d)};let u=T(F(H));const L=Y.subscribe(a=>{I(u,a,!0)});function c(a,o){return Z(a,{...o,locale:e(u)})}U(()=>{L()});var i=Se(),l=b(i);{var h=a=>{var o=be();oe(o,21,()=>m.categories,ie,(d,v)=>{r(d,()=>e(v))}),g(o),S(a,o)};E(l,a=>{m.categories.length>0&&a(h)})}var p=C(l,2),x=b(p,!0);g(p);var f=C(p,2),k=b(f,!0);g(f),g(i),N(()=>{B(x,m.title),B(k,m.description)}),S(z,i),j()}var xe=w('<div class="mx-auto max-w-4xl space-y-8"><!> <!> <!></div>');function De(z,m){R(m,!0);const r=n(()=>ne.params.id??"");let u=T(F(H));const L=Y.subscribe(t=>{I(u,t,!0)});function c(t,s){return Z(t,{...s,locale:e(u)})}const i=n(()=>ue(e(r))),l=n(()=>{const t=e(u),s=e(i);if(s)return J(s,t)}),h=n(()=>e(l)?.questions.length??0),p=n(()=>e(i)?Math.ceil(e(h)*.8):0),x=n(()=>e(i)?e(i).passingScore*100:0);let f=T(F(ce(le)));re(()=>me.subscribe(s=>{I(f,s,!0)}));const k={bestScore:null,lastScore:null,attemptsCount:0,passedCount:0},a=n(()=>e(r)?e(f).inProgress[e(r)]??null:null),o=n(()=>e(r)?de(e(f),e(r)):k),d=n(()=>({attemptsCount:e(o).attemptsCount,bestScore:e(o).bestScore,lastScore:e(o).lastScore})),v=n(()=>(e(u),[c("Read each question carefully before selecting your answer."),c("You can navigate between questions at any time—your answers will stay saved."),c("Submit your quiz once every question feels complete."),c("You need at least {percent}% to pass—aim high and have fun!",{values:{percent:String(Math.round(e(x)))}})])),A=n(()=>{const t=e(u);if(!e(a))return null;const s=e(a).responses.filter(P=>P.isConfirmed).length,y=new Intl.DateTimeFormat(t==="cs"?"cs-CZ":"en-US",{dateStyle:"short",timeStyle:"short"}).format(new Date(e(a).updatedAt));return{confirmedAnswers:s,lastUpdatedLabel:y}}),G=n(()=>(e(u),e(a)?c("Start fresh"):c("Start quiz")));function J(t,s){if(t)return t.content[s]??t.content.en??Object.values(t.content)[0]??void 0}function K(){e(r)&&(e(a)&&Q(e(r)),_(q("/quiz/[id]/take",{id:e(r)})))}function V(){e(r)&&_(q("/quiz/[id]/take",{id:e(r)}))}function W(){e(r)&&(Q(e(r)),_(q("/quiz/[id]/take",{id:e(r)})))}function D(){_(q("/"))}U(()=>{L()});var M=ae(),X=se(M);{var $=t=>{fe(t,{onBack:D})},ee=t=>{var s=xe(),O=b(s);ge(O,{get title(){return e(l).title},onBack:D});var y=C(O,2);he(y,{get title(){return e(l).title},get description(){return e(l).description},get categories(){return e(i).categories}});var P=C(y,2);pe(P,{get questionsCount(){return e(h)},get estimatedTimeMinutes(){return e(p)},get passingScorePercent(){return e(x)},get instructions(){return e(v)},get resume(){return e(A)},get summary(){return e(d)},get primaryActionLabel(){return e(G)},onStart:K,onResume:V,onStartOver:W,onCancel:D}),g(s),S(t,s)};E(X,t=>{!e(i)||!e(l)?t($):t(ee,!1)})}S(z,M),j()}export{De as component};
