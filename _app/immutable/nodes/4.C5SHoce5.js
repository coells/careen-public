import"../chunks/DsnmJJEf.js";import{v as ce,V as pe,p as J,h as O,i as E,j as U,k as X,f as P,d as a,s as o,r as t,t as V,e as i,b as Q,c as Z,m as e,u as n,g as xe,n as de,C as _e,D as le,a as ue}from"../chunks/D3P1Fts5.js";import{i as ne}from"../chunks/hyaw4NeY.js";import{g as ve}from"../chunks/Br-8wFLS.js";import{r as me}from"../chunks/F-qQvoaB.js";import{p as be}from"../chunks/D1Dg9SEx.js";import{m as ye,D as $,l as ee,t as te,s as H,c as we,d as ke,p as ze,n as qe,o as Le}from"../chunks/CUr7oSGh.js";import{e as Se,i as Qe,g as Te}from"../chunks/DuTmBecZ.js";import{N as Ae}from"../chunks/QjeduJ8O.js";function Ce(_,r,y,k){var l=_.__style;if(ce||l!==r){var u=ye(r);(!ce||u!==_.getAttribute("style"))&&(u==null?_.removeAttribute("style"):_.style.cssText=u),_.__style=r}return k}var Me=P('<h2 class="mb-2 text-2xl font-semibold text-amber-800"> </h2>'),Ne=P('<div class="flex flex-col gap-3 sm:flex-row sm:justify-center"><button type="button" class="rounded-full bg-amber-500 px-6 py-3 text-sm font-semibold text-white transition hover:bg-amber-600"> </button> <button type="button" class="rounded-full border border-gray-200 bg-white px-6 py-3 text-sm font-semibold text-gray-700 transition hover:border-amber-200 hover:text-amber-600"> </button></div>'),De=P('<div class="mx-auto max-w-4xl"><div class="rounded-xl border border-amber-200 bg-amber-50 p-8 text-center"><!> <p class="mb-6 text-amber-700"> </p> <!></div></div>');function Pe(_,r){J(r,!0);const y=d=>{var v=Me(),x=a(v,!0);t(v),V(w=>i(x,w),[()=>f("Attempt Not Found")]),Q(d,v)},k=d=>{var v=Ne(),x=a(v);x.__click=z;var w=a(x,!0);t(x);var C=o(x,2);C.__click=m;var L=a(C,!0);t(C),t(v),V((B,N)=>{i(w,B),i(L,N)},[()=>f("View quiz details"),()=>f("Back to Dashboard")]),Q(d,v)};let l=O(E($));const u=ee.subscribe(d=>{U(l,d,!0)});function f(d,v){return te(d,{...v,locale:e(l)})}function m(){r.onNavigateHome?.()}function z(){r.onViewQuiz?.()}X(()=>{u()});var g=De(),c=a(g),s=a(c);y(s);var b=o(s,2),q=a(b,!0);t(b);var h=o(b,2);k(h),t(c),t(g),V(d=>i(q,d),[()=>f("We couldn't find that quiz attempt. It may have been removed after clearing your progress.")]),Q(_,g),Z()}pe(["click"]);var Be=P('<div class="flex items-center gap-2 text-sm text-gray-500"><button type="button" class="transition hover:text-amber-600"> </button> <span>/</span> <button type="button" class="transition hover:text-amber-600"> </button> <span>/</span> <span class="font-medium text-gray-900"> </span></div>');function Ie(_,r){J(r,!0);let y=O(E($));const k=ee.subscribe(h=>{U(y,h,!0)});function l(h,d){return te(h,{...d,locale:e(y)})}function u(){r.onNavigateHome?.()}function f(){r.onViewQuiz?.()}X(()=>{k()});var m=Be(),z=a(m);z.__click=u;var g=a(z,!0);t(z);var c=o(z,4);c.__click=f;var s=a(c,!0);t(c);var b=o(c,4),q=a(b,!0);t(b),t(m),V((h,d)=>{i(g,h),i(s,r.quizTitle),i(q,d)},[()=>l("Dashboard"),()=>l("Results")]),Q(_,m),Z()}pe(["click"]);var Ve=xe('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>'),je=xe('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>'),Fe=P('<div class="mb-3 flex justify-center"><div><svg class="h-10 w-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><!></svg></div></div>'),He=P("<div><!> <h2> </h2> <p> </p></div>");function Re(_,r){J(r,!0);const y=v=>{var x=Fe(),w=a(x),C=a(w),L=a(C);{var B=S=>{var T=Ve();Q(S,T)},N=S=>{var T=je();Q(S,T)};ne(L,S=>{r.passed?S(B):S(N,!1)})}t(C),t(w),t(x),V(()=>H(w,1,`rounded-full p-3 shadow-sm ${e(m)}`)),Q(v,x)};let k=O(E($));const l=ee.subscribe(v=>{U(k,v,!0)});function u(v,x){return te(v,{...x,locale:e(k)})}const f=n(()=>r.passed?"bg-emerald-50 ring-emerald-100":"bg-amber-50 ring-amber-100"),m=n(()=>r.passed?"bg-emerald-400 text-white":"bg-amber-400 text-white"),z=n(()=>r.passed?u("Nice work!"):u("Keep going!")),g=n(()=>r.passed?u("You passed the quiz. Celebrate the progress you made today."):u("This attempt didn't pass, but every try sharpens your understanding."));X(()=>{l()});var c=He(),s=a(c);y(s);var b=o(s,2),q=a(b,!0);t(b);var h=o(b,2),d=a(h,!0);t(h),t(c),V(()=>{H(c,1,`rounded-3xl p-7 text-center shadow-sm ring-1 ${e(f)}`),H(b,1,`mb-2 text-3xl font-semibold ${r.passed?"text-emerald-700":"text-amber-700"}`),i(q,e(z)),H(h,1,`text-sm ${r.passed?"text-emerald-700/80":"text-amber-700/80"}`),i(d,e(g))}),Q(_,c),Z()}var Ye=P('<div class="rounded-3xl border border-amber-100/40 bg-white/90 p-6 shadow-sm sm:p-8"><div class="space-y-6"><div><h2 class="text-xs font-semibold tracking-[0.25em] text-amber-600 uppercase"> </h2> <h3 class="mt-2 text-xl font-semibold text-gray-900 sm:text-2xl"> </h3> <p class="mt-2 text-sm text-gray-600"> </p></div> <div><p class="text-sm text-gray-700"> <span class="font-semibold text-gray-900"> </span> </p> <div class="mt-3 h-3 overflow-hidden rounded-full bg-gray-200"><div></div></div> <div class="mt-2 flex flex-wrap items-center justify-between gap-2 text-xs font-medium text-gray-500"><span> </span> <span class="text-right"> </span></div></div> <div><h4 class="mb-2 text-base font-semibold"> </h4> <p> </p></div></div></div>');function Oe(_,r){J(r,!0);let y=O(E($));const k=ee.subscribe(F=>{U(y,F,!0)});function l(F,se){return te(F,{...se,locale:e(y)})}const u=n(()=>Math.min(100,Math.max(0,r.scorePercentage))),f=n(()=>Math.min(100,Math.max(0,r.passingScorePercentage))),m=n(()=>Math.round(e(u))),z=n(()=>Math.round(e(f))),g=n(()=>r.passed?"bg-emerald-400":"bg-amber-400"),c=n(()=>{if(r.passed)return l("Goal reached");const F=Math.max(0,e(z)-e(m));return F>0?l("{gap}% more to reach goal",{values:{gap:String(F)}}):l("Right on the edge—almost there")}),s=[{min:100,title:"Flawless finish",body:"Every answer landed. Take a bow and share the win while it's fresh."},{min:90,title:"Mastery unlocked",body:"You're cruising at the top tier. A quick recap keeps that mastery sharp."},{min:80,title:"Strong command",body:"Most questions clicked. Sweep through the tricky notes and you'll be unstoppable."},{min:70,title:"Solid progress",body:"You're above the pass lane. Tighten a few edges and aim even higher next round."},{min:60,title:"On the rise",body:"Momentum is building. Revisit explanations, then swing back for the breakthrough."},{min:50,title:"Halfway there",body:"You've built a solid base. Reinforce the weak spots and you'll level up fast."},{min:0,title:"Warm-up phase",body:"Use the review to map the gaps, then retake while the material is fresh in mind."}],b=n(()=>s.find(se=>e(m)>=se.min)??s.at(-1)),q=n(()=>l(e(b).title)),h=n(()=>l(e(b).body));X(()=>{k()});var d=Ye(),v=a(d),x=a(v),w=a(x),C=a(w,!0);t(w);var L=o(w,2),B=a(L,!0);t(L);var N=o(L,2),S=a(N,!0);t(N),t(x);var T=o(x,2),R=a(T),W=a(R),p=o(W),M=a(p);t(p);var ae=o(p);t(R);var Y=o(R,2),G=a(Y);t(Y);var D=o(Y,2),A=a(D),I=a(A,!0);t(A);var j=o(A,2),K=a(j,!0);t(j),t(D),t(T);var re=o(T,2),oe=a(re),ge=a(oe,!0);t(oe);var ie=o(oe,2),he=a(ie,!0);t(ie),t(re),t(v),t(d),V((F,se,fe)=>{i(C,F),i(B,r.quizTitle),i(S,r.quizDescription),i(W,`${se??""} `),i(M,`${r.correctAnswers??""}/${r.totalQuestions??""}`),i(ae,` (${e(m)??""}%).`),H(G,1,`h-full rounded-full transition-all ${e(g)}`),Ce(G,`width: ${e(u)}%`),i(I,fe),i(K,e(c)),H(re,1,`rounded-2xl p-5 text-sm ${r.passed?"bg-emerald-50/80 text-emerald-700":"bg-amber-50/80 text-amber-700"}`),i(ge,e(q)),i(he,e(h))},[()=>l("Performance summary"),()=>l("Your score is"),()=>l("Passing score · {percent}%",{values:{percent:String(e(z))}})]),Q(_,d),Z()}var Ee=P('<p class="rounded-xl bg-white/70 p-3 text-sm text-gray-600"> </p>'),Ue=P('<div><div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"><div><p class="text-sm font-semibold text-gray-900"> </p> <p class="text-base text-gray-700"> </p></div> <div> </div></div> <div class="mt-3 space-y-2 text-sm text-gray-700"><p><span class="font-semibold"> </span> </p> <p><span class="font-semibold"> </span> </p> <!></div></div>'),We=P('<div class="rounded-3xl bg-white p-8 shadow-sm ring-1 ring-gray-100"><h2 class="mb-4 text-2xl font-semibold text-gray-900"> </h2> <div class="space-y-4"></div></div>');function Ge(_,r){J(r,!0);const y=(c,s=de,b=de)=>{var q=Ue(),h=a(q),d=a(h),v=a(d),x=a(v,!0);t(v);var w=o(v,2),C=a(w,!0);t(w),t(d);var L=o(d,2),B=a(L,!0);t(L),t(h);var N=o(h,2),S=a(N),T=a(S),R=a(T,!0);t(T);var W=o(T);t(S);var p=o(S,2),M=a(p),ae=a(M,!0);t(M);var Y=o(M);t(p);var G=o(p,2);{var D=A=>{var I=Ee(),j=a(I,!0);t(I),V(()=>i(j,s().question.explanation)),Q(A,I)};ne(G,A=>{s().question.explanation&&A(D)})}t(N),t(q),V((A,I,j,K)=>{H(q,1,`rounded-2xl border px-5 py-4 transition ${s().isCorrect?"border-emerald-200 bg-emerald-50":"border-rose-200 bg-rose-50"}`),i(x,A),i(C,s().question.text),H(L,1,`text-sm font-semibold ${s().isCorrect?"text-emerald-600":"text-rose-600"}`),i(B,I),i(R,j),i(W,` ${(s().userAnswerIndex===null?"—":s().question.options[s().userAnswerIndex]??"—")??""}`),i(ae,K),i(Y,` ${s().question.options[s().question.correctAnswer]??""}`)},[()=>u("Question {index}",{values:{index:String(b()+1)}}),()=>s().isCorrect?u("Correct"):u("Incorrect"),()=>u("Your answer:"),()=>u("Correct answer:")]),Q(c,q)};let k=O(E($));const l=ee.subscribe(c=>{U(k,c,!0)});function u(c,s){return te(c,{...s,locale:e(k)})}X(()=>{l()});var f=We(),m=a(f),z=a(m,!0);t(m);var g=o(m,2);Se(g,21,()=>r.items,Qe,(c,s,b)=>{y(c,()=>e(s),()=>b)}),t(g),t(f),V(c=>i(z,c),[()=>u("Question review")]),Q(_,f),Z()}var Ke=P('<div class="mx-auto max-w-4xl space-y-8"><!> <!> <!> <!></div>');function nt(_,r){J(r,!0);const y=n(()=>be.params.id??""),k=n(()=>be.params.attemptId??"");let l=O(E($));const u=ee.subscribe(p=>{U(l,p,!0)}),f=n(()=>Te(e(y))),m=n(()=>N(e(f),e(l)));let z=O(E(we(ke)));_e(()=>ze.subscribe(M=>{U(z,M,!0)}));const g=n(()=>e(y)&&e(k)?qe(e(z),e(y),e(k)):null),c=n(()=>e(f)?.passingScore??.8),s=n(()=>e(c)*100),b=n(()=>e(m)?.questions.length??e(g)?.responses.length??0),q=n(()=>e(g)?.score??0),h=n(()=>e(b)>0?e(q)/e(b)*100:0),d=n(()=>!!e(g)?.passed),v=n(()=>!e(m)||!e(g)?null:Le(e(m).questions,e(g).responses)),x=n(()=>e(v)?.items??[]),w=n(()=>e(m)?.title??te("Unknown Quiz",{locale:e(l)})),C=n(()=>e(m)?.description??"");function L(){ve(me("/"))}function B(){ve(me("/quiz/[id]",{id:e(y)}))}X(()=>{u()});function N(p,M){if(p)return p.content[M]??p.content.en??Object.values(p.content)[0]}var S=le(),T=ue(S);{var R=p=>{Ae(p,{onBack:L})},W=p=>{var M=le(),ae=ue(M);{var Y=D=>{Pe(D,{onNavigateHome:L,onViewQuiz:B})},G=D=>{var A=Ke(),I=a(A);Ie(I,{get quizTitle(){return e(w)},onNavigateHome:L,onViewQuiz:B});var j=o(I,2);Re(j,{get passed(){return e(d)}});var K=o(j,2);Oe(K,{get quizTitle(){return e(w)},get quizDescription(){return e(C)},get scorePercentage(){return e(h)},get correctAnswers(){return e(q)},get totalQuestions(){return e(b)},get passingScorePercentage(){return e(s)},get passed(){return e(d)}});var re=o(K,2);Ge(re,{get items(){return e(x)}}),t(A),Q(D,A)};ne(ae,D=>{e(g)?D(G,!1):D(Y)},!0)}Q(p,M)};ne(T,p=>{!e(f)||!e(m)?p(R):p(W,!1)})}Q(_,S),Z()}export{nt as component};
