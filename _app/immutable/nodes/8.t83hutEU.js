import"../chunks/DsnmJJEf.js";import{v as nt,b as w,a5 as it,p as U,f as q,d as s,r as e,s as i,T as N,t as P,e as g,c as E,F as d,V as A}from"../chunks/DYM3if8Z.js";import{a as B,s as X,i as tt}from"../chunks/C7t0kvEG.js";import{g as J}from"../chunks/Dj72RIEW.js";import{r as K}from"../chunks/DRm2eNDt.js";import{t as Y,d as O,c as _t,i as bt,s as $t,a as yt,b as wt}from"../chunks/CwuGiosH.js";import{_ as lt,e as st,i as rt,C as kt,g as zt}from"../chunks/C7JOgiKc.js";import{s as ct,r as dt}from"../chunks/DOda0EG6.js";import{C as Ct,X as It}from"../chunks/DIAhi9H0.js";import{D as vt}from"../chunks/Bgg7mOAj.js";import{H as St,a as ot}from"../chunks/CfONtwwO.js";import{c as qt}from"../chunks/CmOsYUxD.js";import{C as Mt}from"../chunks/B4tgDAPp.js";var At=nt('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 0 1 2 2v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-6a2 2 0 0 1 2-2m14 0V9a2 2 0 0 0-2-2M5 11V9a2 2 0 0 1 2-2m0 0V5a2 2 0 0 1 2-2h6a2 2 0 0 1 2 2v2M7 7h10"></path>');function Tt(y,l){const r=dt(l,["$$slots","$$events","$$legacy"]);lt(y,ct(()=>r,{children:(f,k)=>{var v=At();w(f,v)},$$slots:{default:!0}}))}var Qt=nt('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2zm0 0V9a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v10m-6 0a2 2 0 0 0 2 2h2a2 2 0 0 0 2-2m0 0V5a2 2 0 0 1 2-2h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-2a2 2 0 0 1-2-2z"></path>');function Dt(y,l){const r=dt(l,["$$slots","$$events","$$legacy"]);lt(y,ct(()=>r,{children:(f,k)=>{var v=Qt();w(f,v)},$$slots:{default:!0}}))}var Lt=q('<span class="rounded bg-gray-100 px-2 py-0.5 text-xs text-gray-600"> </span>'),Pt=q('<div class="flex flex-wrap gap-1"></div>'),Rt=q('<div class="flex-1"><div class="mb-2 flex flex-wrap items-center gap-2 sm:gap-3"><h3 class="text-lg font-semibold text-gray-900"> </h3> <!></div> <div class="flex flex-wrap items-center gap-4 text-sm text-gray-600"><div class="flex items-center gap-1"><!> <span> </span></div> <div class="flex items-center gap-1"><!> <span> </span></div> <!></div></div>'),Vt=q('<div class="flex flex-wrap items-center gap-6"><div class="text-center"><div> </div> <div class="text-xs text-gray-600"> </div></div> <div class="relative h-16 w-16"><svg class="h-16 w-16 -rotate-90 transform"><circle cx="32" cy="32" r="28" stroke="currentColor" stroke-width="4" fill="none" class="text-gray-200"></circle><circle cx="32" cy="32" r="28" stroke="currentColor" stroke-width="4" fill="none" stroke-linecap="round"></circle></svg></div></div>'),Ht=q('<div class="flex flex-col gap-2 sm:flex-row xl:flex-col"><button type="button" class="w-full rounded-lg bg-amber-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-amber-700 sm:w-auto"> </button> <button type="button" class="w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 sm:w-auto"> </button></div>'),Bt=q("<span><!> </span>"),jt=q('<div class="p-6 transition-colors hover:bg-gray-50"><div class="flex flex-col gap-6 xl:flex-row xl:items-center xl:justify-between"><!> <!> <!></div></div>'),Ft=q('<div class="rounded-2xl bg-white shadow-sm ring-1 ring-gray-100"><div class="border-b p-6"><h2 class="text-2xl font-bold text-gray-900"> </h2> <p class="text-sm text-gray-700"> </p></div> <div class="divide-y"></div></div>');function Ut(y,l){U(l,!0);const r=()=>B(Y,"$t",f),[f,k]=X(),v=(x,n=N)=>{var u=Rt(),a=s(u),t=s(a),o=s(t,!0);e(t);var m=i(t,2);b(m,()=>n().passed),e(a);var z=i(a,2),_=s(z),$=s(_);Tt($,{class:"h-4 w-4 text-gray-500"});var L=i($,2),j=s(L,!0);e(L),e(_);var H=i(_,2),et=s(H);kt(et,{class:"h-4 w-4 text-gray-500"});var at=i(et,2),ut=s(at,!0);e(at),e(H);var mt=i(H,2);{var gt=F=>{var Z=Pt();st(Z,21,()=>n().quizCategories,rt,(pt,xt)=>{var G=Lt(),ft=s(G,!0);e(G),P(ht=>g(ft,ht),[()=>r()(d(xt))]),w(pt,G)}),e(Z),w(F,Z)};tt(mt,F=>{n().quizCategories.length>0&&F(gt)})}e(z),e(u),P(F=>{g(o,n().quizTitle),g(j,n().completedAtLabel),g(ut,F)},[()=>r()("Time: {duration}",{duration:n().durationLabel})]),w(x,u)},C=(x,n=N)=>{var u=Vt(),a=s(u),t=s(a),o=s(t);e(t);var m=i(t,2),z=s(m,!0);e(m),e(a);var _=i(a,2),$=s(_),L=i(s($));e($),e(_),e(u),P((j,H)=>{O(t,1,`text-2xl font-bold ${n().passed?"text-green-600":"text-red-600"} sm:text-3xl`),g(o,`${j??""}%`),g(z,H),_t(L,"stroke-dasharray",`${c*n().scorePercentage/100} ${c}`),O(L,0,bt(n().passed?"text-green-500":"text-red-500"))},[()=>Math.round(n().scorePercentage),()=>r()("{score}/{total} correct",{score:String(Math.round(n().score*n().totalQuestions)),total:String(n().totalQuestions)})]),w(x,u)},p=(x,n=N)=>{var u=Ht(),a=s(u);a.__click=()=>T(n());var t=s(a,!0);e(a);var o=i(a,2);o.__click=()=>I(n());var m=s(o,!0);e(o),e(u),P((z,_)=>{g(t,z),g(m,_)},[()=>r()("View Details"),()=>r()("Retake Quiz")]),w(x,u)},b=(x,n=N)=>{const u=A(()=>n()?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),a=A(()=>n()?r()("Passed"):r()("Failed"));var t=Bt(),o=s(t);{var m=$=>{Ct($,{class:"h-3 w-3"})},z=$=>{It($,{class:"h-3 w-3"})};tt(o,$=>{n()?$(m):$(z,!1)})}var _=i(o);e(t),P(()=>{O(t,1,`flex items-center gap-1 rounded-full px-2 py-1 text-xs font-medium ${d(u)}`),g(_,` ${d(a)??""}`)}),w(x,t)},c=2*Math.PI*28;function T(x){l.viewResult?.({attemptId:x.attemptId,quizId:x.quizId})}function I(x){l.retakeQuiz?.({quizId:x.quizId})}var S=Ft(),h=s(S),M=s(h),D=s(M,!0);e(M);var Q=i(M,2),R=s(Q,!0);e(Q),e(h);var V=i(h,2);st(V,21,()=>l.attempts,rt,(x,n)=>{var u=jt(),a=s(u),t=s(a);v(t,()=>d(n));var o=i(t,2);C(o,()=>d(n));var m=i(o,2);p(m,()=>d(n)),e(a),e(u),w(x,u)}),e(V),e(S),P((x,n)=>{g(D,x),g(R,n)},[()=>r()("Recent Attempts"),()=>r()("Your quiz history and performance")]),w(y,S),E(),k()}it(["click"]);var Et=q('<div class="rounded-xl border border-gray-200 bg-white p-12 text-center shadow-sm"><div class="mb-4 flex justify-center"><!></div> <h3 class="mb-2 text-xl font-semibold text-gray-900"> </h3> <p class="mb-6 text-gray-600"> </p> <button type="button" class="inline-block rounded-lg bg-amber-500 px-6 py-3 font-medium text-white transition-colors hover:bg-amber-600"> </button></div>');function Xt(y,l){U(l,!0);const r=()=>B(Y,"$t",f),[f,k]=X();function v(){l.browse?.()}var C=Et(),p=s(C),b=s(p);vt(b,{class:"h-16 w-16 text-gray-400"}),e(p);var c=i(p,2),T=s(c,!0);e(c);var I=i(c,2),S=s(I,!0);e(I);var h=i(I,2);h.__click=v;var M=s(h,!0);e(h),e(C),P((D,Q,R)=>{g(T,D),g(S,Q),g(M,R)},[()=>r()("No quiz attempts yet"),()=>r()("Start taking quizzes to see your results here!"),()=>r()("Browse Quizzes")]),w(y,C),E(),k()}it(["click"]);var Yt=q('<h1 class="hero-pop mb-6 text-4xl leading-tight font-semibold tracking-tight sm:mb-8 sm:text-5xl"> <!> <br class="hidden sm:block"/> <!> </h1>');function Nt(y,l){U(l,!0);const r=()=>B(Y,"$t",f),[f,k]=X();St(y,{children:(v,C)=>{var p=Yt(),b=s(p),c=i(b);{let h=A(()=>r()("performance"));ot(c,{get text(){return d(h)},class:"-rotate-1"})}var T=i(c),I=i(T,3);{let h=A(()=>r()("progress"));ot(I,{get text(){return d(h)},class:"rotate-1"})}var S=i(I);e(p),P((h,M,D)=>{g(b,`${h??""} `),g(T,` ${M??""} `),g(S,` ${D??""}`)},[()=>r()("Your"),()=>r()("and"),()=>r()("over time")]),w(v,p)},$$slots:{default:!0}}),E(),k()}const W=(y,l)=>{let r=()=>l?.().title,f=()=>l?.().value,k=()=>l?.().icon,v=()=>l?.().iconClass,C=()=>l?.().badgeClass;var p=Ot(),b=s(p),c=s(b),T=s(c);{let Q=A(()=>`h-6 w-6 ${v()}`);qt(T,k,(R,V)=>{V(R,{get class(){return d(Q)}})})}e(c);var I=i(c,2),S=s(I),h=s(S,!0);e(S);var M=i(S,2),D=s(M,!0);e(M),e(I),e(b),e(p),P(()=>{O(c,1,`rounded-xl p-3 ${C()}`),g(h,r()),g(D,f())}),w(y,p)};var Ot=q('<div class="rounded-2xl bg-white p-6 shadow-sm ring-1 ring-amber-100"><div class="flex items-center"><div><!></div> <div class="ml-4"><p class="text-sm font-medium text-gray-600"> </p> <p class="text-2xl font-bold text-gray-900"> </p></div></div></div>'),Zt=q('<div class="mb-8 grid grid-cols-1 gap-6 md:grid-cols-3"><!> <!> <!></div>');function Gt(y,l){U(l,!0);const r=()=>B(Y,"$t",f),[f,k]=X();var v=Zt(),C=s(v);{let c=A(()=>({title:r()("Total Attempts"),value:l.stats.totalAttempts.toString(),icon:vt,iconClass:"text-amber-700",badgeClass:"bg-gray-50"}));W(C,()=>d(c))}var p=i(C,2);{let c=A(()=>({title:r()("Passed"),value:l.stats.passedAttempts.toString(),icon:Mt,iconClass:"text-emerald-600",badgeClass:"bg-gray-50"}));W(p,()=>d(c))}var b=i(p,2);{let c=A(()=>({title:r()("Avg Score"),value:`${Math.round(l.stats.averageScore)*10}`,icon:Dt,iconClass:"text-sky-600",badgeClass:"bg-gray-50"}));W(b,()=>d(c))}e(v),w(y,v),E(),k()}var Jt=q('<div class="space-y-8"><!> <!> <!></div>');function ve(y,l){U(l,!0);const r=()=>B(wt,"$sessionStore",v),f=()=>B(yt,"$activeLocale",v),k=()=>B(Y,"$t",v),[v,C]=X();let p=A(r);const b=A(()=>$t.getRecentAttempts(d(p))),c=A(()=>{const a=d(b).length,t=d(b).filter(m=>m.passed).length,o=a>0?d(b).reduce((m,z)=>m+z.score,0)/a:0;return{totalAttempts:a,passedAttempts:t,averageScore:o}}),T=A(()=>{const a=f();return[...d(b)].sort((t,o)=>new Date(o.completedAt).getTime()-new Date(t.completedAt).getTime()).map(t=>{const o=zt(t.quizId),m=o?o.templates[a]??o.templates.en??Object.values(o.templates)[0]:void 0,z=m?.questions.length??t.responses.length,_=new Date(t.completedAt);return{attemptId:t.attemptId,quizId:t.quizId,quizTitle:m?.title??k()("Unknown Quiz"),quizCategories:o?.categories??[],scorePercentage:t.score*100,score:t.score,totalQuestions:z,passed:t.passed,completedAtLabel:I(_),durationLabel:S(t.durationSeconds)}})});function I(a){const t=new Date,o=Math.trunc((a.getTime()-t.getTime())/1e3),m=Math.abs(o),z=f()==="cs"?"cs":"en",_=new Intl.RelativeTimeFormat(z,{numeric:"auto"});if(m<60)return _.format(o,"second");const $=Math.trunc(o/60);if(Math.abs($)<60)return _.format($,"minute");const L=Math.trunc($/60);if(Math.abs(L)<24)return _.format(L,"hour");const j=Math.trunc(L/24);if(Math.abs(j)<7)return _.format(j,"day");const H=f()==="cs"?"cs-CZ":"en-US";return a.toLocaleDateString(H,{year:"numeric",month:"short",day:"numeric"})}function S(a){const t=Math.floor(a/60),o=a%60;return k()("{minutes}m {seconds}s",{minutes:String(t),seconds:String(o)})}function h(a,t){J(K("/quiz/[id]/result/[attemptId]",{id:t,attemptId:a}))}function M(a){J(K("/quiz/[id]/take",{id:a}))}function D(){J(K("/quizzes"))}var Q=Jt(),R=s(Q);Nt(R,{});var V=i(R,2);Gt(V,{get stats(){return d(c)}});var x=i(V,2);{var n=a=>{Ut(a,{get attempts(){return d(T)},viewResult:({attemptId:t,quizId:o})=>h(t,o),retakeQuiz:({quizId:t})=>M(t)})},u=a=>{Xt(a,{browse:D})};tt(x,a=>{d(T).length>0?a(n):a(u,!1)})}e(Q),w(y,Q),E(),C()}export{ve as component};
