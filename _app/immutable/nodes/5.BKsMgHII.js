import{q as Xe,e as je,i as Ue,g as Ge}from"../chunks/D1kJWvmm.js";import"../chunks/DsnmJJEf.js";import{J as Je,ag as Ve,ah as Ee,Q as Ye,a1 as Ke,n as X,V as Be,p as ve,h as Y,i as ee,j as F,k as fe,f as O,d as a,r as s,b as y,c as be,s as A,t as T,m as e,u as _,e as L,U as de,a as se,aa as Ze,T as Oe,o as $e,ai as Me}from"../chunks/DTJG2ZOO.js";import{i as U}from"../chunks/Cvvt-Xjk.js";import{g as ke}from"../chunks/DjwGHfv2.js";import{r as Ae}from"../chunks/BNAh6BGQ.js";import{p as et}from"../chunks/DRL-MxDk.js";import{D as xe,l as me,s as K,b as tt,t as te,k as rt,c as st,d as nt,p as at,v as Re,w as ze,x as Fe,a as Ne,y as ot,z as it}from"../chunks/BwAqhdUR.js";import{N as lt}from"../chunks/Dw4OQUY3.js";import{C as ue,X as Pe}from"../chunks/09K15lWJ.js";import{A as dt}from"../chunks/b08yoqR9.js";const ct=()=>performance.now(),re={tick:d=>requestAnimationFrame(d),now:()=>ct(),tasks:new Set};function He(){const d=re.now();re.tasks.forEach(t=>{t.c(d)||(re.tasks.delete(t),t.f())}),re.tasks.size!==0&&re.tick(He)}function ut(d){let t;return re.tasks.size===0&&re.tick(He),{promise:new Promise(o=>{re.tasks.add(t={c:d,f:o})}),abort(){re.tasks.delete(t)}}}function De(d,t){Ee(()=>{d.dispatchEvent(new CustomEvent(t))})}function vt(d){if(d==="float")return"cssFloat";if(d==="offset")return"cssOffset";if(d.startsWith("--"))return d;const t=d.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(o=>o[0].toUpperCase()+o.slice(1)).join("")}function ft(d){const t={},o=d.split(";");for(const b of o){const[w,x]=b.split(":");if(!w||x===void 0)break;const C=vt(w.trim());t[C]=x.trim()}return t}const bt=d=>d;function xt(d,t,o,b){var w=(d&Ve)!==0,x="out",C,p=t.inert;t.style.overflow;var l,m;function c(){return Ee(()=>C??=o()(t,b?.()??{},{direction:x}))}var n={is_global:w,in(){t.inert=p;{m?.abort(),m?.reset?.();return}},out(f){t.inert=!0,De(t,"outrostart"),m=We(t,c(),l,0,()=>{De(t,"outroend"),f?.()})},stop:()=>{m?.abort()}},u=Je;(u.transitions??=[]).push(n)}function We(d,t,o,b,w){if(Ye(t)){var x,C=!1;return Ke(()=>{if(!C){var S=t({direction:"out"});x=We(d,S,o,b,w)}}),{abort:()=>{C=!0,x?.abort()},deactivate:()=>x.deactivate(),reset:()=>x.reset(),t:()=>x.t()}}if(!t?.duration)return w(),{abort:X,deactivate:X,reset:X,t:()=>b};const{delay:p=0,css:l,tick:m,easing:c=bt}=t;var n=[],u=()=>1-b,f=d.animate(n,{duration:p,fill:"forwards"});return f.onfinish=()=>{f.cancel();var S=1-b,M=b-S,q=t.duration*Math.abs(M),i=[];if(q>0){var Q=!1;if(l)for(var g=Math.ceil(q/16.666666666666668),z=0;z<=g;z+=1){var N=S+M*c(z/g),j=ft(l(N,1-N));i.push(j),Q||=j.overflow==="hidden"}Q&&(d.style.overflow="hidden"),u=()=>{var k=f.currentTime;return S+M*c(k/q)},m&&ut(()=>{if(f.playState!=="running")return!1;var k=u();return m(k,1-k),!0})}f=d.animate(i,{duration:q,fill:"forwards"}),f.onfinish=()=>{u=()=>b,m?.(b,1-b),w()}},{abort:()=>{f&&(f.cancel(),f.effect=null,f.onfinish=X)},deactivate:()=>{w=X},reset:()=>{m?.(1,0)},t:()=>u()}}const mt=!1,gt=!0,pt=!0,_t=()=>Object.values(Xe).map(d=>({id:d.id})),lr=Object.freeze(Object.defineProperty({__proto__:null,csr:gt,entries:_t,prerender:pt,ssr:mt},Symbol.toStringTag,{value:"Module"}));var wt=O("<div> </div>"),ht=O('<button type="button"><div><!></div> <div class="text-sm"><div class="font-medium text-gray-900"> </div> <!></div></button>'),yt=O('<aside class="lg:w-54"><div class="space-y-6 rounded-3xl bg-white p-5 shadow-sm ring-1 ring-amber-100 sm:p-6 lg:sticky lg:top-28"><div class="space-y-2"></div></div></aside>');function kt(d,t){ve(t,!0);const o=(c,n=X)=>{const u=_(()=>n().isAnswered?n().isCorrect?"border-emerald-400 bg-emerald-400 text-white":"border-rose-400 bg-rose-400 text-white":n().isCurrent?"border-sky-400 bg-sky-400 text-white":"border-gray-200 bg-white text-gray-700");var f=ht();f.__click=()=>C(n().index);var S=a(f),M=a(S);{var q=k=>{var h=de(),H=se(h);{var W=R=>{ue(R,{class:"h-5 w-5"})},V=R=>{Pe(R,{class:"h-5 w-5"})};U(H,R=>{n().isCorrect?R(W):R(V,!1)})}y(k,h)},i=k=>{var h=Ze();T(()=>L(h,n().index+1)),y(k,h)};U(M,k=>{n().isAnswered?k(q):k(i,!1)})}s(S);var Q=A(S,2),g=a(Q),z=a(g,!0);s(g);var N=A(g,2);{var j=k=>{var h=wt(),H=a(h,!0);s(h),T(W=>{K(h,1,rt(n().isCorrect?"text-xs text-emerald-600":"text-xs text-rose-600")),L(H,W)},[()=>n().isCorrect?x("Correct"):x("Incorrect")]),y(k,h)};U(N,k=>{n().isAnswered&&k(j)})}s(Q),s(f),T((k,h)=>{K(f,1,`flex w-full items-center gap-3 rounded-2xl px-3 py-2 text-left transition ${n().isCurrent?"bg-amber-50 ring-1 ring-amber-200":"hover:bg-gray-50"}`),tt(f,"aria-label",k),K(S,1,`flex h-10 w-10 shrink-0 items-center justify-center rounded-full border-2 font-semibold transition ${e(u)}`),L(z,h)},[()=>`${x("Question {index}",{values:{index:String(n().index+1)}})}: ${n().title??n().text}`,()=>x("Question {index}",{values:{index:String(n().index+1)}})]),y(c,f)};let b=Y(ee(xe));const w=me.subscribe(c=>{F(b,c,!0)});function x(c,n){return te(c,{...n,locale:e(b)})}function C(c){t.onSelect?.(c)}fe(()=>{w()});var p=yt(),l=a(p),m=a(l);je(m,21,()=>t.items,c=>c.index,(c,n)=>{o(c,()=>e(n))}),s(m),s(l),s(p),y(d,p),be()}Be(["click"]);function At(d){const t=d-1;return t*t*t+1}function Ct(d,{delay:t=0,duration:o=400,easing:b=At,axis:w="y"}={}){const x=getComputedStyle(d),C=+x.opacity,p=w==="y"?"height":"width",l=parseFloat(x[p]),m=w==="y"?["top","bottom"]:["left","right"],c=m.map(i=>`${i[0].toUpperCase()}${i.slice(1)}`),n=parseFloat(x[`padding${c[0]}`]),u=parseFloat(x[`padding${c[1]}`]),f=parseFloat(x[`margin${c[0]}`]),S=parseFloat(x[`margin${c[1]}`]),M=parseFloat(x[`border${c[0]}Width`]),q=parseFloat(x[`border${c[1]}Width`]);return{delay:t,duration:o,easing:b,css:i=>`overflow: hidden;opacity: ${Math.min(i*20,1)*C};${p}: ${i*l}px;padding-${m[0]}: ${i*n}px;padding-${m[1]}: ${i*u}px;margin-${m[0]}: ${i*f}px;margin-${m[1]}: ${i*S}px;border-${m[0]}-width: ${i*M}px;border-${m[1]}-width: ${i*q}px;min-${p}: 0`}}const St=(d,t=X)=>{const o=_(()=>t().showResult?t().isCorrectAnswer?"border-emerald-400 bg-emerald-400 text-white":t().isUserAnswer?"border-rose-400 bg-rose-400 text-white":"border-gray-300 bg-gray-100 text-gray-500":t().isSelected?"border-amber-300 bg-amber-500 text-white":"border-gray-300 bg-white text-gray-500");var b=Lt(),w=a(b);{var x=p=>{var l=de(),m=se(l);{var c=u=>{ue(u,{class:"h-4 w-4"})},n=u=>{Pe(u,{class:"h-4 w-4"})};U(m,u=>{t().isCorrectAnswer?u(c):u(n,!1)})}y(p,l)},C=p=>{var l=de(),m=se(l);{var c=n=>{var u=It();y(n,u)};U(m,n=>{t().isSelected&&n(c)},!0)}y(p,l)};U(w,p=>{t().showResult&&(t().isCorrectAnswer||t().isUserAnswer)?p(x):p(C,!1)})}s(b),T(()=>K(b,1,`mt-1 inline-flex h-6 w-6 shrink-0 items-center justify-center rounded-full border font-semibold ${e(o)}`)),y(d,b)};var qt=O('<div><div class="flex items-start gap-4"><span><!></span> <div class="flex-1"><div class="mb-1 text-xs font-semibold tracking-wide text-gray-600 uppercase"> </div> <span class="text-sm text-gray-900 sm:text-base"> </span></div></div></div>'),Qt=O('<button type="button"><div class="flex items-start gap-4"><!> <span class="text-sm text-gray-900 sm:text-base"> </span></div></button>'),It=O('<span class="h-2 w-2 rounded-full bg-white"></span>'),Lt=O("<span><!></span>"),Ot=O('<div class="mb-8 rounded-2xl border border-sky-200 bg-sky-50 px-4 py-3 sm:px-5 sm:py-4"><div class="flex items-start gap-4"><svg class="mt-1 h-6 w-6 shrink-0 text-sky-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div class="flex-1"><div class="mb-1 text-xs font-semibold tracking-wide text-gray-600 uppercase"> </div> <p class="text-sm text-gray-900 sm:text-base"> </p></div></div></div>'),zt=O('<h2 class="mb-2 text-lg font-semibold text-gray-900 sm:text-xl"> </h2>'),jt=O('<div class="mb-8 space-y-3"></div>'),Bt=O('<div><div class="mb-6"><!></div> <!></div>'),Pt=O('<button type="button" class="inline-flex items-center gap-2 rounded-full bg-amber-500 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-amber-600 disabled:cursor-not-allowed disabled:opacity-50 sm:px-6"> <!></button>'),Mt=O('<button type="button" class="inline-flex items-center gap-2 rounded-full bg-sky-500 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-sky-600 sm:px-6"> <!></button>'),Rt=O('<button type="button" class="inline-flex items-center gap-2 rounded-full bg-emerald-500 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-emerald-600 sm:px-6"> <!></button>'),Ft=O('<!> <div class="mb-6 flex flex-wrap items-center justify-between gap-3 text-sm text-gray-500"><div class="flex items-center gap-2"><span class="inline-flex h-8 w-8 items-center justify-center rounded-full bg-amber-50 font-semibold text-amber-600"> </span> <span> </span></div> <div class="rounded-full bg-gray-100 px-3 py-1"><span class="font-medium text-gray-700"> </span></div></div> <p class="mb-6 text-base text-gray-900 sm:mb-8 sm:text-lg"> </p> <div class="relative"><!></div> <div class="flex flex-wrap items-center justify-between gap-3"><button type="button" class="inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white px-5 py-2.5 text-sm font-medium text-gray-700 transition hover:border-amber-200 hover:text-amber-600 disabled:cursor-not-allowed disabled:opacity-40"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg> </button> <div class="flex flex-wrap items-center gap-3"><!></div></div>',1),Nt=O('<section class="flex-1 rounded-3xl bg-white p-5 shadow-sm ring-1 ring-gray-100 sm:p-6 lg:p-8"><!></section>');function Dt(d,t){ve(t,!0);const o=(i,Q=X,g=X)=>{const z=_(()=>g()?"border-emerald-400 bg-emerald-50":"border-rose-300 bg-rose-50"),N=_(()=>g()?"border-emerald-400 bg-emerald-400 text-white":"border-rose-400 bg-rose-400 text-white");var j=qt(),k=a(j),h=a(k),H=a(h);{var W=G=>{ue(G,{class:"h-4 w-4"})},V=G=>{Pe(G,{class:"h-4 w-4"})};U(H,G=>{g()?G(W):G(V,!1)})}s(h);var R=A(h,2),ne=a(R),oe=a(ne,!0);s(ne);var ce=A(ne,2),ie=a(ce,!0);s(ce),s(R),s(k),s(j),T(G=>{K(j,1,`w-full rounded-2xl border-[1.5px] px-4 py-3 sm:px-5 sm:py-4 ${e(z)}`),K(h,1,`mt-1 inline-flex h-6 w-6 shrink-0 items-center justify-center rounded-full border font-semibold ${e(N)}`),L(oe,G),L(ie,Q())},[()=>p("Correct answer")]),y(i,j)},b=(i,Q=X,g=X)=>{const z=_(()=>t.selectedAnswer===g()),N=_(()=>t.question?.correctAnswer===g()),j=_(()=>t.confirmedAnswer?.selectedOption===g()),k=_(()=>e(l)?e(N)?"border-emerald-400 bg-emerald-50":e(j)?"border-rose-300 bg-rose-50":"border-gray-200 bg-gray-50":e(z)?"border-amber-300 bg-amber-50 ring-1 ring-amber-200":"border-gray-200 bg-white hover:border-amber-200 hover:bg-amber-50/50");var h=Qt();h.__click=()=>m(g());var H=a(h),W=a(H);St(W,()=>({showResult:e(l),isCorrectAnswer:e(N),isUserAnswer:e(j),isSelected:e(z)}));var V=A(W,2),R=a(V,!0);s(V),s(H),s(h),T(()=>{h.disabled=e(l),K(h,1,`w-full rounded-2xl border-[1.5px] px-4 py-3 text-left transition focus-visible:outline focus-visible:outline-offset-2 focus-visible:outline-amber-400 disabled:cursor-not-allowed sm:px-5 sm:py-4 ${e(k)}`),L(R,Q())}),y(i,h)},w=(i,Q=X)=>{var g=Ot(),z=a(g),N=A(a(z),2),j=a(N),k=a(j,!0);s(j);var h=A(j,2),H=a(h,!0);s(h),s(N),s(z),s(g),T(W=>{L(k,W),L(H,Q())},[()=>p("Learn together")]),y(i,g)};let x=Y(ee(xe));const C=me.subscribe(i=>{F(x,i,!0)});function p(i,Q){return te(i,{...Q,locale:e(x)})}const l=_(()=>!!t.confirmedAnswer);function m(i){e(l)||t.onSelectAnswer?.(i)}function c(){e(l)||t.onConfirmAnswer?.()}function n(){e(l)&&t.onNextQuestion?.()}function u(){e(l)&&t.onSubmit?.()}function f(){t.onPreviousQuestion?.()}fe(()=>{C()});var S=Nt(),M=a(S);{var q=i=>{var Q=Ft(),g=se(Q);{var z=P=>{var I=zt(),E=a(I,!0);s(I),T(()=>L(E,t.question.title)),y(P,I)};U(g,P=>{t.question.title&&P(z)})}var N=A(g,2),j=a(N),k=a(j),h=a(k,!0);s(k);var H=A(k,2),W=a(H,!0);s(H),s(j);var V=A(j,2),R=a(V),ne=a(R,!0);s(R),s(V),s(N);var oe=A(N,2),ce=a(oe,!0);s(oe);var ie=A(oe,2),G=a(ie);{var Ce=P=>{var I=jt();je(I,21,()=>t.question.options,Ue,(E,Z,$)=>{b(E,()=>e(Z),()=>$)}),s(I),xt(2,I,()=>Ct,()=>({duration:500})),y(P,I)},Se=P=>{var I=Bt(),E=a(I),Z=a(E);o(Z,()=>t.question.options[t.question.correctAnswer],()=>t.confirmedAnswer?.isCorrect??!1),s(E);var $=A(E,2);{var r=v=>{w(v,()=>t.question.explanation)};U($,v=>{t.question.explanation&&v(r)})}s(I),y(P,I)};U(G,P=>{e(l)?P(Se,!1):P(Ce)})}s(ie);var ge=A(ie,2),le=a(ge);le.__click=f;var pe=A(a(le));s(le);var _e=A(le,2),qe=a(_e);{var we=P=>{var I=Pt();I.__click=c;var E=a(I),Z=A(E);ue(Z,{class:"h-4 w-4"}),s(I),T($=>{I.disabled=t.selectedAnswer===null,L(E,`${$??""} `)},[()=>p("Confirm answer")]),y(P,I)},Qe=P=>{var I=de(),E=se(I);{var Z=r=>{var v=Mt();v.__click=n;var B=a(v),D=A(B);dt(D,{class:"h-4 w-4"}),s(v),T(J=>L(B,`${J??""} `),[()=>p("Next question")]),y(r,v)},$=r=>{var v=de(),B=se(v);{var D=J=>{var ae=Rt();ae.__click=u;var he=a(ae),ye=A(he);ue(ye,{class:"h-4 w-4"}),s(ae),T(Ie=>L(he,`${Ie??""} `),[()=>p("Submit quiz")]),y(J,ae)};U(B,J=>{t.allQuestionsAnswered&&J(D)},!0)}y(r,v)};U(E,r=>{t.isLastQuestion?r($,!1):r(Z)},!0)}y(P,I)};U(qe,P=>{e(l)?P(Qe,!1):P(we)})}s(_e),s(ge),T((P,I,E)=>{L(h,t.questionIndex+1),L(W,P),L(ne,I),L(ce,t.question.text),le.disabled=t.questionIndex===0,L(pe,` ${E??""}`)},[()=>p("Question {index} of {total}",{values:{index:String(t.questionIndex+1),total:String(t.totalQuestions)}}),()=>p("Select the best answer"),()=>p("Previous")]),y(i,Q)};U(M,i=>{t.question&&i(q)})}s(S),y(d,S),be()}Be(["click"]);const Te=(d,t=X)=>{const o=_(()=>t().tone==="amber"?{background:"bg-amber-50",ring:"ring-amber-100",label:"text-amber-600"}:{background:"bg-sky-50",ring:"ring-sky-100",label:"text-sky-600"});var b=Tt(),w=a(b),x=a(w,!0);s(w);var C=A(w,2),p=a(C,!0);s(C);var l=A(C,2),m=a(l,!0);s(l),s(b),T(()=>{K(b,1,`rounded-2xl px-5 py-4 text-center shadow-sm ring-1 ${e(o).background} ${e(o).ring}`),K(w,1,`text-xs font-medium tracking-wide uppercase ${e(o).label}`),L(x,t().label),L(p,t().primary),L(m,t().helper)}),y(d,b)};var Tt=O('<div><div> </div> <div class="text-2xl font-semibold text-gray-900 sm:text-3xl"> </div> <div class="text-sm text-gray-500"> </div></div>'),Ut=O('<div class="rounded-3xl bg-white p-6 shadow-sm ring-1 ring-amber-100 sm:p-8"><div class="flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between"><div class="max-w-2xl space-y-3"><h1 class="text-2xl font-semibold text-gray-900 sm:text-3xl lg:text-4xl"> </h1> <p class="text-base text-gray-600"> </p></div> <div class="flex flex-wrap items-center gap-4"><!> <!></div></div></div>');function Et(d,t){ve(t,!0);let o=Y(ee(xe));const b=me.subscribe(q=>{F(o,q,!0)});function w(q,i){return te(q,{...i,locale:e(o)})}const x=_(()=>Math.round(t.scorePercentage));fe(()=>{b()});var C=Ut(),p=a(C),l=a(p),m=a(l),c=a(m,!0);s(m);var n=A(m,2),u=a(n,!0);s(n),s(l);var f=A(l,2),S=a(f);{let q=_(()=>({label:w("Question"),primary:`${t.currentQuestion}`,helper:w("of {total}",{values:{total:String(t.totalQuestions)}}),tone:"amber"}));Te(S,()=>e(q))}var M=A(S,2);{let q=_(()=>({label:w("Current score"),primary:`${t.score}`,helper:w("{percent}%",{values:{percent:String(e(x))}}),tone:"sky"}));Te(M,()=>e(q))}s(f),s(p),s(C),T(()=>{L(c,t.title),L(u,t.message)}),y(d,C),be()}var Ht=O("<span> </span>"),Wt=O('<button type="button" class="transition hover:text-amber-600"> </button>'),Xt=O("<span>/</span>"),Gt=O("<!> <!>",1),Jt=O('<div class="flex flex-wrap items-center justify-between gap-4"><div class="flex flex-wrap items-center gap-2 text-sm text-gray-500"></div> <button type="button" class="inline-flex items-center gap-2 rounded-full border border-amber-200 bg-white px-4 py-2 text-sm font-semibold text-amber-700 shadow-sm transition hover:border-amber-300 hover:text-amber-800"><svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9l-2 3m0 0l2 3m-2-3h8m4 0a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> </button></div>');function Vt(d,t){ve(t,!0);const o=(u,f=X)=>{var S=de(),M=se(S);{var q=Q=>{var g=Ht(),z=a(g,!0);s(g),T(()=>{K(g,1,`font-medium ${f().isActive?"text-gray-900":"hover:text-amber-600"}`),L(z,f().label)}),y(Q,g)},i=Q=>{var g=Wt();g.__click=()=>p(f());var z=a(g,!0);s(g),T(()=>L(z,f().label)),y(Q,g)};U(M,Q=>{f().isActive||!f().onSelect?Q(q):Q(i,!1)})}y(u,S)};let b=Y(ee(xe));const w=me.subscribe(u=>{F(b,u,!0)});function x(u,f){return te(u,{...f,locale:e(b)})}function C(){t.onQuit?.()}function p(u){u.isActive||u.onSelect?.()}fe(()=>{w()});var l=Jt(),m=a(l);je(m,21,()=>t.crumbs,Ue,(u,f,S)=>{var M=Gt(),q=se(M);o(q,()=>e(f));var i=A(q,2);{var Q=g=>{var z=Xt();y(g,z)};U(i,g=>{S<t.crumbs.length-1&&g(Q)})}y(u,M)}),s(m);var c=A(m,2);c.__click=C;var n=A(a(c));s(c),s(l),T(u=>L(n,` ${u??""}`),[()=>x("Quit Quiz")]),y(d,l),be()}Be(["click"]);var Yt=O('<div class="mx-auto max-w-7xl space-y-6"><!> <!> <div class="flex flex-col gap-6 lg:flex-row"><div class="hidden shrink-0 lg:block"><!></div> <div class="min-w-0 flex-1"><!></div></div></div>');function dr(d,t){ve(t,!0);const o=_(()=>et.params.id??"");let b=Y(ee(xe));const w=me.subscribe(r=>{F(b,r,!0)}),x=_(()=>Ge(e(o))),C=_(()=>P(e(x),e(b))),p=_(()=>e(C)?.questions??[]),l=_(()=>e(p).length);let m=Y(ee(st(nt))),c=Y(ee([])),n=Y(0),u=Y(null),f=Y(ee(new Date().toISOString())),S=!1,M=Y(ee(ze()));Oe(()=>at.subscribe(v=>{F(m,v,!0),F(M,ze(),!0),queueMicrotask(()=>{F(M,ze(),!0)})}));const q=_(()=>e(p)[e(n)]),i=_(()=>e(c).filter(r=>r.isConfirmed&&typeof r.isCorrect=="boolean").map(r=>({questionIndex:r.questionIndex,selectedOption:r.selectedOption,isCorrect:!!r.isCorrect}))),Q=_(()=>e(c).find(r=>r.questionIndex===e(n))??null),g=_(()=>e(i).find(r=>r.questionIndex===e(n))??null),z=_(()=>!!e(Q)?.isConfirmed),N=_(()=>e(n)===e(l)-1),j=_(()=>e(i).length),k=_(()=>e(j)===e(l)),h=_(()=>e(i).filter(r=>r.isCorrect).length),H=_(()=>e(l)>0?e(h)/e(l)*100:0),W=_(()=>e(p).map((r,v)=>{const B=e(i).find(D=>D.questionIndex===v)??null;return{index:v,title:r.title??null,text:r.text,isCurrent:v===e(n),isAnswered:!!B,isCorrect:B?.isCorrect??null}})),V=_(()=>te("Stay focused, trust your instincts, and remember every question is a chance to learn.",{locale:e(b)}));Oe(()=>{const r=e(c).find(v=>v.questionIndex===e(n));F(u,r?.selectedOption??e(g)?.selectedOption??null,!0)}),Oe(()=>{if(!e(o)||!e(x)||S)return;const r=e(m).inProgress[e(o)];if(r){F(n,r.currentQuestionIndex,!0);const B=r.responses??[];F(c,B.map(D=>({...D})),!0),F(f,r.startedAt??new Date().toISOString(),!0),F(u,B.find(D=>D.questionIndex===e(n))?.selectedOption??null,!0),S=!0;return}if(!e(M))return;const v=new Date().toISOString();F(f,v,!0),F(n,0),F(c,[],!0),Re(e(o),()=>({currentQuestionIndex:0,responses:[],startedAt:v,updatedAt:v,lastInteractionAt:v})),S=!0});function R(r){if(!e(o))return;const v=new Date().toISOString();Re(e(o),B=>{const D=B??{currentQuestionIndex:0,responses:[],startedAt:e(f),updatedAt:v,lastInteractionAt:v};return{...D,currentQuestionIndex:e(n),responses:e(c).map(J=>({...J})),startedAt:D.startedAt??e(f),updatedAt:v,lastInteractionAt:v,...r}})}function ne(r){const v=e(c).slice(),B=v.findIndex(J=>J.questionIndex===r.questionIndex),D={questionIndex:r.questionIndex,selectedOption:r.selectedOption??-1,isConfirmed:r.isConfirmed??!1,isCorrect:r.isCorrect??null};v[B>=0?B:v.length]={...B>=0?v[B]:D,...r},F(c,v,!0)}function oe(r){e(z)||(F(u,r,!0),ne({questionIndex:e(n),selectedOption:r,isConfirmed:!1,isCorrect:null}),R())}function ce(){if(e(u)===null||!e(q)||!e(o))return;const r=e(u)===e(q).correctAnswer;ne({questionIndex:e(n),selectedOption:e(u),isConfirmed:!0,isCorrect:r}),R()}function ie(){e(o)&&e(n)<e(l)-1&&(Me(n),R())}function G(){e(o)&&e(n)>0&&(Me(n,-1),R())}function Ce(r){e(o)&&(F(n,r,!0),R())}function Se(){if(!e(x)||!e(o))return;const r=new Date().toISOString(),v=ot({quiz:e(x),responses:e(i).map(B=>({...B})),totalQuestions:e(l),startedAt:e(f),completedAt:r});it(e(o),v),Ne(e(o)),ke(Ae("/quiz/[id]/result/[attemptId]",{id:e(o),attemptId:v.attemptId}))}function ge(){e(k)&&Se()}function le(){e(o)&&confirm(e(qe))&&(e(i).length===0&&Fe(),Ne(e(o)),ke(Ae("/quiz/[id]",{id:e(o)})))}function pe(){ke(Ae("/"))}function _e(){e(o)&&ke(Ae("/quiz/[id]",{id:e(o)}))}const qe=_(()=>te("Are you sure you want to quit? Your progress will be lost.",{locale:e(b)})),we=_(()=>e(C)?.title??te("Unknown Quiz",{locale:e(b)})),Qe=_(()=>[{label:te("Dashboard",{locale:e(b)}),onSelect:pe},{label:e(we),onSelect:_e},{label:te("Take Quiz",{locale:e(b)}),isActive:!0}]);$e(()=>{const r=()=>{e(i).length===0&&Fe()};return window.addEventListener("beforeunload",r),()=>{window.removeEventListener("beforeunload",r)}}),fe(()=>{w()});function P(r,v){if(r)return r.content[v]??r.content.en??Object.values(r.content)[0]}var I=de(),E=se(I);{var Z=r=>{lt(r,{onBack:pe})},$=r=>{var v=Yt(),B=a(v);Vt(B,{get crumbs(){return e(Qe)},onQuit:le});var D=A(B,2);{let Le=_(()=>e(n)+1);Et(D,{get title(){return e(we)},get message(){return e(V)},get currentQuestion(){return e(Le)},get totalQuestions(){return e(l)},get score(){return e(h)},get scorePercentage(){return e(H)}})}var J=A(D,2),ae=a(J),he=a(ae);kt(he,{get items(){return e(W)},onSelect:Ce}),s(ae);var ye=A(ae,2),Ie=a(ye);{let Le=_(()=>e(q)??null);Dt(Ie,{get question(){return e(Le)},get questionIndex(){return e(n)},get totalQuestions(){return e(l)},get selectedAnswer(){return e(u)},get confirmedAnswer(){return e(g)},get isLastQuestion(){return e(N)},get allQuestionsAnswered(){return e(k)},onSelectAnswer:oe,onConfirmAnswer:ce,onNextQuestion:ie,onPreviousQuestion:G,onSubmit:ge})}s(ye),s(J),s(v),y(r,v)};U(E,r=>{!e(x)||!e(C)?r(Z):r($,!1)})}y(d,I),be()}export{dr as component,lr as universal};
