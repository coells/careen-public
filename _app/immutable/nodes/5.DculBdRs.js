import"../chunks/DsnmJJEf.js";import{L as Xe,ac as Ge,ad as Ee,S as Ve,a1 as Ye,n as X,V as Be,p as ve,h as J,i as ee,j as F,k as fe,f as z,d as a,r as s,b as y,c as be,s as A,t as T,m as e,u as _,e as L,D as de,a as se,aa as Je,C as ze,o as Ke,ae as Me}from"../chunks/D3P1Fts5.js";import{i as E}from"../chunks/hyaw4NeY.js";import{g as ke}from"../chunks/Br-8wFLS.js";import{r as Ae}from"../chunks/F-qQvoaB.js";import{p as Ze}from"../chunks/D1Dg9SEx.js";import{D as xe,l as me,s as K,b as $e,t as te,k as et,c as tt,d as rt,p as st,v as Re,w as Oe,x as Fe,a as De,y as nt,z as at}from"../chunks/CUr7oSGh.js";import{e as Pe,i as Ue,g as ot}from"../chunks/DuTmBecZ.js";import{N as it}from"../chunks/QjeduJ8O.js";import{C as ue,X as je}from"../chunks/BXeg3Qhd.js";import{A as lt}from"../chunks/CoHaye1a.js";const dt=()=>performance.now(),re={tick:f=>requestAnimationFrame(f),now:()=>dt(),tasks:new Set};function He(){const f=re.now();re.tasks.forEach(t=>{t.c(f)||(re.tasks.delete(t),t.f())}),re.tasks.size!==0&&re.tick(He)}function ct(f){let t;return re.tasks.size===0&&re.tick(He),{promise:new Promise(o=>{re.tasks.add(t={c:f,f:o})}),abort(){re.tasks.delete(t)}}}function Ne(f,t){Ee(()=>{f.dispatchEvent(new CustomEvent(t))})}function ut(f){if(f==="float")return"cssFloat";if(f==="offset")return"cssOffset";if(f.startsWith("--"))return f;const t=f.split("-");return t.length===1?t[0]:t[0]+t.slice(1).map(o=>o[0].toUpperCase()+o.slice(1)).join("")}function vt(f){const t={},o=f.split(";");for(const b of o){const[w,x]=b.split(":");if(!w||x===void 0)break;const C=ut(w.trim());t[C]=x.trim()}return t}const ft=f=>f;function bt(f,t,o,b){var w=(f&Ge)!==0,x="out",C,p=t.inert;t.style.overflow;var l,m;function d(){return Ee(()=>C??=o()(t,b?.()??{},{direction:x}))}var n={is_global:w,in(){t.inert=p;{m?.abort(),m?.reset?.();return}},out(v){t.inert=!0,Ne(t,"outrostart"),m=We(t,d(),l,0,()=>{Ne(t,"outroend"),v?.()})},stop:()=>{m?.abort()}},c=Xe;(c.transitions??=[]).push(n)}function We(f,t,o,b,w){if(Ve(t)){var x,C=!1;return Ye(()=>{if(!C){var S=t({direction:"out"});x=We(f,S,o,b,w)}}),{abort:()=>{C=!0,x?.abort()},deactivate:()=>x.deactivate(),reset:()=>x.reset(),t:()=>x.t()}}if(!t?.duration)return w(),{abort:X,deactivate:X,reset:X,t:()=>b};const{delay:p=0,css:l,tick:m,easing:d=ft}=t;var n=[],c=()=>1-b,v=f.animate(n,{duration:p,fill:"forwards"});return v.onfinish=()=>{v.cancel();var S=1-b,M=b-S,q=t.duration*Math.abs(M),i=[];if(q>0){var Q=!1;if(l)for(var g=Math.ceil(q/16.666666666666668),O=0;O<=g;O+=1){var D=S+M*d(O/g),B=vt(l(D,1-D));i.push(B),Q||=B.overflow==="hidden"}Q&&(f.style.overflow="hidden"),c=()=>{var k=v.currentTime;return S+M*d(k/q)},m&&ct(()=>{if(v.playState!=="running")return!1;var k=c();return m(k,1-k),!0})}v=f.animate(i,{duration:q,fill:"forwards"}),v.onfinish=()=>{c=()=>b,m?.(b,1-b),w()}},{abort:()=>{v&&(v.cancel(),v.effect=null,v.onfinish=X)},deactivate:()=>{w=X},reset:()=>{m?.(1,0)},t:()=>c()}}var xt=z("<div> </div>"),mt=z('<button type="button"><div><!></div> <div class="text-sm"><div class="font-medium text-gray-900"> </div> <!></div></button>'),gt=z('<aside class="lg:w-54"><div class="space-y-6 rounded-3xl bg-white p-5 shadow-sm ring-1 ring-amber-100 sm:p-6 lg:sticky lg:top-28"><div class="space-y-2"></div></div></aside>');function pt(f,t){ve(t,!0);const o=(d,n=X)=>{const c=_(()=>n().isAnswered?n().isCorrect?"border-emerald-400 bg-emerald-400 text-white":"border-rose-400 bg-rose-400 text-white":n().isCurrent?"border-sky-400 bg-sky-400 text-white":"border-gray-200 bg-white text-gray-700");var v=mt();v.__click=()=>C(n().index);var S=a(v),M=a(S);{var q=k=>{var h=de(),H=se(h);{var W=R=>{ue(R,{class:"h-5 w-5"})},Y=R=>{je(R,{class:"h-5 w-5"})};E(H,R=>{n().isCorrect?R(W):R(Y,!1)})}y(k,h)},i=k=>{var h=Je();T(()=>L(h,n().index+1)),y(k,h)};E(M,k=>{n().isAnswered?k(q):k(i,!1)})}s(S);var Q=A(S,2),g=a(Q),O=a(g,!0);s(g);var D=A(g,2);{var B=k=>{var h=xt(),H=a(h,!0);s(h),T(W=>{K(h,1,et(n().isCorrect?"text-xs text-emerald-600":"text-xs text-rose-600")),L(H,W)},[()=>n().isCorrect?x("Correct"):x("Incorrect")]),y(k,h)};E(D,k=>{n().isAnswered&&k(B)})}s(Q),s(v),T((k,h)=>{K(v,1,`flex w-full items-center gap-3 rounded-2xl px-3 py-2 text-left transition ${n().isCurrent?"bg-amber-50 ring-1 ring-amber-200":"hover:bg-gray-50"}`),$e(v,"aria-label",k),K(S,1,`flex h-10 w-10 shrink-0 items-center justify-center rounded-full border-2 font-semibold transition ${e(c)}`),L(O,h)},[()=>`${x("Question {index}",{values:{index:String(n().index+1)}})}: ${n().title??n().text}`,()=>x("Question {index}",{values:{index:String(n().index+1)}})]),y(d,v)};let b=J(ee(xe));const w=me.subscribe(d=>{F(b,d,!0)});function x(d,n){return te(d,{...n,locale:e(b)})}function C(d){t.onSelect?.(d)}fe(()=>{w()});var p=gt(),l=a(p),m=a(l);Pe(m,21,()=>t.items,d=>d.index,(d,n)=>{o(d,()=>e(n))}),s(m),s(l),s(p),y(f,p),be()}Be(["click"]);function _t(f){const t=f-1;return t*t*t+1}function wt(f,{delay:t=0,duration:o=400,easing:b=_t,axis:w="y"}={}){const x=getComputedStyle(f),C=+x.opacity,p=w==="y"?"height":"width",l=parseFloat(x[p]),m=w==="y"?["top","bottom"]:["left","right"],d=m.map(i=>`${i[0].toUpperCase()}${i.slice(1)}`),n=parseFloat(x[`padding${d[0]}`]),c=parseFloat(x[`padding${d[1]}`]),v=parseFloat(x[`margin${d[0]}`]),S=parseFloat(x[`margin${d[1]}`]),M=parseFloat(x[`border${d[0]}Width`]),q=parseFloat(x[`border${d[1]}Width`]);return{delay:t,duration:o,easing:b,css:i=>`overflow: hidden;opacity: ${Math.min(i*20,1)*C};${p}: ${i*l}px;padding-${m[0]}: ${i*n}px;padding-${m[1]}: ${i*c}px;margin-${m[0]}: ${i*v}px;margin-${m[1]}: ${i*S}px;border-${m[0]}-width: ${i*M}px;border-${m[1]}-width: ${i*q}px;min-${p}: 0`}}const ht=(f,t=X)=>{const o=_(()=>t().showResult?t().isCorrectAnswer?"border-emerald-400 bg-emerald-400 text-white":t().isUserAnswer?"border-rose-400 bg-rose-400 text-white":"border-gray-300 bg-gray-100 text-gray-500":t().isSelected?"border-amber-300 bg-amber-500 text-white":"border-gray-300 bg-white text-gray-500");var b=Ct(),w=a(b);{var x=p=>{var l=de(),m=se(l);{var d=c=>{ue(c,{class:"h-4 w-4"})},n=c=>{je(c,{class:"h-4 w-4"})};E(m,c=>{t().isCorrectAnswer?c(d):c(n,!1)})}y(p,l)},C=p=>{var l=de(),m=se(l);{var d=n=>{var c=At();y(n,c)};E(m,n=>{t().isSelected&&n(d)},!0)}y(p,l)};E(w,p=>{t().showResult&&(t().isCorrectAnswer||t().isUserAnswer)?p(x):p(C,!1)})}s(b),T(()=>K(b,1,`mt-1 inline-flex h-6 w-6 shrink-0 items-center justify-center rounded-full border font-semibold ${e(o)}`)),y(f,b)};var yt=z('<div><div class="flex items-start gap-4"><span><!></span> <div class="flex-1"><div class="mb-1 text-xs font-semibold tracking-wide text-gray-600 uppercase"> </div> <span class="text-sm text-gray-900 sm:text-base"> </span></div></div></div>'),kt=z('<button type="button"><div class="flex items-start gap-4"><!> <span class="text-sm text-gray-900 sm:text-base"> </span></div></button>'),At=z('<span class="h-2 w-2 rounded-full bg-white"></span>'),Ct=z("<span><!></span>"),St=z('<div class="mb-8 rounded-2xl border border-sky-200 bg-sky-50 px-4 py-3 sm:px-5 sm:py-4"><div class="flex items-start gap-4"><svg class="mt-1 h-6 w-6 shrink-0 text-sky-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> <div class="flex-1"><div class="mb-1 text-xs font-semibold tracking-wide text-gray-600 uppercase"> </div> <p class="text-sm text-gray-900 sm:text-base"> </p></div></div></div>'),qt=z('<h2 class="mb-2 text-lg font-semibold text-gray-900 sm:text-xl"> </h2>'),Qt=z('<div class="mb-8 space-y-3"></div>'),It=z('<div><div class="mb-6"><!></div> <!></div>'),Lt=z('<button type="button" class="inline-flex items-center gap-2 rounded-full bg-amber-500 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-amber-600 disabled:cursor-not-allowed disabled:opacity-50 sm:px-6"> <!></button>'),zt=z('<button type="button" class="inline-flex items-center gap-2 rounded-full bg-sky-500 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-sky-600 sm:px-6"> <!></button>'),Ot=z('<button type="button" class="inline-flex items-center gap-2 rounded-full bg-emerald-500 px-5 py-2.5 text-sm font-semibold text-white shadow-sm transition hover:bg-emerald-600 sm:px-6"> <!></button>'),Bt=z('<!> <div class="mb-6 flex flex-wrap items-center justify-between gap-3 text-sm text-gray-500"><div class="flex items-center gap-2"><span class="inline-flex h-8 w-8 items-center justify-center rounded-full bg-amber-50 font-semibold text-amber-600"> </span> <span> </span></div> <div class="rounded-full bg-gray-100 px-3 py-1"><span class="font-medium text-gray-700"> </span></div></div> <p class="mb-6 text-base text-gray-900 sm:mb-8 sm:text-lg"> </p> <div class="relative"><!></div> <div class="flex flex-wrap items-center justify-between gap-3"><button type="button" class="inline-flex items-center gap-2 rounded-full border border-gray-200 bg-white px-5 py-2.5 text-sm font-medium text-gray-700 transition hover:border-amber-200 hover:text-amber-600 disabled:cursor-not-allowed disabled:opacity-40"><svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg> </button> <div class="flex flex-wrap items-center gap-3"><!></div></div>',1),Pt=z('<section class="flex-1 rounded-3xl bg-white p-5 shadow-sm ring-1 ring-gray-100 sm:p-6 lg:p-8"><!></section>');function jt(f,t){ve(t,!0);const o=(i,Q=X,g=X)=>{const O=_(()=>g()?"border-emerald-400 bg-emerald-50":"border-rose-300 bg-rose-50"),D=_(()=>g()?"border-emerald-400 bg-emerald-400 text-white":"border-rose-400 bg-rose-400 text-white");var B=yt(),k=a(B),h=a(k),H=a(h);{var W=G=>{ue(G,{class:"h-4 w-4"})},Y=G=>{je(G,{class:"h-4 w-4"})};E(H,G=>{g()?G(W):G(Y,!1)})}s(h);var R=A(h,2),ne=a(R),oe=a(ne,!0);s(ne);var ce=A(ne,2),ie=a(ce,!0);s(ce),s(R),s(k),s(B),T(G=>{K(B,1,`w-full rounded-2xl border-[1.5px] px-4 py-3 sm:px-5 sm:py-4 ${e(O)}`),K(h,1,`mt-1 inline-flex h-6 w-6 shrink-0 items-center justify-center rounded-full border font-semibold ${e(D)}`),L(oe,G),L(ie,Q())},[()=>p("Correct answer")]),y(i,B)},b=(i,Q=X,g=X)=>{const O=_(()=>t.selectedAnswer===g()),D=_(()=>t.question?.correctAnswer===g()),B=_(()=>t.confirmedAnswer?.selectedOption===g()),k=_(()=>e(l)?e(D)?"border-emerald-400 bg-emerald-50":e(B)?"border-rose-300 bg-rose-50":"border-gray-200 bg-gray-50":e(O)?"border-amber-300 bg-amber-50 ring-1 ring-amber-200":"border-gray-200 bg-white hover:border-amber-200 hover:bg-amber-50/50");var h=kt();h.__click=()=>m(g());var H=a(h),W=a(H);ht(W,()=>({showResult:e(l),isCorrectAnswer:e(D),isUserAnswer:e(B),isSelected:e(O)}));var Y=A(W,2),R=a(Y,!0);s(Y),s(H),s(h),T(()=>{h.disabled=e(l),K(h,1,`w-full rounded-2xl border-[1.5px] px-4 py-3 text-left transition focus-visible:outline focus-visible:outline-offset-2 focus-visible:outline-amber-400 disabled:cursor-not-allowed sm:px-5 sm:py-4 ${e(k)}`),L(R,Q())}),y(i,h)},w=(i,Q=X)=>{var g=St(),O=a(g),D=A(a(O),2),B=a(D),k=a(B,!0);s(B);var h=A(B,2),H=a(h,!0);s(h),s(D),s(O),s(g),T(W=>{L(k,W),L(H,Q())},[()=>p("Learn together")]),y(i,g)};let x=J(ee(xe));const C=me.subscribe(i=>{F(x,i,!0)});function p(i,Q){return te(i,{...Q,locale:e(x)})}const l=_(()=>!!t.confirmedAnswer);function m(i){e(l)||t.onSelectAnswer?.(i)}function d(){e(l)||t.onConfirmAnswer?.()}function n(){e(l)&&t.onNextQuestion?.()}function c(){e(l)&&t.onSubmit?.()}function v(){t.onPreviousQuestion?.()}fe(()=>{C()});var S=Pt(),M=a(S);{var q=i=>{var Q=Bt(),g=se(Q);{var O=j=>{var I=qt(),U=a(I,!0);s(I),T(()=>L(U,t.question.title)),y(j,I)};E(g,j=>{t.question.title&&j(O)})}var D=A(g,2),B=a(D),k=a(B),h=a(k,!0);s(k);var H=A(k,2),W=a(H,!0);s(H),s(B);var Y=A(B,2),R=a(Y),ne=a(R,!0);s(R),s(Y),s(D);var oe=A(D,2),ce=a(oe,!0);s(oe);var ie=A(oe,2),G=a(ie);{var Ce=j=>{var I=Qt();Pe(I,21,()=>t.question.options,Ue,(U,Z,$)=>{b(U,()=>e(Z),()=>$)}),s(I),bt(2,I,()=>wt,()=>({duration:500})),y(j,I)},Se=j=>{var I=It(),U=a(I),Z=a(U);o(Z,()=>t.question.options[t.question.correctAnswer],()=>t.confirmedAnswer?.isCorrect??!1),s(U);var $=A(U,2);{var r=u=>{w(u,()=>t.question.explanation)};E($,u=>{t.question.explanation&&u(r)})}s(I),y(j,I)};E(G,j=>{e(l)?j(Se,!1):j(Ce)})}s(ie);var ge=A(ie,2),le=a(ge);le.__click=v;var pe=A(a(le));s(le);var _e=A(le,2),qe=a(_e);{var we=j=>{var I=Lt();I.__click=d;var U=a(I),Z=A(U);ue(Z,{class:"h-4 w-4"}),s(I),T($=>{I.disabled=t.selectedAnswer===null,L(U,`${$??""} `)},[()=>p("Confirm answer")]),y(j,I)},Qe=j=>{var I=de(),U=se(I);{var Z=r=>{var u=zt();u.__click=n;var P=a(u),N=A(P);lt(N,{class:"h-4 w-4"}),s(u),T(V=>L(P,`${V??""} `),[()=>p("Next question")]),y(r,u)},$=r=>{var u=de(),P=se(u);{var N=V=>{var ae=Ot();ae.__click=c;var he=a(ae),ye=A(he);ue(ye,{class:"h-4 w-4"}),s(ae),T(Ie=>L(he,`${Ie??""} `),[()=>p("Submit quiz")]),y(V,ae)};E(P,V=>{t.allQuestionsAnswered&&V(N)},!0)}y(r,u)};E(U,r=>{t.isLastQuestion?r($,!1):r(Z)},!0)}y(j,I)};E(qe,j=>{e(l)?j(Qe,!1):j(we)})}s(_e),s(ge),T((j,I,U)=>{L(h,t.questionIndex+1),L(W,j),L(ne,I),L(ce,t.question.text),le.disabled=t.questionIndex===0,L(pe,` ${U??""}`)},[()=>p("Question {index} of {total}",{values:{index:String(t.questionIndex+1),total:String(t.totalQuestions)}}),()=>p("Select the best answer"),()=>p("Previous")]),y(i,Q)};E(M,i=>{t.question&&i(q)})}s(S),y(f,S),be()}Be(["click"]);const Te=(f,t=X)=>{const o=_(()=>t().tone==="amber"?{background:"bg-amber-50",ring:"ring-amber-100",label:"text-amber-600"}:{background:"bg-sky-50",ring:"ring-sky-100",label:"text-sky-600"});var b=Mt(),w=a(b),x=a(w,!0);s(w);var C=A(w,2),p=a(C,!0);s(C);var l=A(C,2),m=a(l,!0);s(l),s(b),T(()=>{K(b,1,`rounded-2xl px-5 py-4 text-center shadow-sm ring-1 ${e(o).background} ${e(o).ring}`),K(w,1,`text-xs font-medium tracking-wide uppercase ${e(o).label}`),L(x,t().label),L(p,t().primary),L(m,t().helper)}),y(f,b)};var Mt=z('<div><div> </div> <div class="text-2xl font-semibold text-gray-900 sm:text-3xl"> </div> <div class="text-sm text-gray-500"> </div></div>'),Rt=z('<div class="rounded-3xl bg-white p-6 shadow-sm ring-1 ring-amber-100 sm:p-8"><div class="flex flex-col gap-6 lg:flex-row lg:items-center lg:justify-between"><div class="max-w-2xl space-y-3"><h1 class="text-2xl font-semibold text-gray-900 sm:text-3xl lg:text-4xl"> </h1> <p class="text-base text-gray-600"> </p></div> <div class="flex flex-wrap items-center gap-4"><!> <!></div></div></div>');function Ft(f,t){ve(t,!0);let o=J(ee(xe));const b=me.subscribe(q=>{F(o,q,!0)});function w(q,i){return te(q,{...i,locale:e(o)})}const x=_(()=>Math.round(t.scorePercentage));fe(()=>{b()});var C=Rt(),p=a(C),l=a(p),m=a(l),d=a(m,!0);s(m);var n=A(m,2),c=a(n,!0);s(n),s(l);var v=A(l,2),S=a(v);{let q=_(()=>({label:w("Question"),primary:`${t.currentQuestion}`,helper:w("of {total}",{values:{total:String(t.totalQuestions)}}),tone:"amber"}));Te(S,()=>e(q))}var M=A(S,2);{let q=_(()=>({label:w("Current score"),primary:`${t.score}`,helper:w("{percent}%",{values:{percent:String(e(x))}}),tone:"sky"}));Te(M,()=>e(q))}s(v),s(p),s(C),T(()=>{L(d,t.title),L(c,t.message)}),y(f,C),be()}var Dt=z("<span> </span>"),Nt=z('<button type="button" class="transition hover:text-amber-600"> </button>'),Tt=z("<span>/</span>"),Et=z("<!> <!>",1),Ut=z('<div class="flex flex-wrap items-center justify-between gap-4"><div class="flex flex-wrap items-center gap-2 text-sm text-gray-500"></div> <button type="button" class="inline-flex items-center gap-2 rounded-full border border-amber-200 bg-white px-4 py-2 text-sm font-semibold text-amber-700 shadow-sm transition hover:border-amber-300 hover:text-amber-800"><svg class="h-4 w-4" viewBox="0 0 24 24" fill="none" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 9l-2 3m0 0l2 3m-2-3h8m4 0a9 9 0 11-18 0 9 9 0 0118 0z"></path></svg> </button></div>');function Ht(f,t){ve(t,!0);const o=(c,v=X)=>{var S=de(),M=se(S);{var q=Q=>{var g=Dt(),O=a(g,!0);s(g),T(()=>{K(g,1,`font-medium ${v().isActive?"text-gray-900":"hover:text-amber-600"}`),L(O,v().label)}),y(Q,g)},i=Q=>{var g=Nt();g.__click=()=>p(v());var O=a(g,!0);s(g),T(()=>L(O,v().label)),y(Q,g)};E(M,Q=>{v().isActive||!v().onSelect?Q(q):Q(i,!1)})}y(c,S)};let b=J(ee(xe));const w=me.subscribe(c=>{F(b,c,!0)});function x(c,v){return te(c,{...v,locale:e(b)})}function C(){t.onQuit?.()}function p(c){c.isActive||c.onSelect?.()}fe(()=>{w()});var l=Ut(),m=a(l);Pe(m,21,()=>t.crumbs,Ue,(c,v,S)=>{var M=Et(),q=se(M);o(q,()=>e(v));var i=A(q,2);{var Q=g=>{var O=Tt();y(g,O)};E(i,g=>{S<t.crumbs.length-1&&g(Q)})}y(c,M)}),s(m);var d=A(m,2);d.__click=C;var n=A(a(d));s(d),s(l),T(c=>L(n,` ${c??""}`),[()=>x("Quit Quiz")]),y(f,l),be()}Be(["click"]);var Wt=z('<div class="mx-auto max-w-7xl space-y-6"><!> <!> <div class="flex flex-col gap-6 lg:flex-row"><div class="hidden shrink-0 lg:block"><!></div> <div class="min-w-0 flex-1"><!></div></div></div>');function sr(f,t){ve(t,!0);const o=_(()=>Ze.params.id??"");let b=J(ee(xe));const w=me.subscribe(r=>{F(b,r,!0)}),x=_(()=>ot(e(o))),C=_(()=>j(e(x),e(b))),p=_(()=>e(C)?.questions??[]),l=_(()=>e(p).length);let m=J(ee(tt(rt))),d=J(ee([])),n=J(0),c=J(null),v=J(ee(new Date().toISOString())),S=!1,M=J(ee(Oe()));ze(()=>st.subscribe(u=>{F(m,u,!0),F(M,Oe(),!0),queueMicrotask(()=>{F(M,Oe(),!0)})}));const q=_(()=>e(p)[e(n)]),i=_(()=>e(d).filter(r=>r.isConfirmed&&typeof r.isCorrect=="boolean").map(r=>({questionIndex:r.questionIndex,selectedOption:r.selectedOption,isCorrect:!!r.isCorrect}))),Q=_(()=>e(d).find(r=>r.questionIndex===e(n))??null),g=_(()=>e(i).find(r=>r.questionIndex===e(n))??null),O=_(()=>!!e(Q)?.isConfirmed),D=_(()=>e(n)===e(l)-1),B=_(()=>e(i).length),k=_(()=>e(B)===e(l)),h=_(()=>e(i).filter(r=>r.isCorrect).length),H=_(()=>e(l)>0?e(h)/e(l)*100:0),W=_(()=>e(p).map((r,u)=>{const P=e(i).find(N=>N.questionIndex===u)??null;return{index:u,title:r.title??null,text:r.text,isCurrent:u===e(n),isAnswered:!!P,isCorrect:P?.isCorrect??null}})),Y=_(()=>te("Stay focused, trust your instincts, and remember every question is a chance to learn.",{locale:e(b)}));ze(()=>{const r=e(d).find(u=>u.questionIndex===e(n));F(c,r?.selectedOption??e(g)?.selectedOption??null,!0)}),ze(()=>{if(!e(o)||!e(x)||S)return;const r=e(m).inProgress[e(o)];if(r){F(n,r.currentQuestionIndex,!0);const P=r.responses??[];F(d,P.map(N=>({...N})),!0),F(v,r.startedAt??new Date().toISOString(),!0),F(c,P.find(N=>N.questionIndex===e(n))?.selectedOption??null,!0),S=!0;return}if(!e(M))return;const u=new Date().toISOString();F(v,u,!0),F(n,0),F(d,[],!0),Re(e(o),()=>({currentQuestionIndex:0,responses:[],startedAt:u,updatedAt:u,lastInteractionAt:u})),S=!0});function R(r){if(!e(o))return;const u=new Date().toISOString();Re(e(o),P=>{const N=P??{currentQuestionIndex:0,responses:[],startedAt:e(v),updatedAt:u,lastInteractionAt:u};return{...N,currentQuestionIndex:e(n),responses:e(d).map(V=>({...V})),startedAt:N.startedAt??e(v),updatedAt:u,lastInteractionAt:u,...r}})}function ne(r){const u=e(d).slice(),P=u.findIndex(V=>V.questionIndex===r.questionIndex),N={questionIndex:r.questionIndex,selectedOption:r.selectedOption??-1,isConfirmed:r.isConfirmed??!1,isCorrect:r.isCorrect??null};u[P>=0?P:u.length]={...P>=0?u[P]:N,...r},F(d,u,!0)}function oe(r){e(O)||(F(c,r,!0),ne({questionIndex:e(n),selectedOption:r,isConfirmed:!1,isCorrect:null}),R())}function ce(){if(e(c)===null||!e(q)||!e(o))return;const r=e(c)===e(q).correctAnswer;ne({questionIndex:e(n),selectedOption:e(c),isConfirmed:!0,isCorrect:r}),R()}function ie(){e(o)&&e(n)<e(l)-1&&(Me(n),R())}function G(){e(o)&&e(n)>0&&(Me(n,-1),R())}function Ce(r){e(o)&&(F(n,r,!0),R())}function Se(){if(!e(x)||!e(o))return;const r=new Date().toISOString(),u=nt({quiz:e(x),responses:e(i).map(P=>({...P})),totalQuestions:e(l),startedAt:e(v),completedAt:r});at(e(o),u),De(e(o)),ke(Ae("/quiz/[id]/result/[attemptId]",{id:e(o),attemptId:u.attemptId}))}function ge(){e(k)&&Se()}function le(){e(o)&&confirm(e(qe))&&(e(i).length===0&&Fe(),De(e(o)),ke(Ae("/quiz/[id]",{id:e(o)})))}function pe(){ke(Ae("/"))}function _e(){e(o)&&ke(Ae("/quiz/[id]",{id:e(o)}))}const qe=_(()=>te("Are you sure you want to quit? Your progress will be lost.",{locale:e(b)})),we=_(()=>e(C)?.title??te("Unknown Quiz",{locale:e(b)})),Qe=_(()=>[{label:te("Dashboard",{locale:e(b)}),onSelect:pe},{label:e(we),onSelect:_e},{label:te("Take Quiz",{locale:e(b)}),isActive:!0}]);Ke(()=>{const r=()=>{e(i).length===0&&Fe()};return window.addEventListener("beforeunload",r),()=>{window.removeEventListener("beforeunload",r)}}),fe(()=>{w()});function j(r,u){if(r)return r.content[u]??r.content.en??Object.values(r.content)[0]}var I=de(),U=se(I);{var Z=r=>{it(r,{onBack:pe})},$=r=>{var u=Wt(),P=a(u);Ht(P,{get crumbs(){return e(Qe)},onQuit:le});var N=A(P,2);{let Le=_(()=>e(n)+1);Ft(N,{get title(){return e(we)},get message(){return e(Y)},get currentQuestion(){return e(Le)},get totalQuestions(){return e(l)},get score(){return e(h)},get scorePercentage(){return e(H)}})}var V=A(N,2),ae=a(V),he=a(ae);pt(he,{get items(){return e(W)},onSelect:Ce}),s(ae);var ye=A(ae,2),Ie=a(ye);{let Le=_(()=>e(q)??null);jt(Ie,{get question(){return e(Le)},get questionIndex(){return e(n)},get totalQuestions(){return e(l)},get selectedAnswer(){return e(c)},get confirmedAnswer(){return e(g)},get isLastQuestion(){return e(D)},get allQuestionsAnswered(){return e(k)},onSelectAnswer:oe,onConfirmAnswer:ce,onNextQuestion:ie,onPreviousQuestion:G,onSubmit:ge})}s(ye),s(V),s(u),y(r,u)};E(U,r=>{!e(x)||!e(C)?r(Z):r($,!1)})}y(f,I),be()}export{sr as component};
