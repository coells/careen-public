import"../chunks/DsnmJJEf.js";import{h as oe,a5 as me,p as J,f as B,d as r,s as o,r as t,t as H,e as d,b as k,c as X,F as e,V as n,v as pe,T as ie,U as de,a as ce}from"../chunks/DYM3if8Z.js";import{a as O,s as Z,i as ae}from"../chunks/C7t0kvEG.js";import{g as le}from"../chunks/Dj72RIEW.js";import{r as ve}from"../chunks/DRm2eNDt.js";import{p as ue}from"../chunks/Bru5XCZD.js";import{f as ge,t as ee,d as Y,a as be,s as he,b as fe}from"../chunks/CwuGiosH.js";import{e as _e,i as ye,g as we}from"../chunks/C7JOgiKc.js";import{N as ke}from"../chunks/k5OSOW-I.js";import{h as qe}from"../chunks/C2rEQ277.js";function ze(b,a,s,C){var Q=b.__style;if(oe||Q!==a){var x=ge(a);(!oe||x!==b.getAttribute("style"))&&(x==null?b.removeAttribute("style"):b.style.cssText=x),b.__style=a}return C}var Se=B('<h2 class="mb-2 text-2xl font-semibold text-amber-800"> </h2>'),Ce=B('<div class="flex flex-col gap-3 sm:flex-row sm:justify-center"><button type="button" class="rounded-full bg-amber-500 px-6 py-3 text-sm font-semibold text-white transition hover:bg-amber-600"> </button> <button type="button" class="rounded-full border border-gray-200 bg-white px-6 py-3 text-sm font-semibold text-gray-700 transition hover:border-amber-200 hover:text-amber-600"> </button></div>'),Qe=B('<div class="mx-auto max-w-4xl"><div class="rounded-xl border border-amber-200 bg-amber-50 p-8 text-center"><!> <p class="mb-6 text-amber-700"> </p> <!></div></div>');function Te(b,a){J(a,!0);const s=()=>O(ee,"$t",C),[C,Q]=Z(),x=v=>{var p=Se(),g=r(p,!0);t(p),H(h=>d(g,h),[()=>s()("Attempt Not Found")]),k(v,p)},T=v=>{var p=Ce(),g=r(p);g.__click=f;var h=r(g,!0);t(g);var M=o(g,2);M.__click=u;var A=r(M,!0);t(M),t(p),H((L,$)=>{d(h,L),d(A,$)},[()=>s()("View quiz details"),()=>s()("Back to Dashboard")]),k(v,p)};function u(){a.onNavigateHome?.()}function f(){a.onViewQuiz?.()}var _=Qe(),i=r(_),c=r(i);x(c);var l=o(c,2),q=r(l,!0);t(l);var y=o(l,2);T(y),t(i),t(_),H(v=>d(q,v),[()=>s()("We couldn't find that quiz attempt. It may have been removed after clearing your progress.")]),k(b,_),X(),Q()}me(["click"]);var Ae=B('<div class="flex items-center gap-2 text-sm text-gray-500"><button type="button" class="transition hover:text-amber-600"> </button> <span>/</span> <button type="button" class="transition hover:text-amber-600"> </button> <span>/</span> <span class="font-medium text-gray-900"> </span></div>');function Me(b,a){J(a,!0);const s=()=>O(ee,"$t",C),[C,Q]=Z();function x(){a.onNavigateHome?.()}function T(){a.onViewQuiz?.()}var u=Ae(),f=r(u);f.__click=x;var _=r(f,!0);t(f);var i=o(f,4);i.__click=T;var c=r(i,!0);t(i);var l=o(i,4),q=r(l,!0);t(l),t(u),H((y,v)=>{d(_,y),d(c,a.quizTitle),d(q,v)},[()=>s()("Dashboard"),()=>s()("Results")]),k(b,u),X(),Q()}me(["click"]);var $e=pe('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"></path>'),Ie=pe('<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>'),Ne=B('<div class="mb-3 flex justify-center"><div><svg class="h-10 w-10" fill="none" stroke="currentColor" viewBox="0 0 24 24"><!></svg></div></div>'),Pe=B("<div><!> <h2> </h2> <p> </p></div>");function Be(b,a){J(a,!0);const s=()=>O(ee,"$t",C),[C,Q]=Z(),x=p=>{var g=Ne(),h=r(g),M=r(h),A=r(M);{var L=z=>{var w=$e();k(z,w)},$=z=>{var w=Ie();k(z,w)};ae(A,z=>{a.passed?z(L):z($,!1)})}t(M),t(h),t(g),H(()=>Y(h,1,`rounded-full p-3 shadow-sm ${e(u)}`)),k(p,g)},T=n(()=>a.passed?"bg-emerald-50 ring-emerald-100":"bg-amber-50 ring-amber-100"),u=n(()=>a.passed?"bg-emerald-400 text-white":"bg-amber-400 text-white"),f=n(()=>a.passed?s()("Nice work!"):s()("Keep going!")),_=n(()=>a.passed?s()("You passed the quiz. Celebrate the progress you made today."):s()("This attempt didn't pass, but every try sharpens your understanding."));var i=Pe(),c=r(i);x(c);var l=o(c,2),q=r(l,!0);t(l);var y=o(l,2),v=r(y,!0);t(y),t(i),H(()=>{Y(i,1,`rounded-3xl p-7 text-center shadow-sm ring-1 ${e(T)}`),Y(l,1,`mb-2 text-3xl font-semibold ${a.passed?"text-emerald-700":"text-amber-700"}`),d(q,e(f)),Y(y,1,`text-sm ${a.passed?"text-emerald-700/80":"text-amber-700/80"}`),d(v,e(_))}),k(b,i),X(),Q()}var Ve=B('<div class="rounded-3xl border border-amber-100/40 bg-white/90 p-6 shadow-sm sm:p-8"><div class="space-y-6"><div><h2 class="text-xs font-semibold tracking-[0.25em] text-amber-600 uppercase"> </h2> <h3 class="mt-2 text-xl font-semibold text-gray-900 sm:text-2xl"> </h3> <p class="mt-2 text-sm text-gray-600"><!></p></div> <div><p class="text-sm text-gray-700"> <span class="font-semibold text-gray-900"> </span> </p> <div class="mt-3 h-3 overflow-hidden rounded-full bg-gray-200"><div></div></div> <div class="mt-2 flex flex-wrap items-center justify-between gap-2 text-xs font-medium text-gray-500"><span> </span> <span class="text-right"> </span></div></div> <div><h4 class="mb-2 text-base font-semibold"> </h4> <p> </p></div></div></div>');function je(b,a){J(a,!0);const s=()=>O(ee,"$t",C),[C,Q]=Z(),x=n(()=>Math.min(100,Math.max(0,a.scorePercentage))),T=n(()=>Math.min(100,Math.max(0,a.passingScorePercentage))),u=n(()=>Math.round(e(x))),f=n(()=>Math.round(e(T))),_=n(()=>a.passed?"bg-emerald-400":"bg-amber-400"),i=n(()=>{if(a.passed)return s()("Goal reached");const re=Math.max(0,e(f)-e(u));return re>0?s()("{gap}% more to reach goal",{gap:String(re)}):s()("Right on the edge—almost there")}),c=[{min:100,title:"Flawless finish",body:"Every answer landed. Take a bow and share the win while it's fresh."},{min:90,title:"Mastery unlocked",body:"You're cruising at the top tier. A quick recap keeps that mastery sharp."},{min:80,title:"Strong command",body:"Most questions clicked. Sweep through the tricky notes and you'll be unstoppable."},{min:70,title:"Solid progress",body:"You're above the pass lane. Tighten a few edges and aim even higher next round."},{min:60,title:"On the rise",body:"Momentum is building. Revisit explanations, then swing back for the breakthrough."},{min:50,title:"Halfway there",body:"You've built a solid base. Reinforce the weak spots and you'll level up fast."},{min:0,title:"Warm-up phase",body:"Use the review to map the gaps, then retake while the material is fresh in mind."}],l=n(()=>c.find(ne=>e(u)>=ne.min)??c.at(-1)),q=n(()=>s()(e(l).title)),y=n(()=>s()(e(l).body));var v=Ve(),p=r(v),g=r(p),h=r(g),M=r(h,!0);t(h);var A=o(h,2),L=r(A,!0);t(A);var $=o(A,2),z=r($);qe(z,()=>a.quizDescription),t($),t(g);var w=o(g,2),R=r(w),G=r(R),V=o(G),U=r(V);t(V);var te=o(V);t(R);var W=o(R,2),m=r(W);t(W);var P=o(W,2),S=r(P),j=r(S,!0);t(S);var I=o(S,2),N=r(I,!0);t(I),t(P),t(w);var F=o(w,2),D=r(F),K=r(D,!0);t(D);var E=o(D,2),se=r(E,!0);t(E),t(F),t(p),t(v),H((re,ne,xe)=>{d(M,re),d(L,a.quizTitle),d(G,`${ne??""} `),d(U,`${a.correctAnswers??""}/${a.totalQuestions??""}`),d(te,` (${e(u)??""}%).`),Y(m,1,`h-full rounded-full transition-all ${e(_)}`),ze(m,`width: ${e(x)}%`),d(j,xe),d(N,e(i)),Y(F,1,`rounded-2xl p-5 text-sm ${a.passed?"bg-emerald-50/80 text-emerald-700":"bg-amber-50/80 text-amber-700"}`),d(K,e(q)),d(se,e(y))},[()=>s()("Performance summary"),()=>s()("Your score is"),()=>s()("Passing score · {percent}%",{percent:String(e(f))})]),k(b,v),X(),Q()}var Fe=B('<p class="rounded-xl bg-white/70 p-3 text-sm text-gray-600"> </p>'),He=B('<div><div class="flex flex-col gap-2 sm:flex-row sm:items-center sm:justify-between"><div><p class="text-sm font-semibold text-gray-900"> </p> <p class="text-base text-gray-700"> </p></div> <div> </div></div> <div class="mt-3 space-y-2 text-sm text-gray-700"><p><span class="font-semibold"> </span> </p> <p><span class="font-semibold"> </span> </p> <!></div></div>'),Le=B('<div class="rounded-3xl bg-white p-8 shadow-sm ring-1 ring-gray-100"><h2 class="mb-4 text-2xl font-semibold text-gray-900"> </h2> <div class="space-y-4"></div></div>');function Re(b,a){J(a,!0);const s=()=>O(ee,"$t",C),[C,Q]=Z(),x=(i,c=ie,l=ie)=>{var q=He(),y=r(q),v=r(y),p=r(v),g=r(p,!0);t(p);var h=o(p,2),M=r(h,!0);t(h),t(v);var A=o(v,2),L=r(A,!0);t(A),t(y);var $=o(y,2),z=r($),w=r(z),R=r(w,!0);t(w);var G=o(w);t(z);var V=o(z,2),U=r(V),te=r(U,!0);t(U);var W=o(U);t(V);var m=o(V,2);{var P=S=>{var j=Fe(),I=r(j,!0);t(j),H(()=>d(I,c().question.explanation)),k(S,j)};ae(m,S=>{c().question.explanation&&S(P)})}t($),t(q),H((S,j,I,N)=>{Y(q,1,`rounded-2xl border px-5 py-4 transition ${c().isCorrect?"border-emerald-200 bg-emerald-50":"border-rose-200 bg-rose-50"}`),d(g,S),d(M,c().question.text),Y(A,1,`text-sm font-semibold ${c().isCorrect?"text-emerald-600":"text-rose-600"}`),d(L,j),d(R,I),d(G,` ${(c().userAnswerIndex===null?"—":c().question.options[c().userAnswerIndex]??"—")??""}`),d(te,N),d(W,` ${c().question.options[c().question.correctAnswer]??""}`)},[()=>s()("Question {index}",{index:String(l()+1)}),()=>c().isCorrect?s()("Correct"):s()("Incorrect"),()=>s()("Your answer:"),()=>s()("Correct answer:")]),k(i,q)};var T=Le(),u=r(T),f=r(u,!0);t(u);var _=o(u,2);_e(_,21,()=>a.items,ye,(i,c,l)=>{x(i,()=>e(c),()=>l)}),t(_),t(T),H(i=>d(f,i),[()=>s()("Question review")]),k(b,T),X(),Q()}var De=B('<div class="mx-auto max-w-4xl space-y-8"><!> <!> <!> <!></div>');function et(b,a){J(a,!0);const s=()=>O(be,"$activeLocale",x),C=()=>O(fe,"$sessionStore",x),Q=()=>O(ee,"$t",x),[x,T]=Z(),u=n(()=>ue.params.id??""),f=n(()=>ue.params.attemptId??""),_=n(()=>we(e(u))),i=n(()=>G(e(_),s()));let c=n(C);const l=n(()=>e(u)&&e(f)?he.getAttemptById(e(c),e(u),e(f)):null),q=n(()=>e(_)?.passingScore??.8),y=n(()=>e(q)*100),v=n(()=>e(i)?.questions.length??e(l)?.responses.length??0),p=n(()=>e(l)?e(l).responses.filter(m=>m.isCorrect).length:0),g=n(()=>e(v)>0?e(p)/e(v)*100:0),h=n(()=>!!e(l)?.passed);function M(m,P){const S=m.map((I,N)=>{const F=P.find(E=>E.questionIndex===N),D=F?.selectedOption??null,K=F?.isCorrect??!1;return{question:I,userAnswerIndex:D,isCorrect:K}});return{correctCount:S.filter(I=>I.isCorrect).length,items:S}}const A=n(()=>!e(i)||!e(l)?null:M(e(i).questions,e(l).responses)),L=n(()=>e(A)?.items??[]),$=n(()=>e(i)?.title??Q()("Unknown Quiz")),z=n(()=>e(i)?.description??"");function w(){le(ve("/"))}function R(){le(ve("/quiz/[id]",{id:e(u)}))}function G(m,P){if(m)return m.templates[P]??m.templates.en??Object.values(m.templates)[0]}var V=de(),U=ce(V);{var te=m=>{ke(m,{onBack:w})},W=m=>{var P=de(),S=ce(P);{var j=N=>{Te(N,{onNavigateHome:w,onViewQuiz:R})},I=N=>{var F=De(),D=r(F);Me(D,{get quizTitle(){return e($)},onNavigateHome:w,onViewQuiz:R});var K=o(D,2);Be(K,{get passed(){return e(h)}});var E=o(K,2);je(E,{get quizTitle(){return e($)},get quizDescription(){return e(z)},get scorePercentage(){return e(g)},get correctAnswers(){return e(p)},get totalQuestions(){return e(v)},get passingScorePercentage(){return e(y)},get passed(){return e(h)}});var se=o(E,2);Re(se,{get items(){return e(L)}}),t(F),k(N,F)};ae(S,N=>{e(l)?N(I,!1):N(j)},!0)}k(m,P)};ae(U,m=>{!e(_)||!e(i)?m(te):m(W,!1)})}k(b,V),X(),T()}export{et as component};
