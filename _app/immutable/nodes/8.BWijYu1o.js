import"../chunks/DsnmJJEf.js";import{V as de,p as O,h as U,i as V,j as E,k as Y,f as q,d as a,r,s as o,n as F,b as S,t as P,e as g,c as N,m as n,u as Q,X as he,T as _e}from"../chunks/QPPwlIfO.js";import{i as se}from"../chunks/CyZThD_T.js";import{g as te}from"../chunks/DjxPWu2n.js";import{r as re}from"../chunks/BIQtK9MX.js";import{e as ie,i as le,D as ve,g as ye}from"../chunks/BGaiCmkP.js";import{D as Z,l as G,s as $,b as we,k as ke,t as J,c as ze,d as Ce,p as Ie,j as Se}from"../chunks/CzlDjXZa.js";import{a as qe,C as Le}from"../chunks/CXDaMHZ5.js";import{C as Ae,X as Me}from"../chunks/BwO8awvU.js";import{C as De}from"../chunks/B8P5_eRE.js";import{P as Te}from"../chunks/Dqk-nzet.js";import{c as Qe}from"../chunks/v5qLuJpu.js";import{C as Pe}from"../chunks/Cj1XjhMs.js";var Re=q('<span class="rounded bg-gray-100 px-2 py-0.5 text-xs text-gray-600"> </span>'),Be=q('<div class="flex flex-wrap gap-1"></div>'),je=q('<div class="flex-1"><div class="mb-2 flex flex-wrap items-center gap-2 sm:gap-3"><h3 class="text-lg font-semibold text-gray-900"> </h3> <!></div> <div class="flex flex-wrap items-center gap-4 text-sm text-gray-600"><div class="flex items-center gap-1"><!> <span> </span></div> <div class="flex items-center gap-1"><!> <span> </span></div> <!></div></div>'),Fe=q('<div class="flex flex-wrap items-center gap-6"><div class="text-center"><div> </div> <div class="text-xs text-gray-600"> </div></div> <div class="relative h-16 w-16"><svg class="h-16 w-16 -rotate-90 transform"><circle cx="32" cy="32" r="28" stroke="currentColor" stroke-width="4" fill="none" class="text-gray-200"></circle><circle cx="32" cy="32" r="28" stroke="currentColor" stroke-width="4" fill="none" stroke-linecap="round"></circle></svg></div></div>'),Ue=q('<div class="flex flex-col gap-2 sm:flex-row xl:flex-col"><button type="button" class="w-full rounded-lg bg-amber-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-amber-700 sm:w-auto"> </button> <button type="button" class="w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 sm:w-auto"> </button></div>'),Ve=q("<span><!> </span>"),Ee=q('<div class="p-6 transition-colors hover:bg-gray-50"><div class="flex flex-col gap-6 xl:flex-row xl:items-center xl:justify-between"><!> <!> <!></div></div>'),He=q('<div class="rounded-2xl bg-white shadow-sm ring-1 ring-gray-100"><div class="border-b p-6"><h2 class="text-2xl font-bold text-gray-900"> </h2> <p class="text-sm text-gray-700"> </p></div> <div class="divide-y"></div></div>');function Xe(L,c){O(c,!0);const m=(v,e=F)=>{var t=je(),s=a(t),i=a(s),b=a(i,!0);r(i);var _=o(i,2);f(_,()=>e().passed),r(s);var D=o(s,2),I=a(D),w=a(I);qe(w,{class:"h-4 w-4 text-gray-500"});var B=o(w,2),K=a(B,!0);r(B),r(I);var H=o(I,2),oe=a(H);De(oe,{class:"h-4 w-4 text-gray-500"});var ne=o(oe,2),ue=a(ne,!0);r(ne),r(H);var me=o(H,2);{var ge=X=>{var W=Be();ie(W,21,()=>e().quizCategories,le,(xe,be)=>{var ee=Re(),fe=a(ee,!0);r(ee),P(pe=>g(fe,pe),[()=>u(n(be))]),S(xe,ee)}),r(W),S(X,W)};se(me,X=>{e().quizCategories.length>0&&X(ge)})}r(D),r(t),P(X=>{g(b,e().quizTitle),g(K,e().completedAtLabel),g(ue,X)},[()=>u("Time: {duration}",{values:{duration:e().durationLabel}})]),S(v,t)},y=(v,e=F)=>{var t=Fe(),s=a(t),i=a(s),b=a(i);r(i);var _=o(i,2),D=a(_,!0);r(_),r(s);var I=o(s,2),w=a(I),B=o(a(w));r(w),r(I),r(t),P((K,H)=>{$(i,1,`text-2xl font-bold ${e().passed?"text-green-600":"text-red-600"} sm:text-3xl`),g(b,`${K??""}%`),g(D,H),we(B,"stroke-dasharray",`${x*e().scorePercentage/100} ${x}`),$(B,0,ke(e().passed?"text-green-500":"text-red-500"))},[()=>Math.round(e().scorePercentage),()=>u("{score}/{total} correct",{values:{score:String(e().score),total:String(e().totalQuestions)}})]),S(v,t)},d=(v,e=F)=>{var t=Ue(),s=a(t);s.__click=()=>p(e());var i=a(s,!0);r(s);var b=o(s,2);b.__click=()=>k(e());var _=a(b,!0);r(b),r(t),P((D,I)=>{g(i,D),g(_,I)},[()=>u("View Details"),()=>u("Retake Quiz")]),S(v,t)},f=(v,e=F)=>{const t=Q(()=>e()?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),s=Q(()=>e()?u("Passed"):u("Failed"));var i=Ve(),b=a(i);{var _=w=>{Ae(w,{class:"h-3 w-3"})},D=w=>{Me(w,{class:"h-3 w-3"})};se(b,w=>{e()?w(_):w(D,!1)})}var I=o(b);r(i),P(()=>{$(i,1,`flex items-center gap-1 rounded-full px-2 py-1 text-xs font-medium ${n(t)}`),g(I,` ${n(s)??""}`)}),S(v,i)},x=2*Math.PI*28;function p(v){c.viewResult?.({attemptId:v.attemptId,quizId:v.quizId})}function k(v){c.retakeQuiz?.({quizId:v.quizId})}let l=U(V(Z));const M=G.subscribe(v=>{E(l,v,!0)});function u(v,e){return J(v,{...e,locale:n(l)})}Y(()=>{M()});var A=He(),h=a(A),z=a(h),C=a(z,!0);r(z);var T=o(z,2),R=a(T,!0);r(T),r(h);var j=o(h,2);ie(j,21,()=>c.attempts,le,(v,e)=>{var t=Ee(),s=a(t),i=a(s);m(i,()=>n(e));var b=o(i,2);y(b,()=>n(e));var _=o(b,2);d(_,()=>n(e)),r(s),r(t),S(v,t)}),r(j),r(A),P((v,e)=>{g(C,v),g(R,e)},[()=>u("Recent Attempts"),()=>u("Your quiz history and performance")]),S(L,A),N()}de(["click"]);var $e=q('<div class="rounded-xl border border-gray-200 bg-white p-12 text-center shadow-sm"><div class="mb-4 flex justify-center"><!></div> <h3 class="mb-2 text-xl font-semibold text-gray-900"> </h3> <p class="mb-6 text-gray-600"> </p> <button type="button" class="inline-block rounded-lg bg-amber-500 px-6 py-3 font-medium text-white transition-colors hover:bg-amber-600"> </button></div>');function Oe(L,c){O(c,!0);let m=U(V(Z));const y=G.subscribe(C=>{E(m,C,!0)});function d(C,T){return J(C,{...T,locale:n(m)})}function f(){c.browse?.()}Y(()=>{y()});var x=$e(),p=a(x),k=a(p);ve(k,{class:"h-16 w-16 text-gray-400"}),r(p);var l=o(p,2),M=a(l,!0);r(l);var u=o(l,2),A=a(u,!0);r(u);var h=o(u,2);h.__click=f;var z=a(h,!0);r(h),r(x),P((C,T,R)=>{g(M,C),g(A,T),g(z,R)},[()=>d("No quiz attempts yet"),()=>d("Start taking quizzes to see your results here!"),()=>d("Browse Quizzes")]),S(L,x),N()}de(["click"]);const ce=(L,c=F,m=F)=>{var y=Ye(),d=a(y,!0);r(y),P(()=>{$(y,1,`inline-block rounded-lg bg-amber-200/70 px-3 align-middle ${m()}`),g(d,c())}),S(L,y)};var Ye=q("<span> </span>"),Ne=q('<h1 class="hero-pop mb-6 text-4xl leading-tight font-semibold tracking-tight sm:mb-8 sm:text-5xl"> <!> <br class="hidden sm:block"/> <!> <br class="hidden sm:block"/></h1>');function Ze(L,c){O(c,!0);let m=U(V(Z));const y=G.subscribe(f=>{E(m,f,!0)});function d(f,x){return J(f,{...x,locale:n(m)})}Y(()=>{y()}),Te(L,{children:(f,x)=>{var p=Ne(),k=a(p),l=o(k);{let h=Q(()=>d("performance"));ce(l,()=>n(h),()=>"-rotate-1")}var M=o(l),u=o(M,3);{let h=Q(()=>d("progress"));ce(u,()=>n(h),()=>"rotate-1")}var A=o(u);he(),r(p),P((h,z,C)=>{g(k,`${h??""} `),g(M,` ${z??""} `),g(A,` ${C??""} `)},[()=>d("Your"),()=>d("and"),()=>d("over time")]),S(f,p)},$$slots:{default:!0}}),N()}const ae=(L,c)=>{let m=()=>c?.().title,y=()=>c?.().value,d=()=>c?.().icon,f=()=>c?.().iconClass,x=()=>c?.().badgeClass;var p=Ge(),k=a(p),l=a(k),M=a(l);{let T=Q(()=>`h-6 w-6 ${f()}`);Qe(M,d,(R,j)=>{j(R,{get class(){return n(T)}})})}r(l);var u=o(l,2),A=a(u),h=a(A,!0);r(A);var z=o(A,2),C=a(z,!0);r(z),r(u),r(k),r(p),P(()=>{$(l,1,`rounded-xl p-3 ${x()}`),g(h,m()),g(C,y())}),S(L,p)};var Ge=q('<div class="rounded-2xl bg-white p-6 shadow-sm ring-1 ring-amber-100"><div class="flex items-center"><div><!></div> <div class="ml-4"><p class="text-sm font-medium text-gray-600"> </p> <p class="text-2xl font-bold text-gray-900"> </p></div></div></div>'),Je=q('<div class="mb-8 grid grid-cols-1 gap-6 md:grid-cols-3"><!> <!> <!></div>');function Ke(L,c){O(c,!0);let m=U(V(Z));const y=G.subscribe(l=>{E(m,l,!0)});function d(l,M){return J(l,{...M,locale:n(m)})}Y(()=>{y()});var f=Je(),x=a(f);{let l=Q(()=>({title:d("Total Attempts"),value:c.stats.totalAttempts.toString(),icon:ve,iconClass:"text-amber-700",badgeClass:"bg-gray-50"}));ae(x,()=>n(l))}var p=o(x,2);{let l=Q(()=>({title:d("Passed"),value:c.stats.passedAttempts.toString(),icon:Pe,iconClass:"text-emerald-600",badgeClass:"bg-gray-50"}));ae(p,()=>n(l))}var k=o(p,2);{let l=Q(()=>({title:d("Avg Score"),value:`${Math.round(c.stats.averageScore)/10}`,icon:Le,iconClass:"text-sky-600",badgeClass:"bg-gray-50"}));ae(k,()=>n(l))}r(f),S(L,f),N()}var We=q('<div class="space-y-8"><!> <!> <!></div>');function mt(L,c){O(c,!0);let m=U(V(Z));const y=G.subscribe(e=>{E(m,e,!0)});function d(e,t){return J(e,{...t,locale:n(m)})}let f=U(V(ze(Ce)));_e(()=>Ie.subscribe(t=>{E(f,t,!0)}));const x=Q(()=>Se(n(f))),p=Q(()=>{const e=n(x).length,t=n(x).filter(i=>i.passed).length,s=e>0?n(x).reduce((i,b)=>i+b.percentage,0)/e:0;return{totalAttempts:e,passedAttempts:t,averageScore:s}}),k=Q(()=>{const e=n(m);return[...n(x)].sort((t,s)=>new Date(s.completedAt).getTime()-new Date(t.completedAt).getTime()).map(t=>{const s=ye(t.quizId),i=s?s.content[e]??s.content.en??Object.values(s.content)[0]:void 0,b=i?.questions.length??t.responses.length,_=new Date(t.completedAt);return{attemptId:t.attemptId,quizId:t.quizId,quizTitle:i?.title??d("Unknown Quiz"),quizCategories:s?.categories??[],scorePercentage:t.percentage,score:t.score,totalQuestions:b,passed:t.passed,completedAtLabel:l(_),durationLabel:M(t.durationSeconds)}})});function l(e){const t=new Date,s=Math.trunc((e.getTime()-t.getTime())/1e3),i=Math.abs(s),b=n(m)==="cs"?"cs":"en",_=new Intl.RelativeTimeFormat(b,{numeric:"auto"});if(i<60)return _.format(s,"second");const D=Math.trunc(s/60);if(Math.abs(D)<60)return _.format(D,"minute");const I=Math.trunc(D/60);if(Math.abs(I)<24)return _.format(I,"hour");const w=Math.trunc(I/24);if(Math.abs(w)<7)return _.format(w,"day");const B=n(m)==="cs"?"cs-CZ":"en-US";return e.toLocaleDateString(B,{year:"numeric",month:"short",day:"numeric"})}function M(e){const t=Math.floor(e/60),s=e%60;return d("{minutes}m {seconds}s",{values:{minutes:String(t),seconds:String(s)}})}function u(e,t){te(re("/quiz/[id]/result/[attemptId]",{id:t,attemptId:e}))}function A(e){te(re("/quiz/[id]/take",{id:e}))}function h(){te(re("/quizzes"))}Y(()=>{y()});var z=We(),C=a(z);Ze(C,{});var T=o(C,2);Ke(T,{get stats(){return n(p)}});var R=o(T,2);{var j=e=>{Xe(e,{get attempts(){return n(k)},viewResult:({attemptId:t,quizId:s})=>u(t,s),retakeQuiz:({quizId:t})=>A(t)})},v=e=>{Oe(e,{browse:h})};se(R,e=>{n(k).length>0?e(j):e(v,!1)})}r(z),S(L,z),N()}export{mt as component};
