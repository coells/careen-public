import"../chunks/DsnmJJEf.js";import{U as de,p as O,h as F,i as E,j as H,o as Y,f as L,d as a,r,s as o,n as U,b as q,t as P,e as m,c as N,l as n,u as Q,X as he,R as _e}from"../chunks/CfBoo2H-.js";import{i as se}from"../chunks/4vEJpibb.js";import{g as te}from"../chunks/BLCDj7GJ.js";import{D as Z,l as G,s as $,a as ye,j as we,t as J,d as ze,p as Ce,h as ke,r as re}from"../chunks/X1k0v5PN.js";import{e as ie,i as le,D as ve,g as Ie}from"../chunks/B2GH-4Ne.js";import{a as qe,C as Le}from"../chunks/C2o671vr.js";import{C as Se,X as Ae}from"../chunks/CZFOq_rM.js";import{C as Me}from"../chunks/lutr_CAZ.js";import{P as De}from"../chunks/9wToOcbh.js";import{c as Te}from"../chunks/ICQoBBlf.js";import{C as Qe}from"../chunks/Dxy5Q5Ft.js";var Pe=L('<span class="rounded bg-gray-100 px-2 py-0.5 text-xs text-gray-600"> </span>'),Re=L('<div class="flex flex-wrap gap-1"></div>'),Be=L('<div class="flex-1"><div class="mb-2 flex flex-wrap items-center gap-2 sm:gap-3"><h3 class="text-lg font-semibold text-gray-900"> </h3> <!></div> <div class="flex flex-wrap items-center gap-4 text-sm text-gray-600"><div class="flex items-center gap-1"><!> <span> </span></div> <div class="flex items-center gap-1"><!> <span> </span></div> <!></div></div>'),je=L('<div class="flex flex-wrap items-center gap-6"><div class="text-center"><div> </div> <div class="text-xs text-gray-600"> </div></div> <div class="relative h-16 w-16"><svg class="h-16 w-16 -rotate-90 transform"><circle cx="32" cy="32" r="28" stroke="currentColor" stroke-width="4" fill="none" class="text-gray-200"></circle><circle cx="32" cy="32" r="28" stroke="currentColor" stroke-width="4" fill="none" stroke-linecap="round"></circle></svg></div></div>'),Ue=L('<div class="flex flex-col gap-2 sm:flex-row xl:flex-col"><button type="button" class="w-full rounded-lg bg-amber-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-amber-700 sm:w-auto"> </button> <button type="button" class="w-full rounded-lg border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 transition-colors hover:bg-gray-50 sm:w-auto"> </button></div>'),Fe=L("<span><!> </span>"),Ee=L('<div class="p-6 transition-colors hover:bg-gray-50"><div class="flex flex-col gap-6 xl:flex-row xl:items-center xl:justify-between"><!> <!> <!></div></div>'),He=L('<div class="rounded-2xl bg-white shadow-sm ring-1 ring-gray-100"><div class="border-b p-6"><h2 class="text-2xl font-bold text-gray-900"> </h2> <p class="text-sm text-gray-700"> </p></div> <div class="divide-y"></div></div>');function Ve(S,c){O(c,!0);const g=(v,e=U)=>{var t=Be(),s=a(t),i=a(s),b=a(i,!0);r(i);var _=o(i,2);f(_,()=>e().passed),r(s);var D=o(s,2),I=a(D),w=a(I);qe(w,{class:"h-4 w-4 text-gray-500"});var B=o(w,2),K=a(B,!0);r(B),r(I);var V=o(I,2),oe=a(V);Me(oe,{class:"h-4 w-4 text-gray-500"});var ne=o(oe,2),ue=a(ne,!0);r(ne),r(V);var ge=o(V,2);{var me=X=>{var W=Re();ie(W,21,()=>e().quizCategories,le,(xe,be)=>{var ee=Pe(),fe=a(ee,!0);r(ee),P(pe=>m(fe,pe),[()=>u(n(be))]),q(xe,ee)}),r(W),q(X,W)};se(ge,X=>{e().quizCategories.length>0&&X(me)})}r(D),r(t),P(X=>{m(b,e().quizTitle),m(K,e().completedAtLabel),m(ue,X)},[()=>u("Time: {duration}",{values:{duration:e().durationLabel}})]),q(v,t)},y=(v,e=U)=>{var t=je(),s=a(t),i=a(s),b=a(i);r(i);var _=o(i,2),D=a(_,!0);r(_),r(s);var I=o(s,2),w=a(I),B=o(a(w));r(w),r(I),r(t),P((K,V)=>{$(i,1,`text-2xl font-bold ${e().passed?"text-green-600":"text-red-600"} sm:text-3xl`),m(b,`${K??""}%`),m(D,V),ye(B,"stroke-dasharray",`${x*e().scorePercentage/100} ${x}`),$(B,0,we(e().passed?"text-green-500":"text-red-500"))},[()=>Math.round(e().scorePercentage),()=>u("{score}/{total} correct",{values:{score:String(e().score),total:String(e().totalQuestions)}})]),q(v,t)},d=(v,e=U)=>{var t=Ue(),s=a(t);s.__click=()=>p(e());var i=a(s,!0);r(s);var b=o(s,2);b.__click=()=>z(e());var _=a(b,!0);r(b),r(t),P((D,I)=>{m(i,D),m(_,I)},[()=>u("View Details"),()=>u("Retake Quiz")]),q(v,t)},f=(v,e=U)=>{const t=Q(()=>e()?"bg-green-100 text-green-700":"bg-red-100 text-red-700"),s=Q(()=>e()?u("Passed"):u("Failed"));var i=Fe(),b=a(i);{var _=w=>{Se(w,{class:"h-3 w-3"})},D=w=>{Ae(w,{class:"h-3 w-3"})};se(b,w=>{e()?w(_):w(D,!1)})}var I=o(b);r(i),P(()=>{$(i,1,`flex items-center gap-1 rounded-full px-2 py-1 text-xs font-medium ${n(t)}`),m(I,` ${n(s)??""}`)}),q(v,i)},x=2*Math.PI*28;function p(v){c.viewResult?.({attemptId:v.attemptId,quizId:v.quizId})}function z(v){c.retakeQuiz?.({quizId:v.quizId})}let l=F(E(Z));const M=G.subscribe(v=>{H(l,v,!0)});function u(v,e){return J(v,{...e,locale:n(l)})}Y(()=>{M()});var A=He(),h=a(A),C=a(h),k=a(C,!0);r(C);var T=o(C,2),R=a(T,!0);r(T),r(h);var j=o(h,2);ie(j,21,()=>c.attempts,le,(v,e)=>{var t=Ee(),s=a(t),i=a(s);g(i,()=>n(e));var b=o(i,2);y(b,()=>n(e));var _=o(b,2);d(_,()=>n(e)),r(s),r(t),q(v,t)}),r(j),r(A),P((v,e)=>{m(k,v),m(R,e)},[()=>u("Recent Attempts"),()=>u("Your quiz history and performance")]),q(S,A),N()}de(["click"]);var Xe=L('<div class="rounded-xl border border-gray-200 bg-white p-12 text-center shadow-sm"><div class="mb-4 flex justify-center"><!></div> <h3 class="mb-2 text-xl font-semibold text-gray-900"> </h3> <p class="mb-6 text-gray-600"> </p> <button type="button" class="inline-block rounded-lg bg-amber-500 px-6 py-3 font-medium text-white transition-colors hover:bg-amber-600"> </button></div>');function $e(S,c){O(c,!0);let g=F(E(Z));const y=G.subscribe(k=>{H(g,k,!0)});function d(k,T){return J(k,{...T,locale:n(g)})}function f(){c.browse?.()}Y(()=>{y()});var x=Xe(),p=a(x),z=a(p);ve(z,{class:"h-16 w-16 text-gray-400"}),r(p);var l=o(p,2),M=a(l,!0);r(l);var u=o(l,2),A=a(u,!0);r(u);var h=o(u,2);h.__click=f;var C=a(h,!0);r(h),r(x),P((k,T,R)=>{m(M,k),m(A,T),m(C,R)},[()=>d("No quiz attempts yet"),()=>d("Start taking quizzes to see your results here!"),()=>d("Browse Quizzes")]),q(S,x),N()}de(["click"]);const ce=(S,c=U,g=U)=>{var y=Oe(),d=a(y,!0);r(y),P(()=>{$(y,1,`inline-block rounded-lg bg-amber-200/70 px-3 align-middle ${g()}`),m(d,c())}),q(S,y)};var Oe=L("<span> </span>"),Ye=L('<h1 class="hero-pop mb-6 text-4xl leading-tight font-semibold tracking-tight sm:mb-8 sm:text-5xl"> <!> <br class="hidden sm:block"/> <!> <br class="hidden sm:block"/></h1>');function Ne(S,c){O(c,!0);let g=F(E(Z));const y=G.subscribe(f=>{H(g,f,!0)});function d(f,x){return J(f,{...x,locale:n(g)})}Y(()=>{y()}),De(S,{children:(f,x)=>{var p=Ye(),z=a(p),l=o(z);{let h=Q(()=>d("performance"));ce(l,()=>n(h),()=>"-rotate-1")}var M=o(l),u=o(M,3);{let h=Q(()=>d("progress"));ce(u,()=>n(h),()=>"rotate-1")}var A=o(u);he(),r(p),P((h,C,k)=>{m(z,`${h??""} `),m(M,` ${C??""} `),m(A,` ${k??""} `)},[()=>d("Your"),()=>d("and"),()=>d("over time")]),q(f,p)},$$slots:{default:!0}}),N()}const ae=(S,c)=>{let g=()=>c?.().title,y=()=>c?.().value,d=()=>c?.().icon,f=()=>c?.().iconClass,x=()=>c?.().badgeClass;var p=Ze(),z=a(p),l=a(z),M=a(l);{let T=Q(()=>`h-6 w-6 ${f()}`);Te(M,d,(R,j)=>{j(R,{get class(){return n(T)}})})}r(l);var u=o(l,2),A=a(u),h=a(A,!0);r(A);var C=o(A,2),k=a(C,!0);r(C),r(u),r(z),r(p),P(()=>{$(l,1,`rounded-xl p-3 ${x()}`),m(h,g()),m(k,y())}),q(S,p)};var Ze=L('<div class="rounded-2xl bg-white p-6 shadow-sm ring-1 ring-amber-100"><div class="flex items-center"><div><!></div> <div class="ml-4"><p class="text-sm font-medium text-gray-600"> </p> <p class="text-2xl font-bold text-gray-900"> </p></div></div></div>'),Ge=L('<div class="mb-8 grid grid-cols-1 gap-6 md:grid-cols-3"><!> <!> <!></div>');function Je(S,c){O(c,!0);let g=F(E(Z));const y=G.subscribe(l=>{H(g,l,!0)});function d(l,M){return J(l,{...M,locale:n(g)})}Y(()=>{y()});var f=Ge(),x=a(f);{let l=Q(()=>({title:d("Total Attempts"),value:c.stats.totalAttempts.toString(),icon:ve,iconClass:"text-amber-700",badgeClass:"bg-gray-50"}));ae(x,()=>n(l))}var p=o(x,2);{let l=Q(()=>({title:d("Passed"),value:c.stats.passedAttempts.toString(),icon:Qe,iconClass:"text-emerald-600",badgeClass:"bg-gray-50"}));ae(p,()=>n(l))}var z=o(p,2);{let l=Q(()=>({title:d("Avg Score"),value:`${Math.round(c.stats.averageScore)/10}`,icon:Le,iconClass:"text-sky-600",badgeClass:"bg-gray-50"}));ae(z,()=>n(l))}r(f),q(S,f),N()}var Ke=L('<div class="space-y-8"><!> <!> <!></div>');function vt(S,c){O(c,!0);let g=F(E(Z));const y=G.subscribe(e=>{H(g,e,!0)});function d(e,t){return J(e,{...t,locale:n(g)})}let f=F(E(structuredClone(ze)));_e(()=>Ce.subscribe(t=>{H(f,t,!0)}));const x=Q(()=>ke(n(f))),p=Q(()=>{const e=n(x).length,t=n(x).filter(i=>i.passed).length,s=e>0?n(x).reduce((i,b)=>i+b.percentage,0)/e:0;return{totalAttempts:e,passedAttempts:t,averageScore:s}}),z=Q(()=>{const e=n(g);return[...n(x)].sort((t,s)=>new Date(s.completedAt).getTime()-new Date(t.completedAt).getTime()).map(t=>{const s=Ie(t.quizId),i=s?s.content[e]??s.content.en??Object.values(s.content)[0]:void 0,b=i?.questions.length??t.responses.length,_=new Date(t.completedAt);return{attemptId:t.attemptId,quizId:t.quizId,quizTitle:i?.title??d("Unknown Quiz"),quizCategories:s?.categories??[],scorePercentage:t.percentage,score:t.score,totalQuestions:b,passed:t.passed,completedAtLabel:l(_),durationLabel:M(t.durationSeconds)}})});function l(e){const t=new Date,s=Math.trunc((e.getTime()-t.getTime())/1e3),i=Math.abs(s),b=n(g)==="cs"?"cs":"en",_=new Intl.RelativeTimeFormat(b,{numeric:"auto"});if(i<60)return _.format(s,"second");const D=Math.trunc(s/60);if(Math.abs(D)<60)return _.format(D,"minute");const I=Math.trunc(D/60);if(Math.abs(I)<24)return _.format(I,"hour");const w=Math.trunc(I/24);if(Math.abs(w)<7)return _.format(w,"day");const B=n(g)==="cs"?"cs-CZ":"en-US";return e.toLocaleDateString(B,{year:"numeric",month:"short",day:"numeric"})}function M(e){const t=Math.floor(e/60),s=e%60;return d("{minutes}m {seconds}s",{values:{minutes:String(t),seconds:String(s)}})}function u(e,t){te(re("/quiz/[id]/result/[attemptId]",{id:t,attemptId:e}))}function A(e){te(re("/quiz/[id]/take",{id:e}))}function h(){te(re("/quizzes"))}Y(()=>{y()});var C=Ke(),k=a(C);Ne(k,{});var T=o(k,2);Je(T,{get stats(){return n(p)}});var R=o(T,2);{var j=e=>{Ve(e,{get attempts(){return n(z)},viewResult:({attemptId:t,quizId:s})=>u(t,s),retakeQuiz:({quizId:t})=>A(t)})},v=e=>{$e(e,{browse:h})};se(R,e=>{n(z).length>0?e(j):e(v,!1)})}r(C),q(S,C),N()}export{vt as component};
